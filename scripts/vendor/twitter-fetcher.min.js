var twitterFetcher=function(){var domNode='',maxTweets=20,parseLinks=true,queue=[],inProgress=false,printTime=true,printUser=true,formatterFunction=null,supportsClassName=true,showRts=true,customCallbackFunction=null,showInteractionLinks=true;function tweetsHandler(tweets){var x=tweets.length;var n=0;var element=document.getElementById('widget-twitter');var html='<div class="twitter-user"></div>';html+='<div class="content feed">';while(n<x){html+='<hr>';html+='<div class="tweet-item">'+tweets[n]+'</div>';n++;}html+='</div>';html+='<div class="button cta">Follow</div>';element.innerHTML=html;if(config.twitter.showRetweet){document.getElementById(config.twitter.domId).className=config.twitter.domId+" multi";for(var i=0;i<document.querySelectorAll(".user").length;i++){var user=document.querySelectorAll(".user")[i];user.getElementsByTagName("a")[0].setAttribute('target','_blank');user.getElementsByTagName("a")[0].className="no-icon valign-middle";}}else{document.getElementById(config.twitter.domId).className=config.twitter.domId+" main";var user=document.createElement('h4');user.className="user";user.innerHTML=document.querySelectorAll(".user")[0].innerHTML;user.getElementsByTagName("img")[0].className="box-logo";user.getElementsByTagName("span")[0].remove();user.getElementsByTagName("span")[0].className="handle";user.getElementsByTagName("a")[0].setAttribute('target','_blank');user.getElementsByTagName("a")[0].className="no-icon valign-middle";document.querySelector(".twitter-user").appendChild(user);for(var i=0;i<document.querySelectorAll(".user").length;i++)document.querySelectorAll(".user")[i].remove();}function popupWindow(url,title,w,h){var left=(screen.width/2)-(w/2);var top=(screen.height/2)-(h/2);return window.open(url,title,'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);}document.getElementById(config.twitter.domId).querySelector(".button").onclick=function(){popupWindow('https://twitter.com/intent/user?screen_name='+user.getElementsByTagName('span')[0].innerHTML.substr(1),'Twitter Follow',640,600);return false;};}function strip(data){return data.replace(/<b[^>]*>(.*?)<\/b>/gi,function(a,s){return s;}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,'');}function getElementsByClassName(node,classname){var a=[];var regex=new RegExp('(^| )'+classname+'( |$)');var elems=node.getElementsByTagName('*');for(var i=0,j=elems.length;i<j;i++){if(regex.test(elems[i].className)){a.push(elems[i]);}}return a;}return{fetch:function(config){if(config.maxTweets===undefined){config.maxTweets=20;}if(config.enableLinks===undefined){config.enableLinks=true;}if(config.showUser===undefined){config.showUser=true;}if(config.showTime===undefined){config.showTime=true;}if(config.dateFunction===undefined){config.dateFunction='default';}if(config.showRetweet===undefined){config.showRetweet=true;}if(config.customCallback===undefined){config.customCallback=null;}if(config.showInteraction===undefined){config.showInteraction=false;}if(inProgress){queue.push(config);}else{inProgress=true;domNode=config.domId;maxTweets=config.maxTweets;parseLinks=config.enableLinks;printUser=config.showUser;printTime=config.showTime;showRts=config.showRetweet;formatterFunction=config.dateFunction;customCallbackFunction=config.customCallback;showInteractionLinks=config.showInteraction;var script=document.createElement('script');script.type='text/javascript';script.src='//cdn.syndication.twimg.com/widgets/timelines/'+config.id+'?&lang=en&callback=twitterFetcher.callback&'+'suppress_response_codes=true&rnd='+Math.random();document.getElementsByTagName('head')[0].appendChild(script);}},callback:function(data){var div=document.createElement('div');div.innerHTML=data.body;if(typeof(div.getElementsByClassName)==='undefined'){supportsClassName=false;}var tweets=[];var authors=[];var times=[];var rts=[];var tids=[];var x=0;if(supportsClassName){var tmp=div.getElementsByClassName('tweet');while(x<tmp.length){if(tmp[x].getElementsByClassName('retweet-credit').length>0){rts.push(true);}else{rts.push(false);}if(!rts[x]||rts[x]&&showRts){tweets.push(tmp[x].getElementsByClassName('e-entry-title')[0]);tids.push(tmp[x].getAttribute('data-tweet-id'));authors.push(tmp[x].getElementsByClassName('p-author')[0]);times.push(tmp[x].getElementsByClassName('dt-updated')[0]);}x++;}}else{var tmp=getElementsByClassName(div,'tweet');while(x<tmp.length){tweets.push(getElementsByClassName(tmp[x],'e-entry-title')[0]);tids.push(tmp[x].getAttribute('data-tweet-id'));authors.push(getElementsByClassName(tmp[x],'p-author')[0]);times.push(getElementsByClassName(tmp[x],'dt-updated')[0]);if(getElementsByClassName(tmp[x],'retweet-credit').length>0){rts.push(true);}else{rts.push(false);}x++;}}if(tweets.length>maxTweets){tweets.splice(maxTweets,(tweets.length-maxTweets));authors.splice(maxTweets,(authors.length-maxTweets));times.splice(maxTweets,(times.length-maxTweets));rts.splice(maxTweets,(rts.length-maxTweets));}var arrayTweets=[];var x=tweets.length;var n=0;while(n<x){if(typeof(formatterFunction)!=='string'){var newDate=new Date(times[n].getAttribute('datetime').replace(/-/g,'/').replace('T',' ').split('+')[0]);var dateString=formatterFunction(newDate);times[n].setAttribute('aria-label',dateString);if(tweets[n].innerText){if(supportsClassName){times[n].innerText=dateString;}else{var h=document.createElement('p');var t=document.createTextNode(dateString);h.appendChild(t);h.setAttribute('aria-label',dateString);times[n]=h;}}else{times[n].textContent=dateString;}}var op='';if(parseLinks){if(printUser){op+='<div class="user">'+strip(authors[n].innerHTML)+'</div>';}op+='<p class="tweet">'+strip(tweets[n].innerHTML)+'</p>';if(printTime){op+='<p class="timePosted">'+times[n].getAttribute('aria-label')+'</p>';}}else{if(tweets[n].innerText){if(printUser){op+='<p class="user">'+authors[n].innerText+'</p>';}op+='<p class="tweet">'+tweets[n].innerText+'</p>';if(printTime){op+='<p class="timePosted">'+times[n].innerText+'</p>';}}else{if(printUser){op+='<p class="user">'+authors[n].textContent+'</p>';}op+='<p class="tweet">'+tweets[n].textContent+'</p>';if(printTime){op+='<p class="timePosted">'+times[n].textContent+'</p>';}}}if(showInteractionLinks){op+='<p class="interact"><a href="https://twitter.com/intent/'+'tweet?in_reply_to='+tids[n]+'" class="twitter_reply_icon">'+'Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+tids[n]+'" class="twitter_retweet_icon">Retweet</a>'+'<a href="https://twitter.com/intent/favorite?tweet_id='+tids[n]+'" class="twitter_fav_icon">Favorite</a></p>';}arrayTweets.push(op);n++;}tweetsHandler(arrayTweets);inProgress=false;if(queue.length>0){twitterFetcher.fetch(queue[0]);queue.splice(0,1);}}};}();