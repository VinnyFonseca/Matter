{"version":3,"file":"build.js","sources":["../../app/scripts/core/vendor/fastclick.js","../../app/scripts/core/widgets/twitter.js","../../app/scripts/core/engine/modernizr-latest.js","../../app/scripts/core/engine/device.js","../../app/scripts/dev/config.js","../../app/scripts/core/polyfills/animationframe.js","../../app/scripts/core/polyfills/dateformat.js","../../app/scripts/core/polyfills/helper.js","../../app/scripts/core/vendor/datepicker.js","../../app/scripts/core/vendor/jquery.vimeo.api.js","../../app/scripts/core/vendor/picturefill.js","../../app/scripts/core/vendor/placeholders.js","../../app/scripts/core/widgets/autocomplete.js","../../app/scripts/core/widgets/brochure.js","../../app/scripts/core/widgets/fontsize.js","../../app/scripts/core/widgets/konami.js","../../app/scripts/core/widgets/map.js","../../app/scripts/core/widgets/notification.js","../../app/scripts/core/widgets/overlay.js","../../app/scripts/core/widgets/search.js","../../app/scripts/core/widgets/slider.js","../../app/scripts/core/widgets/tagcloud.js","../../app/scripts/core/widgets/tooltip.js","../../app/scripts/core/widgets/video.js","../../app/scripts/core/cookie.js","../../app/scripts/core/core.js","../../app/scripts/core/debug.js","../../app/scripts/core/form.js","../../app/scripts/core/session.js","../../app/scripts/core/table.js","../../app/scripts/core/validation.js","../../app/scripts/dev/global.js"],"names":["FastClick","layer","bind","method","context","apply","arguments","oldOnClick","this","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","notNeeded","deviceIsAndroid","addEventListener","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","prototype","stopImmediatePropagation","removeEventListener","type","callback","capture","rmv","Node","call","hijacked","adv","event","propagationStopped","onclick","initTwitter","$","length","each","i","el","domId","attr","widgetId","data","startAt","maxTweets","twitterConfig","config","twitter","enableLinks","showUser","showTime","showRetweet","showFollow","showInteraction","twitterFetcher","fetch","application","debug","console","log","window","Modernizr","document","undefined","setCss","str","mStyle","cssText","setCssAll","str1","str2","prefixes","join","is","obj","contains","substr","indexOf","testProps","props","prefixed","prop","testDOMProps","elem","item","testPropsAll","ucProp","charAt","toUpperCase","slice","cssomPrefixes","split","webforms","len","attrs","inputElem","list","createElement","HTMLDataListElement","bool","inputElemType","defaultView","setAttribute","value","smile","style","test","WebkitAppearance","docElement","appendChild","getComputedStyle","offsetHeight","removeChild","checkValidity","inputs","featureName","hasOwnProp","version","enableClasses","documentElement","mod","modElem","toString","omPrefixes","domPrefixes","toLowerCase","ns","svg","tests","classes","injectElementWithStyles","rule","nodes","testnames","ret","node","docOverflow","div","body","fakeBody","parseInt","id","innerHTML","background","overflow","parentNode","testMediaQuery","mq","matchMedia","msMatchMedia","matches","currentStyle","isEventSupported","eventName","element","TAGNAMES","isSupported","removeAttribute","select","change","submit","reset","error","load","abort","_hasOwnProperty","hasOwnProperty","object","property","constructor","Function","that","target","TypeError","args","bound","F","self","result","concat","Object","getContext","fillText","WebGLRenderingContext","DocumentTouch","offsetTop","navigator","postMessage","openDatabase","documentMode","history","pushState","backgroundColor","textShadow","opacity","str3","backgroundImage","offsetLeft","getElementById","sheet","styleSheet","cssRules","canPlayType","Boolean","ogg","replace","h264","webm","e","mp3","wav","m4a","localStorage","setItem","removeItem","sessionStorage","Worker","applicationCache","createElementNS","createSVGRect","firstChild","namespaceURI","feature","push","input","addTest","key","className","addStyleSheet","ownerDocument","p","parent","getElementsByTagName","insertBefore","lastChild","getElements","elements","html5","getExpandoData","expandoData","expando","expanID","nodeName","supportsUnknownElements","cache","cloneNode","saveClones","createElem","canHaveChildren","reSkip","tagUrn","frag","createDocumentFragment","clone","elems","l","shivMethods","createFrag","shivDocument","shivCSS","supportsHtml5Styles","hasCSS","options","a","childNodes","_version","_prefixes","_domPrefixes","_cssomPrefixes","hasEvent","testProp","testAllProps","testStyles","querySelectorAll","hasClass","device","previousDevice","addClass","find","handleOrientation","orientationEvent","removeClass","userAgent","ios","iphone","ipod","ipad","android","androidPhone","androidTablet","blackberry","blackberryPhone","blackberryTablet","windows","windowsPhone","windowsTablet","fxos","fxosPhone","fxosTablet","meego","cordova","location","protocol","nodeWebkit","process","mobile","tablet","desktop","television","portrait","innerHeight","innerWidth","landscape","noConflict","needle","regex","RegExp","match","trim","attachEvent","define","amd","module","exports","touch","root","rootPath","typography","resize","range","autoresize","characters","rows","minFontSize","maxFontSize","forms","validation","multiUploadlimit","notification","active","delay","tone","cookie","message","brochure","search","view","display","count","pagination","slider","nav","arrows","thumbnails","show","slideshow","animation","duration","interval","threshold","tables","responsive","tooltip","position","n","global","AnimationFrame","t","r","s","o","u","require","f","Error","code",1,"./lib/animation-frame",2,"frameRate","useNative","FRAME_RATE","_frameLength","_isCustomFrameRate","_timeoutId","_callbacks","_lastTickTime","_tickCounter","nativeImpl","now","performance","nativeRequest","request","nativeCancel","cancel","shim","animationFrame","requestAnimationFrame","cancelAnimationFrame","supported","setTimeout","callbacks","./native","./now","./performance",3,"top","name","cancelRequestAnimationFrame","vendors",4,"Date","getTime",5,"navigationStart",6,"PerformanceTiming","./performance-timing","dateFormat","token","timezone","timezoneClip","pad","val","String","date","mask","utc","dF","masks","_","d","D","m","y","H","M","L","getTimezoneOffset","flags","dd","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","Math","round","tt","T","TT","Z","pop","floor","abs","S","$0","default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","format","Element","remove","parentElement","NodeList","HTMLCollection","Array","searchElement","Number","Infinity","k","max","forEach","callbackfn","thisArg","Pk","kPresent","kValue","O","lenValue","initAnimationFrame","lastTime","x","currTime","timeToCall","clearTimeout","clean","deleteValue","splice","uniques","reduce","b","v","duplicates","j","arrayLength","serialize","encodeURIComponent","toCamelCase","$1","UTCDate","UTC","UTCToday","today","getFullYear","getMonth","getDate","alias","opts_from_el","prefix","re_lower","inkey","out","opts_from_locale","lang","dates","locale_opts","$window","DateArray","extras","get","valueOf","new_array","isArray","clear","copy","extend","Datepicker","viewDate","focusDate","_process_options","isInline","isInput","component","hasInput","picker","DPGlobal","template","_buildEvents","_attachEvents","appendTo","rtl","viewMode","startView","calendarWeeks","_allow_update","setStartDate","_o","startDate","setEndDate","endDate","setDaysOfWeekDisabled","daysOfWeekDisabled","fillDow","fillMonths","update","showMode","opts","language","defaults","minViewMode","multidate","multidateSeparator","weekStart","weekEnd","parseFormat","_local_to_utc","_zero_time","parseDate","map","plc","orientation","_plc","grep","word","_events","_secondaryEvents","_applyEvents","evs","ch","ev","on","_unapplyEvents","off","focus","proxy","keyup","inArray","keyCode","keydown","click","blur","_focused_from","place","mousedown touchstart","hide","_detachEvents","_attachSecondaryEvents","_detachSecondaryEvents","_trigger","altdate","local_date","_utc_to_local","trigger","ix","formatDate","detach","forceParse","setValue","datepicker","local","_zero_utc_time","getUTCFullYear","getUTCMonth","getUTCDate","getDates","getUTCDates","setDates","setUTCDates","setDate","setUTCDate","formatted","getFormattedDate","updateNavArrows","calendarWidth","outerWidth","calendarHeight","outerHeight","visualPadding","windowWidth","width","windowHeight","height","scrollTop","zIndex","parents","filter","css","first","offset","left","top_overflow","bottom_overflow","yorient","oldDates","fromArgs","fill","dowCnt","html","cell","prepend","daysMin","append","monthsShort","setRange","getClassNames","cls","year","month","todayHighlight","getUTCDay","startYear","startMonth","endYear","endMonth","todaytxt","cleartxt","text","months","toggle","todayBtn","clearBtn","prevMonth","day","getDaysInMonth","nextMonth","clsName","ws","th","yth","calWeek","beforeShowDay","noop","before","enabled","unique","empty","end","eq","yearCont","years","visibility","preventDefault","closest","dir","modes","navStep","moveMonth","moveYear","which","_setDate","autoclose","index","setUTCMonth","setUTCFullYear","_toggle_multidate","new_month","new_date","mag","dateWithinRange","newDate","newViewDate","dateChanged","keyboardNavigation","ctrlKey","shiftKey","min","DateRangePicker","jquery","dateUpdated","pickers","updateDates","updateRanges","updating","dp","old","fn","option","shift","internal_return","$this","elopts","xopts","locopts","ropts","toArray","Constructor","en","days","daysShort","navFnc","isLeapYear","validParts","nonpunctuation","separators","parts","match_part","part","part_re","exec","filtered","parsed","setters_order","setters_map","isNaN","fparts","cnt","_date","DD","substring","seps","headTemplate","contTemplate","footTemplate","jQuery","deviceIsIOS","deviceIsIOS4","deviceIsIOSWithBadTarget","needsClick","disabled","needsFocus","readOnly","sendClick","clickEvent","activeElement","changedTouches","createEvent","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","setSelectionRange","updateScrollParent","scrollParent","fastClickScrollParent","scrollHeight","fastClickLastScrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","selection","targetTouches","getSelection","rangeCount","isCollapsed","identifier","timeStamp","pageX","pageY","lastClickTime","touchHasMoved","boundary","findControl","labelElement","control","htmlFor","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","ontouchstart","content","screen","msTouchAction","attach","vimeoJqueryAPI","catchMethods","methodreturn","init","vimeoVideo","vimeoAPIurl","originalEvent","origin","parseJSON","setPlayerID","setVimeoAPIurl","handleEvent","handleMethod","player_id","vid","api","_data","contentWindow","JSON","stringify","vdata","removeData","triggerHandler","ready","url","firstSeperator","param","vimeo","option1","option2","catchMethodLength","cml","func","setInterval","clearInterval","w","doc","picturefill","opt","firstMatch","candidates","pf","getAllElements","plen","reevaluate","evaluated","removeVideoShim","getMatch","srcset","srcsetSupported","sizesSupported","dodgeSrcset","processSourceSet","applyBestCandidate","runPicturefill","checkResize","resizeThrottle","_picturefillWorking","intervalId","readyState","HTMLPictureElement","img","endsWith","suffix","restrictsMixedContent","matchesMedia","media","getDpr","devicePixelRatio","getWidthFromLength","parseFloat","lengthEl","offsetWidth","types","implementation","hasFeature","Image","onerror","onload","src","verifyTypeSupport","source","getAttribute","parseSize","sourceSizeStr","findWidthFromSourceSize","sourceSizeListStr","winningLength","sourceSizeList","sourceSize","parsedSize","parseSrcset","pos","descriptor","last","descpos","parseDescriptor","sizesattr","resCandidate","sizes","sizeDescriptor","widthInCssPixels","splitDescriptor","curr","lastchar","res","getCandidatesFromSourceSet","formattedCandidates","candidate","resolution","picImg","bestCandidate","sort","ascendingSort","warn","currentSrc","picture","videos","video","vsources","imgs","currImg","sources","slen","typeSupported","safeActiveElement","err","arr","moveCaret","createTextRange","move","selectionStart","changeType","handleElem","ATTR_CURRENT_VAL","handleInputs","handleTextareas","textareas","handleInputsLength","handleTextareasLength","disablePlaceholders","hidePlaceholder","enablePlaceholders","showPlaceholder","keydownValue","valueChanged","isPlaceholderValue","ATTR_ACTIVE","classNameRegExp","maxLength","ATTR_MAXLENGTH","ATTR_INPUT_TYPE","placeholderClassName","makeFocusHandler","hideOnInput","makeBlurHandler","makeSubmitHandler","form","makeKeydownHandler","keydownVal","badKeys","makeKeyupHandler","makeClickHandler","newElement","ATTR_FORM_HANDLED","ATTR_EVENTS_BOUND","placeholder","nativeSupport","Placeholders","disable","enable","validTypes","placeholderStyleColor","ATTR_OPTION_FOCUS","ATTR_OPTION_LIVE","UPDATE_INTERVAL","head","liveUpdates","styleElem","styleRules","createTextNode","nodeValue","attributes","timer","initAutocomplete","children","itemIndex","parameter","selecting","buildSystem","JSONobjects","Results","populateList","tempArray","not","selectedItem","showResults","unhighlight","highlight","dataRequest","clearBrochure","sessionSystem","initBrochure","brochureCompare","brochureData","brochureDetails","Name","title","URL","href","AddToBrochure","set","notify","brochureItem","initFontSizeControls","defaultSize","fontSize","cookieSystem","textResize","charLimit","rowLimit","string","span","stringContent","stringLength","stringFinal","stringHalf","spaceFound","initKonami","userCode","userString","konamiCoding","buildKonami","resetKonami","callKonami","konamiCode","konamiString","themes","Bentley","featureType","stylers","hue","saturation","lightness","gamma","MapBox","elementType","color","PastelTones","LightOnDarkGray","Grayscale","testHiRes","dpr","deviceXDPI","logicalXDPI","buildMap","mapOptions","center","google","maps","LatLng","Options","CenterLat","CenterLng","zoom","Zoom","zoomControl","zoomControlOptions","ZoomControlStyle","LARGE","disableDoubleClickZoom","mapTypeControl","mapTypeControlOptions","MapTypeControlStyle","HORIZONTAL_BAR","scale","scaleControl","scrollwheel","panControl","streetViewControl","draggable","overviewMapControl","overviewMapControlOptions","opened","mapTypeId","MapTypeId","ROADMAP","styles","mapElement","Map","bindInfoWindow","marker","desc","telephone","email","web","link","infoWindowVisible","currentlyVisible","visible","iw","InfoWindow","addListener","close","open","Markers","Marker","icon","Lat","Lng","Title","Desc","tel","Tel","Email","Url","addDomListener","getCenter","setCenter","initMap","loadScript","notificationCount","cookieNotify","Timer","timerId","start","remaining","stop","pause","resume","notifyShow","initNotifications","initOverlays","initSearch","outputArray","tagcloudElement","tagclose","searchView","searchDisplay","resultsControlsElement","resultsCountElement","resultsViewsElement","resultsPaginationElement","resultsElement","loadElement","results","insertAfter","tagcloud","controls","views","initSVGs","siblings","parameterArray","resultArray","populateSelects","inputInit","keycode","validKeys","updateResults","tag","updateTags","allArray","existsArray","totalArray","finalArray","Id","currentPage","inputAnalysis","criteria","compare","retrieved","analyseArray","analyseString","tagAnalysis","analyse","joined","outputSet","resultSet","outputCount","hasOutput","cleanArray","countRepeated","counts","num","analysis","firstLoad","rebuildSystem","loadItems","image","dateStr","z","hour","getHours","hours","minute","getMinutes","minutes","fulldate","summary","Summary","Type","categories","Categories","tags","Tags","initTooltips","showItem","items","resultsCount","pages","page","animate","queue","complete","anchorClicked","initDropdowns","sliderInit","sliderId","sliderActive","slideContainerEl","slideMovableEl","slideContainer","slideMovable","slide","slideDirection","slideTimer","hasNav","hasArrows","hasThumbnails","slideAnimation","slideShow","animDuration","animInterval","animating","slideCount","slideCurrent","slideBefore","minCount","maxCount","sliderWidth","sliderHeight","isMultiSlide","slideStep","slideTrigger","slideTolerance","sliderStart","slideNext","sliderStop","arrowPrevEl","arrowNextEl","arrowPrev","arrowNext","navBullet","navWrapperEl","navWrapper","navBulletEl","slideThumb","slideImg","background-image","containerPos","margin-left","sliderTop","sliderBottom","sliderLeft","sliderRight","slideClone","cloned","slidePrev","slideAction","slideAny","slideEnd","fadeIn","onkeydown","dragStart","dragX","dragEnd","down","dragging","slideKickback","touches","dragY","dragNext","dragPrev","initDrag","prependTo","inBounds","initSliders","initTagClouds","tagArray","tagCloud","tagHidden","tagClose","hidden","updateArray","tooltipPosition","evt","container","cursorX","cursorY","right","boundaries","tooltipData","factory","strip","targetLinksToNewWindow","links","getElementsByClassName","classname","extractImageUrl","image_data","data_src","decodeURIComponent","handlerConfig","domNode","parseLinks","inProgress","printTime","printUser","showRts","showFlw","showInteractionLinks","showImages","targetBlank","formatterFunction","customCallbackFunction","supportsClassName","fetchConfig","setup","dateFunction","customCallback","linksInNewWindow","script","random","handler","tweets","userMulti","replaceWith","userSingle","popupWindow","user","authors","times","images","rts","tids","tmpClass","tmpNoClass","arrayTweets","datetimeText","dateString","innerText","textContent","op","initVideo","ytAPIVideoReady","ytAPIFrameReady","ytFramePlayers","ytFrameBuild","onPlayerReady","wrapper","button","currentPlayer","pauseVideo","playVideo","preview","onPlayerStateChange","YT","PlayerState","ENDED","PAUSED","Player","events","onReady","onStateChange","videoSRC","videoID","videoThumb","playerVars","rel","wmode","modestbranding","enablejsapi","showinfo","autohide","widget","ytVideoPlayers","ytVideoBuild","videoId","onYouTubeIframeAPIReady","getScript","onYouTubePlayerAPIReady","vimFramePlayers","vimFrameBuild","onPlayerStop","wrap","build","thumbnail_large","vimVideoPlayers","vimVideoBuild","initCookies","sKey","sValue","vEnd","sPath","sDomain","bSecure","sExpires","currentDate","expiryDate","toGMTString","hasItem","has","svgCount","imgID","imgClass","imgURL","removeAttr","fail","randomizeInteger","URLQueryObject","urlParams","onpopstate","pl","decode","query","returnedData","dataObject","successFunction","ajax","dataType","success","status","initLinks","scrollProgress","scrollPercentage","pageTop","ms","matterReady","isWideScreen","initSession","initTables","initForm","initValidation","initGlobal","matterDeferred","pageBottom","initBreakpointDebug","onreadystatechange","write","mqUniqueBP","buildCountries","Code","initFileInputs","inputCount","inputLimit","limitElement","currentCount","newInput","resultElement","next","meter","triggerProgress","progress","label","prev","bar","progressInterval","buildDropdowns","size","selected","wrapperEl","currentEl","arrowEl","dropEl","dropWrapper","arrow","current","dropdown","isSelected","dropItem","parse","win","store","sessionSave","onunload","dump","caption","table","headers","rlen","rowData","clen","cells","cellData","rowGroup","tbody","row","mobileTable","scorePassword","pwd","score","letters","variations","digits","lower","upper","nonWords","variationCount","check","detectCard","number","amex","dankort","diners","discover","electron","interpayment","jcb","maestro","mastercard","unionpay","visa","validateField","mirror","group","selects","selectGroup","checked","radios","radioGroup","validArray","validateRealtime","firstVisitCookie","section","toggleClass","introParallax","-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform","stickyControls","controlsBottom","bottom"],"mappings":"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","sourcesContent":["/**\r\n * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\r\n *\r\n * @version 1.0.0\r\n * @codingstandard ftlabs-jsv2\r\n * @copyright The Financial Times Limited [All Rights Reserved]\r\n * @license MIT License (see LICENSE.txt)\r\n */\r\n\r\n/*jslint browser:true, node:true*/\r\n/*global define, Event, Node*/\r\n\r\n\r\n/**\r\n * Instantiate fast-clicking listeners on the specificed layer.\r\n *\r\n * @constructor\r\n * @param {Element} layer The layer to listen on\r\n */\r\nfunction FastClick(layer) {\r\n\t'use strict';\r\n\tvar oldOnClick;\r\n\r\n\r\n\t/**\r\n\t * Whether a click is currently being tracked.\r\n\t *\r\n\t * @type boolean\r\n\t */\r\n\tthis.trackingClick = false;\r\n\r\n\r\n\t/**\r\n\t * Timestamp for when when click tracking started.\r\n\t *\r\n\t * @type number\r\n\t */\r\n\tthis.trackingClickStart = 0;\r\n\r\n\r\n\t/**\r\n\t * The element being tracked for a click.\r\n\t *\r\n\t * @type EventTarget\r\n\t */\r\n\tthis.targetElement = null;\r\n\r\n\r\n\t/**\r\n\t * X-coordinate of touch start event.\r\n\t *\r\n\t * @type number\r\n\t */\r\n\tthis.touchStartX = 0;\r\n\r\n\r\n\t/**\r\n\t * Y-coordinate of touch start event.\r\n\t *\r\n\t * @type number\r\n\t */\r\n\tthis.touchStartY = 0;\r\n\r\n\r\n\t/**\r\n\t * ID of the last touch, retrieved from Touch.identifier.\r\n\t *\r\n\t * @type number\r\n\t */\r\n\tthis.lastTouchIdentifier = 0;\r\n\r\n\r\n\t/**\r\n\t * Touchmove boundary, beyond which a click will be cancelled.\r\n\t *\r\n\t * @type number\r\n\t */\r\n\tthis.touchBoundary = 10;\r\n\r\n\r\n\t/**\r\n\t * The FastClick layer.\r\n\t *\r\n\t * @type Element\r\n\t */\r\n\tthis.layer = layer;\r\n\r\n\tif (FastClick.notNeeded(layer)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Some old versions of Android don't have Function.prototype.bind\r\n\tfunction bind(method, context) {\r\n\t\treturn function() { return method.apply(context, arguments); };\r\n\t}\r\n\r\n\t// Set up event handlers as required\r\n\tif (deviceIsAndroid) {\r\n\t\tlayer.addEventListener('mouseover', bind(this.onMouse, this), true);\r\n\t\tlayer.addEventListener('mousedown', bind(this.onMouse, this), true);\r\n\t\tlayer.addEventListener('mouseup', bind(this.onMouse, this), true);\r\n\t}\r\n\r\n\tlayer.addEventListener('click', bind(this.onClick, this), true);\r\n\tlayer.addEventListener('touchstart', bind(this.onTouchStart, this), false);\r\n\tlayer.addEventListener('touchmove', bind(this.onTouchMove, this), false);\r\n\tlayer.addEventListener('touchend', bind(this.onTouchEnd, this), false);\r\n\tlayer.addEventListener('touchcancel', bind(this.onTouchCancel, this), false);\r\n\r\n\t// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\r\n\t// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\r\n\t// layer when they are cancelled.\r\n\tif (!Event.prototype.stopImmediatePropagation) {\r\n\t\tlayer.removeEventListener = function(type, callback, capture) {\r\n\t\t\tvar rmv = Node.prototype.removeEventListener;\r\n\t\t\tif (type === 'click') {\r\n\t\t\t\trmv.call(layer, type, callback.hijacked || callback, capture);\r\n\t\t\t} else {\r\n\t\t\t\trmv.call(layer, type, callback, capture);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlayer.addEventListener = function(type, callback, capture) {\r\n\t\t\tvar adv = Node.prototype.addEventListener;\r\n\t\t\tif (type === 'click') {\r\n\t\t\t\tadv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {\r\n\t\t\t\t\tif (!event.propagationStopped) {\r\n\t\t\t\t\t\tcallback(event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}), capture);\r\n\t\t\t} else {\r\n\t\t\t\tadv.call(layer, type, callback, capture);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t// If a handler is already declared in the element's onclick attribute, it will be fired before\r\n\t// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\r\n\t// adding it as listener.\r\n\tif (typeof layer.onclick === 'function') {\r\n\r\n\t\t// Android browser on at least 3.2 requires a new reference to the function in layer.onclick\r\n\t\t// - the old one won't work if passed to addEventListener directly.\r\n\t\toldOnClick = layer.onclick;\r\n\t\tlayer.addEventListener('click', function(event) {\r\n\t\t\toldOnClick(event);\r\n\t\t}, false);\r\n\t\tlayer.onclick = null;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Android requires exceptions.\r\n *\r\n * @type boolean\r\n */\r\nvar deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0;\r\n\r\n\r\n/**\r\n * iOS requires exceptions.\r\n *\r\n * @type boolean\r\n */\r\nvar deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent);\r\n\r\n\r\n/**\r\n * iOS 4 requires an exception for select elements.\r\n *\r\n * @type boolean\r\n */\r\nvar deviceIsIOS4 = deviceIsIOS && (/OS 4_\\d(_\\d)?/).test(navigator.userAgent);\r\n\r\n\r\n/**\r\n * iOS 6.0(+?) requires the target element to be manually derived\r\n *\r\n * @type boolean\r\n */\r\nvar deviceIsIOSWithBadTarget = deviceIsIOS && (/OS ([6-9]|\\d{2})_\\d/).test(navigator.userAgent);\r\n\r\n\r\n/**\r\n * Determine whether a given element requires a native click.\r\n *\r\n * @param {EventTarget|Element} target Target DOM element\r\n * @returns {boolean} Returns true if the element needs a native click\r\n */\r\nFastClick.prototype.needsClick = function(target) {\r\n\t'use strict';\r\n\tswitch (target.nodeName.toLowerCase()) {\r\n\r\n\t// Don't send a synthetic click to disabled inputs (issue #62)\r\n\tcase 'button':\r\n\tcase 'select':\r\n\tcase 'textarea':\r\n\t\tif (target.disabled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tbreak;\r\n\tcase 'input':\r\n\r\n\t\t// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\r\n\t\tif ((deviceIsIOS && target.type === 'file') || target.disabled) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tbreak;\r\n\tcase 'label':\r\n\tcase 'video':\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn (/\\bneedsclick\\b/).test(target.className);\r\n};\r\n\r\n\r\n/**\r\n * Determine whether a given element requires a call to focus to simulate click into element.\r\n *\r\n * @param {EventTarget|Element} target Target DOM element\r\n * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\r\n */\r\nFastClick.prototype.needsFocus = function(target) {\r\n\t'use strict';\r\n\tswitch (target.nodeName.toLowerCase()) {\r\n\tcase 'textarea':\r\n\t\treturn true;\r\n\tcase 'select':\r\n\t\treturn !deviceIsAndroid;\r\n\tcase 'input':\r\n\t\tswitch (target.type) {\r\n\t\tcase 'button':\r\n\t\tcase 'checkbox':\r\n\t\tcase 'file':\r\n\t\tcase 'image':\r\n\t\tcase 'radio':\r\n\t\tcase 'submit':\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// No point in attempting to focus disabled inputs\r\n\t\treturn !target.disabled && !target.readOnly;\r\n\tdefault:\r\n\t\treturn (/\\bneedsfocus\\b/).test(target.className);\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * Send a click event to the specified element.\r\n *\r\n * @param {EventTarget|Element} targetElement\r\n * @param {Event} event\r\n */\r\nFastClick.prototype.sendClick = function(targetElement, event) {\r\n\t'use strict';\r\n\tvar clickEvent, touch;\r\n\r\n\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\r\n\tif (document.activeElement && document.activeElement !== targetElement) {\r\n\t\tdocument.activeElement.blur();\r\n\t}\r\n\r\n\ttouch = event.changedTouches[0];\r\n\r\n\t// Synthesise a click event, with an extra attribute so it can be tracked\r\n\tclickEvent = document.createEvent('MouseEvents');\r\n\tclickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\r\n\tclickEvent.forwardedTouchEvent = true;\r\n\ttargetElement.dispatchEvent(clickEvent);\r\n};\r\n\r\nFastClick.prototype.determineEventType = function(targetElement) {\r\n\t'use strict';\r\n\r\n\t//Issue #159: Android Chrome Select Box does not open with a synthetic click event\r\n\tif (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\r\n\t\treturn 'mousedown';\r\n\t}\r\n\r\n\treturn 'click';\r\n};\r\n\r\n\r\n/**\r\n * @param {EventTarget|Element} targetElement\r\n */\r\nFastClick.prototype.focus = function(targetElement) {\r\n\t'use strict';\r\n\tvar length;\r\n\r\n\t// Issue #160: on iOS 7, some input elements (e.g. date datetime) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\r\n\tif (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time') {\r\n\t\tlength = targetElement.value.length;\r\n\t\ttargetElement.setSelectionRange(length, length);\r\n\t} else {\r\n\t\ttargetElement.focus();\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\r\n *\r\n * @param {EventTarget|Element} targetElement\r\n */\r\nFastClick.prototype.updateScrollParent = function(targetElement) {\r\n\t'use strict';\r\n\tvar scrollParent, parentElement;\r\n\r\n\tscrollParent = targetElement.fastClickScrollParent;\r\n\r\n\t// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\r\n\t// target element was moved to another parent.\r\n\tif (!scrollParent || !scrollParent.contains(targetElement)) {\r\n\t\tparentElement = targetElement;\r\n\t\tdo {\r\n\t\t\tif (parentElement.scrollHeight > parentElement.offsetHeight) {\r\n\t\t\t\tscrollParent = parentElement;\r\n\t\t\t\ttargetElement.fastClickScrollParent = parentElement;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tparentElement = parentElement.parentElement;\r\n\t\t} while (parentElement);\r\n\t}\r\n\r\n\t// Always update the scroll top tracker if possible.\r\n\tif (scrollParent) {\r\n\t\tscrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * @param {EventTarget} targetElement\r\n * @returns {Element|EventTarget}\r\n */\r\nFastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {\r\n\t'use strict';\r\n\r\n\t// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\r\n\tif (eventTarget.nodeType === Node.TEXT_NODE) {\r\n\t\treturn eventTarget.parentNode;\r\n\t}\r\n\r\n\treturn eventTarget;\r\n};\r\n\r\n\r\n/**\r\n * On touch start, record the position and scroll offset.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.onTouchStart = function(event) {\r\n\t'use strict';\r\n\tvar targetElement, touch, selection;\r\n\r\n\t// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\r\n\tif (event.targetTouches.length > 1) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\ttargetElement = this.getTargetElementFromEventTarget(event.target);\r\n\ttouch = event.targetTouches[0];\r\n\r\n\tif (deviceIsIOS) {\r\n\r\n\t\t// Only trusted events will deselect text on iOS (issue #49)\r\n\t\tselection = window.getSelection();\r\n\t\tif (selection.rangeCount && !selection.isCollapsed) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (!deviceIsIOS4) {\r\n\r\n\t\t\t// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\r\n\t\t\t// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\r\n\t\t\t// with the same identifier as the touch event that previously triggered the click that triggered the alert.\r\n\t\t\t// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\r\n\t\t\t// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.\r\n\t\t\tif (touch.identifier === this.lastTouchIdentifier) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastTouchIdentifier = touch.identifier;\r\n\r\n\t\t\t// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\r\n\t\t\t// 1) the user does a fling scroll on the scrollable layer\r\n\t\t\t// 2) the user stops the fling scroll with another tap\r\n\t\t\t// then the event.target of the last 'touchend' event will be the element that was under the user's finger\r\n\t\t\t// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\r\n\t\t\t// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\r\n\t\t\tthis.updateScrollParent(targetElement);\r\n\t\t}\r\n\t}\r\n\r\n\tthis.trackingClick = true;\r\n\tthis.trackingClickStart = event.timeStamp;\r\n\tthis.targetElement = targetElement;\r\n\r\n\tthis.touchStartX = touch.pageX;\r\n\tthis.touchStartY = touch.pageY;\r\n\r\n\t// Prevent phantom clicks on fast double-tap (issue #36)\r\n\tif ((event.timeStamp - this.lastClickTime) < 200) {\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\n\r\n/**\r\n * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.touchHasMoved = function(event) {\r\n\t'use strict';\r\n\tvar touch = event.changedTouches[0], boundary = this.touchBoundary;\r\n\r\n\tif (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n\r\n/**\r\n * Update the last position.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.onTouchMove = function(event) {\r\n\t'use strict';\r\n\tif (!this.trackingClick) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// If the touch has moved, cancel the click tracking\r\n\tif (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\r\n\t\tthis.trackingClick = false;\r\n\t\tthis.targetElement = null;\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\n\r\n/**\r\n * Attempt to find the labelled control for the given label element.\r\n *\r\n * @param {EventTarget|HTMLLabelElement} labelElement\r\n * @returns {Element|null}\r\n */\r\nFastClick.prototype.findControl = function(labelElement) {\r\n\t'use strict';\r\n\r\n\t// Fast path for newer browsers supporting the HTML5 control attribute\r\n\tif (labelElement.control !== undefined) {\r\n\t\treturn labelElement.control;\r\n\t}\r\n\r\n\t// All browsers under test that support touch events also support the HTML5 htmlFor attribute\r\n\tif (labelElement.htmlFor) {\r\n\t\treturn document.getElementById(labelElement.htmlFor);\r\n\t}\r\n\r\n\t// If no for attribute exists, attempt to retrieve the first labellable descendant element\r\n\t// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\r\n\treturn labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\r\n};\r\n\r\n\r\n/**\r\n * On touch end, determine whether to send a click event at once.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.onTouchEnd = function(event) {\r\n\t'use strict';\r\n\tvar forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;\r\n\r\n\tif (!this.trackingClick) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Prevent phantom clicks on fast double-tap (issue #36)\r\n\tif ((event.timeStamp - this.lastClickTime) < 200) {\r\n\t\tthis.cancelNextClick = true;\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Reset to prevent wrong click cancel on input (issue #156).\r\n\tthis.cancelNextClick = false;\r\n\r\n\tthis.lastClickTime = event.timeStamp;\r\n\r\n\ttrackingClickStart = this.trackingClickStart;\r\n\tthis.trackingClick = false;\r\n\tthis.trackingClickStart = 0;\r\n\r\n\t// On some iOS devices, the targetElement supplied with the event is invalid if the layer\r\n\t// is performing a transition or scroll, and has to be re-detected manually. Note that\r\n\t// for this to function correctly, it must be called *after* the event target is checked!\r\n\t// See issue #57; also filed as rdar://13048589 .\r\n\tif (deviceIsIOSWithBadTarget) {\r\n\t\ttouch = event.changedTouches[0];\r\n\r\n\t\t// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\r\n\t\ttargetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\r\n\t\ttargetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\r\n\t}\r\n\r\n\ttargetTagName = targetElement.tagName.toLowerCase();\r\n\tif (targetTagName === 'label') {\r\n\t\tforElement = this.findControl(targetElement);\r\n\t\tif (forElement) {\r\n\t\t\tthis.focus(targetElement);\r\n\t\t\tif (deviceIsAndroid) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\ttargetElement = forElement;\r\n\t\t}\r\n\t} else if (this.needsFocus(targetElement)) {\r\n\r\n\t\t// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\r\n\t\t// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\r\n\t\tif ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {\r\n\t\t\tthis.targetElement = null;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.focus(targetElement);\r\n\t\tthis.sendClick(targetElement, event);\r\n\r\n\t\t// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\r\n\t\tif (!deviceIsIOS4 || targetTagName !== 'select') {\r\n\t\t\tthis.targetElement = null;\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (deviceIsIOS && !deviceIsIOS4) {\r\n\r\n\t\t// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\r\n\t\t// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\r\n\t\tscrollParent = targetElement.fastClickScrollParent;\r\n\t\tif (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t// Prevent the actual click from going though - unless the target node is marked as requiring\r\n\t// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\r\n\tif (!this.needsClick(targetElement)) {\r\n\t\tevent.preventDefault();\r\n\t\tthis.sendClick(targetElement, event);\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n\r\n/**\r\n * On touch cancel, stop tracking the click.\r\n *\r\n * @returns {void}\r\n */\r\nFastClick.prototype.onTouchCancel = function() {\r\n\t'use strict';\r\n\tthis.trackingClick = false;\r\n\tthis.targetElement = null;\r\n};\r\n\r\n\r\n/**\r\n * Determine mouse events which should be permitted.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.onMouse = function(event) {\r\n\t'use strict';\r\n\r\n\t// If a target element was never set (because a touch event was never fired) allow the event\r\n\tif (!this.targetElement) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tif (event.forwardedTouchEvent) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Programmatically generated events targeting a specific element should be permitted\r\n\tif (!event.cancelable) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Derive and check the target element to see whether the mouse event needs to be permitted;\r\n\t// unless explicitly enabled, prevent non-touch click events from triggering actions,\r\n\t// to prevent ghost/doubleclicks.\r\n\tif (!this.needsClick(this.targetElement) || this.cancelNextClick) {\r\n\r\n\t\t// Prevent any user-added listeners declared on FastClick element from being fired.\r\n\t\tif (event.stopImmediatePropagation) {\r\n\t\t\tevent.stopImmediatePropagation();\r\n\t\t} else {\r\n\r\n\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\r\n\t\t\tevent.propagationStopped = true;\r\n\t\t}\r\n\r\n\t\t// Cancel the event\r\n\t\tevent.stopPropagation();\r\n\t\tevent.preventDefault();\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// If the mouse event is permitted, return true for the action to go through.\r\n\treturn true;\r\n};\r\n\r\n\r\n/**\r\n * On actual clicks, determine whether this is a touch-generated click, a click action occurring\r\n * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\r\n * an actual click which should be permitted.\r\n *\r\n * @param {Event} event\r\n * @returns {boolean}\r\n */\r\nFastClick.prototype.onClick = function(event) {\r\n\t'use strict';\r\n\tvar permitted;\r\n\r\n\t// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\r\n\tif (this.trackingClick) {\r\n\t\tthis.targetElement = null;\r\n\t\tthis.trackingClick = false;\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\r\n\tif (event.target.type === 'submit' && event.detail === 0) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpermitted = this.onMouse(event);\r\n\r\n\t// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\r\n\tif (!permitted) {\r\n\t\tthis.targetElement = null;\r\n\t}\r\n\r\n\t// If clicks are permitted, return true for the action to go through.\r\n\treturn permitted;\r\n};\r\n\r\n\r\n/**\r\n * Remove all FastClick's event listeners.\r\n *\r\n * @returns {void}\r\n */\r\nFastClick.prototype.destroy = function() {\r\n\t'use strict';\r\n\tvar layer = this.layer;\r\n\r\n\tif (deviceIsAndroid) {\r\n\t\tlayer.removeEventListener('mouseover', this.onMouse, true);\r\n\t\tlayer.removeEventListener('mousedown', this.onMouse, true);\r\n\t\tlayer.removeEventListener('mouseup', this.onMouse, true);\r\n\t}\r\n\r\n\tlayer.removeEventListener('click', this.onClick, true);\r\n\tlayer.removeEventListener('touchstart', this.onTouchStart, false);\r\n\tlayer.removeEventListener('touchmove', this.onTouchMove, false);\r\n\tlayer.removeEventListener('touchend', this.onTouchEnd, false);\r\n\tlayer.removeEventListener('touchcancel', this.onTouchCancel, false);\r\n};\r\n\r\n\r\n/**\r\n * Check whether FastClick is needed.\r\n *\r\n * @param {Element} layer The layer to listen on\r\n */\r\nFastClick.notNeeded = function(layer) {\r\n\t'use strict';\r\n\tvar metaViewport;\r\n\tvar chromeVersion;\r\n\r\n\t// Devices that don't support touch don't need FastClick\r\n\tif (typeof window.ontouchstart === 'undefined') {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Chrome version - zero for other browsers\r\n\tchromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\r\n\r\n\tif (chromeVersion) {\r\n\r\n\t\tif (deviceIsAndroid) {\r\n\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\r\n\r\n\t\t\tif (metaViewport) {\r\n\t\t\t\t// Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\r\n\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t// Chrome 32 and above with width=device-width or less don't need FastClick\r\n\t\t\t\tif (chromeVersion > 31 && window.innerWidth <= window.screen.width) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t// Chrome desktop doesn't need FastClick (issue #15)\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t// IE10 with -ms-touch-action: none, which disables double-tap-to-zoom (issue #97)\r\n\tif (layer.style.msTouchAction === 'none') {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\n\r\n/**\r\n * Factory method for creating a FastClick object\r\n *\r\n * @param {Element} layer The layer to listen on\r\n */\r\nFastClick.attach = function(layer) {\r\n\t'use strict';\r\n\treturn new FastClick(layer);\r\n};\r\n\r\n\r\nif (typeof define !== 'undefined' && define.amd) {\r\n\r\n\t// AMD. Register as an anonymous module.\r\n\tdefine(function() {\r\n\t\t'use strict';\r\n\t\treturn FastClick;\r\n\t});\r\n} else if (typeof module !== 'undefined' && module.exports) {\r\n\tmodule.exports = FastClick.attach;\r\n\tmodule.exports.FastClick = FastClick;\r\n} else {\r\n\twindow.FastClick = FastClick;\r\n}\r\n","/*********************************************************************\n*  #### Twitter Post Fetcher v13.0 ####\n*  Coded by Jason Mayes 2015. A present to all the developers out there.\n*  www.jasonmayes.com\n*  Please keep this disclaimer with my code if you use it. Thanks. :-)\n*  Got feedback or questions, ask here:\n*  http://www.jasonmayes.com/projects/twitterApi/\n*  Github: https://github.com/jasonmayes/Twitter-Post-Fetcher\n*  Updates will be posted to this site.\n*********************************************************************/\n\n(function(root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals.\n\t\tfactory();\n\t}\n}(this, function() {\n\tvar handlerConfig;\n\tvar domNode = '';\n\tvar startAt = 0;\n\tvar maxTweets = 20;\n\tvar parseLinks = true;\n\tvar queue = [];\n\tvar inProgress = false;\n\tvar printTime = true;\n\tvar printUser = true;\n\tvar showRts = true;\n\tvar showFlw = true;\n\tvar showInteractionLinks = true;\n\tvar showImages = false;\n\tvar targetBlank = true;\n\tvar formatterFunction = null;\n\tvar customCallbackFunction = null;\n\tvar supportsClassName = true;\n\tvar lang = 'en';\n\n\tfunction handleTweets(tweets) {\n\t\t// console.log(tweets);\n\n\t\tif (customCallbackFunction === null) {\n\t\t\tvar x = tweets.length;\n\t\t\tvar n = 0;\n\t\t\tvar element = document.getElementById(domNode);\n\t\t\tvar html = '<ul>';\n\t\t\twhile(n < x) {\n\t\t\t\thtml += '<li>' + tweets[n] + '</li>';\n\t\t\t\tn++;\n\t\t\t}\n\t\t\thtml += '</ul>';\n\t\t\telement.innerHTML = html;\n\t\t} else {\n\t\t\tcustomCallbackFunction(tweets);\n\t\t}\n\t}\n\n\n\tfunction strip(data) {\n\t\treturn data.replace(/<b[^>]*>(.*?)<\\/b>/gi, function(a,s){return s;})\n\t\t\t\t.replace(/class=\".*?\"|data-query-source=\".*?\"|dir=\".*?\"|rel=\".*?\"/gi,\n\t\t\t\t'');\n\t}\n\n\tfunction targetLinksToNewWindow(el) {\n\t\tvar links = el.getElementsByTagName('a');\n\t\tfor (var i = links.length - 1; i >= 0; i--) {\n\t\t\tlinks[i].setAttribute('target', '_blank');\n\t\t}\n\t}\n\n\tfunction getElementsByClassName (node, classname) {\n\t\tvar a = [];\n\t\tvar regex = new RegExp('(^| )' + classname + '( |$)');\n\t\tvar elems = node.getElementsByTagName('*');\n\t\tfor (var i = 0, j = elems.length; i < j; i++) {\n\t\t\t\tif(regex.test(elems[i].className)){\n\t\t\t\t\ta.push(elems[i]);\n\t\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\tfunction extractImageUrl(image_data) {\n\t\tif (image_data !== undefined) {\n\t\t\tvar data_src = image_data.innerHTML.match(/data-srcset=\"([A-z0-9%_\\.-]+)/i)[0];\n\t\t\treturn decodeURIComponent(data_src).split('\"')[1];\n\t\t}\n\t}\n\n\tvar twitterFetcher = {\n\t\tfetch: function(fetchConfig) {\n\t\t\thandlerConfig = fetchConfig;\n\n\t\t\tif (handlerConfig.startAt === undefined) handlerConfig.startAt = 0;\n\t\t\tif (handlerConfig.maxTweets === undefined) handlerConfig.maxTweets = 5;\n\t\t\tif (handlerConfig.enableLinks === undefined) handlerConfig.enableLinks = true;\n\t\t\tif (handlerConfig.showUser === undefined) handlerConfig.showUser = true;\n\t\t\tif (handlerConfig.showTime === undefined) handlerConfig.showTime = true;\n\t\t\tif (handlerConfig.dateFunction === undefined) handlerConfig.dateFunction = 'default';\n\t\t\tif (handlerConfig.showRetweet === undefined) handlerConfig.showRetweet = true;\n\t\t\tif (handlerConfig.showFollow === undefined) handlerConfig.showFollow = true;\n\t\t\tif (handlerConfig.customCallback === undefined) handlerConfig.customCallback = null;\n\t\t\tif (handlerConfig.showInteraction === undefined) handlerConfig.showInteraction = true;\n\t\t\tif (handlerConfig.showImages === undefined) handlerConfig.showImages = false;\n\t\t\tif (handlerConfig.linksInNewWindow === undefined) handlerConfig.linksInNewWindow = true;\n\n\t\t\tfunction setup() {\n\t\t\t\tinProgress = true;\n\n\t\t\t\tdomNode = handlerConfig.domId;\n\t\t\t\tstartAt = handlerConfig.startAt;\n\t\t\t\tmaxTweets = handlerConfig.maxTweets + handlerConfig.startAt;\n\t\t\t\tparseLinks = handlerConfig.enableLinks;\n\t\t\t\tprintUser = handlerConfig.showUser;\n\t\t\t\tprintTime = handlerConfig.showTime;\n\t\t\t\tshowRts = handlerConfig.showRetweet;\n\t\t\t\tshowFlw = handlerConfig.showFollow;\n\t\t\t\tformatterFunction = handlerConfig.dateFunction;\n\t\t\t\tcustomCallbackFunction = handlerConfig.customCallback;\n\t\t\t\tshowInteractionLinks = handlerConfig.showInteraction;\n\t\t\t\tshowImages = handlerConfig.showImages;\n\t\t\t\ttargetBlank = handlerConfig.linksInNewWindow;\n\n\t\t\t\tvar script = document.createElement('script');\n\t\t\t\tscript.type = 'text/javascript';\n\t\t\t\tscript.src = '//cdn.syndication.twimg.com/widgets/timelines/' +\n\t\t\t\t\t\thandlerConfig.widgetId + '?&lang=' + (handlerConfig.lang || lang) + '&callback=twitterFetcher.callback&' +\n\t\t\t\t\t\t'suppress_response_codes=true&rnd=' + Math.random();\n\t\t\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t\t\t}\n\n\t\t\tif ( inProgress ) { queue.push(handlerConfig); } else { setup(); }\n\t\t},\n\n\n\t\t// Custom Tweet handler function\n\n\t\thandler: function(tweets) {\n\t\t\t// console.log(handlerConfig, tweets);\n\n\t\t\tvar x = tweets.length;\n\t\t\tvar n = 0;\n\t\t\tvar element = $(\"#\" + domNode);\n\n\t\t\tvar html = '<div class=\"twitter-user\"></div>';\n\t\t\t\thtml += '<div class=\"content\">';\n\t\t\t\twhile(n < x) {\n\t\t\t\t\thtml += '<hr>';\n\t\t\t\t\thtml += '<div class=\"tweet-item\">' + tweets[n] + '</div>';\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t\thtml += '</div>';\n\t\t\t\thtml += '<div class=\"button primary input-medium twitter-follow\">Follow</div>';\n\n\t\t\telement.html(html);\n\n\t\t\tif ( showRts ) {\n\t\t\t\tvar userMulti = element.find(\".user\");\n\n\t\t\t\tuserMulti.each(function() {\n\t\t\t\t\t$(this).find(\"img\").attr(\"class\", \"box-logo\");\n\t\t\t\t\t$(this).find(\"span\").eq(0).replaceWith(function() { return $(this).html(); });\n\t\t\t\t\t$(this).find(\"span\").eq(1).attr(\"class\", \"handle\");\n\t\t\t\t\t$(this).find(\"a\").attr('target', '_blank').addClass(\"no-icon\").addClass(\"valign-middle\");\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\telement.addClass(\"twitter-main\");\n\n\t\t\t\telement.find(\".twitter-user\").append(\"<h4 class='user'>\" + element.find(\".user:first-child\").html() + \"</h4>\");\n\t\t\t\tvar userSingle = element.find(\".twitter-user .user\");\n\n\t\t\t\tuserSingle.find(\"img\").attr(\"class\", \"box-logo\");\n\t\t\t\tuserSingle.find(\"span\").eq(0).replaceWith(function() { return $(this).html(); });\n\t\t\t\tuserSingle.find(\"span\").eq(1).attr(\"class\", \"handle\");\n\t\t\t\tuserSingle.find(\"a\").attr('target', '_blank').addClass(\"no-icon\");\n\n\t\t\t\tif ( showFlw ) element.find(\".twitter-follow\").show();\n\t\t\t}\n\n\t\t\telement.find(\".button\").on(\"click\", function() {\n\t\t\t\tpopupWindow('https://twitter.com/intent/user?screen_name=' + user.find('span').eq(1).html().substr(1), 'Twitter Follow', 640, 600);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t},\n\n\t\t// Custom function End\n\n\n\t\tcallback: function(data) {\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.innerHTML = data.body;\n\t\t\tif (typeof(div.getElementsByClassName) === 'undefined') {\n\t\t\t\t supportsClassName = false;\n\t\t\t}\n\n\t\t\tvar tweets = [];\n\t\t\tvar authors = [];\n\t\t\tvar times = [];\n\t\t\tvar images = [];\n\t\t\tvar rts = [];\n\t\t\tvar tids = [];\n\t\t\tvar z = 0;\n\n\t\t\tif (supportsClassName) {\n\t\t\t\tvar tmpClass = div.getElementsByClassName('tweet');\n\t\t\t\twhile (z < tmpClass.length) {\n\t\t\t\t\tif (tmpClass[z].getElementsByClassName('retweet-credit').length > 0) {\n\t\t\t\t\t\trts.push(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trts.push(false);\n\t\t\t\t\t}\n\t\t\t\t\tif (!rts[z] || rts[z] && showRts) {\n\t\t\t\t\t\ttweets.push(tmpClass[z].getElementsByClassName('e-entry-title')[0]);\n\t\t\t\t\t\ttids.push(tmpClass[z].getAttribute('data-tweet-id'));\n\t\t\t\t\t\tauthors.push(tmpClass[z].getElementsByClassName('p-author')[0]);\n\t\t\t\t\t\ttimes.push(tmpClass[z].getElementsByClassName('dt-updated')[0]);\n\t\t\t\t\t\tif (tmpClass[z].getElementsByClassName('inline-media')[0] !== undefined) {\n\t\t\t\t\t\t\timages.push(tmpClass[z].getElementsByClassName('inline-media')[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\timages.push(undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tz++;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar tmpNoClass = getElementsByClassName(div, 'tweet');\n\t\t\t\twhile (z < tmpNoClass.length) {\n\t\t\t\t\ttweets.push(getElementsByClassName(tmpNoClass[z], 'e-entry-title')[0]);\n\t\t\t\t\ttids.push(tmpNoClass[z].getAttribute('data-tweet-id'));\n\t\t\t\t\tauthors.push(getElementsByClassName(tmpNoClass[z], 'p-author')[0]);\n\t\t\t\t\ttimes.push(getElementsByClassName(tmpNoClass[z], 'dt-updated')[0]);\n\t\t\t\t\tif (getElementsByClassName(tmpNoClass[z], 'inline-media')[0] !== undefined) {\n\t\t\t\t\t\timages.push(getElementsByClassName(tmpNoClass[z], 'inline-media')[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\timages.push(undefined);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (getElementsByClassName(tmpNoClass[z], 'retweet-credit').length > 0) {\n\t\t\t\t\t\trts.push(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trts.push(false);\n\t\t\t\t\t}\n\t\t\t\t\tz++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (tweets.length > maxTweets) {\n\t\t\t\ttweets.splice(maxTweets, (tweets.length - maxTweets));\n\t\t\t\tauthors.splice(maxTweets, (authors.length - maxTweets));\n\t\t\t\ttimes.splice(maxTweets, (times.length - maxTweets));\n\t\t\t\trts.splice(maxTweets, (rts.length - maxTweets));\n\t\t\t\timages.splice(maxTweets, (images.length - maxTweets));\n\t\t\t}\n\n\t\t\tvar arrayTweets = [];\n\t\t\tvar x = tweets.length;\n\t\t\tvar n = startAt;\n\t\t\twhile(n < x) {\n\t\t\t\tif (typeof(formatterFunction) !== 'string') {\n\t\t\t\t\tvar datetimeText = times[n].getAttribute('datetime');\n\t\t\t\t\tvar newDate = new Date(times[n].getAttribute('datetime')\n\t\t\t\t\t\t\t.replace(/-/g,'/').replace('T', ' ').split('+')[0]);\n\t\t\t\t\tvar dateString = formatterFunction(newDate, datetimeText);\n\t\t\t\t\ttimes[n].setAttribute('aria-label', dateString);\n\n\t\t\t\t\tif (tweets[n].innerText) {\n\t\t\t\t\t\t// IE hack.\n\t\t\t\t\t\tif (supportsClassName) {\n\t\t\t\t\t\t\ttimes[n].innerText = dateString;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar h = document.createElement('p');\n\t\t\t\t\t\t\tvar t = document.createTextNode(dateString);\n\t\t\t\t\t\t\th.appendChild(t);\n\t\t\t\t\t\t\th.setAttribute('aria-label', dateString);\n\t\t\t\t\t\t\ttimes[n] = h;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimes[n].textContent = dateString;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar op = '';\n\t\t\t\tif (parseLinks) {\n\t\t\t\t\tif (targetBlank) {\n\t\t\t\t\t\ttargetLinksToNewWindow(tweets[n]);\n\t\t\t\t\t\tif (printUser) {\n\t\t\t\t\t\t\ttargetLinksToNewWindow(authors[n]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (printUser) {\n\t\t\t\t\t\top += '<div class=\"user\">' + strip(authors[n].innerHTML) +\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t}\n\t\t\t\t\top += '<p class=\"tweet\">' + strip(tweets[n].innerHTML) + '</p>';\n\t\t\t\t\tif (printTime) {\n\t\t\t\t\t\top += '<p class=\"timePosted\">' +\n\t\t\t\t\t\t\t\ttimes[n].getAttribute('aria-label') + '</p>';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (tweets[n].innerText) {\n\t\t\t\t\t\tif (printUser) {\n\t\t\t\t\t\t\top += '<p class=\"user\">' + authors[n].innerText + '</p>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\top += '<p class=\"tweet\">' +  tweets[n].innerText + '</p>';\n\t\t\t\t\t\tif (printTime) {\n\t\t\t\t\t\t\top += '<p class=\"timePosted\">' + times[n].innerText + '</p>';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (printUser) {\n\t\t\t\t\t\t\top += '<p class=\"user\">' + authors[n].textContent + '</p>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\top += '<p class=\"tweet\">' +  tweets[n].textContent + '</p>';\n\t\t\t\t\t\tif (printTime) {\n\t\t\t\t\t\t\top += '<p class=\"timePosted\">' + times[n].textContent + '</p>';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (showInteractionLinks) {\n\t\t\t\t\top += '<p class=\"interact\"><a href=\"https://twitter.com/intent/' +\n\t\t\t\t\t\t\t'tweet?in_reply_to=' + tids[n] + '\" class=\"twitter_reply_icon\"' + (targetBlank ? ' target=\"_blank\">' : '>') +\n\t\t\t\t\t\t\t'Reply</a><a href=\"https://twitter.com/intent/retweet?tweet_id=' +\n\t\t\t\t\t\t\ttids[n] + '\" class=\"twitter_retweet_icon\"' + (targetBlank ? ' target=\"_blank\">' : '>') + 'Retweet</a>' +\n\t\t\t\t\t\t\t'<a href=\"https://twitter.com/intent/favorite?tweet_id=' +\n\t\t\t\t\t\t\ttids[n] + '\" class=\"twitter_fav_icon\"' + (targetBlank ? ' target=\"_blank\">' : '>') + 'Favorite</a></p>';\n\t\t\t\t}\n\n\t\t\t\tif (showImages && images[n] !== undefined) {\n\t\t\t\t\top += '<div class=\"media\">' +\n\t\t\t\t\t\t\t'<img src=\"' + extractImageUrl(images[n]) + '\" alt=\"Image from tweet\" />' +\n\t\t\t\t\t\t\t'</div>';\n\t\t\t\t}\n\n\t\t\t\tarrayTweets.push(op);\n\t\t\t\tn++;\n\t\t\t}\n\n\t\t\t// handleTweets(arrayTweets);\n\t\t\ttwitterFetcher.handler(arrayTweets);\n\t\t\tinProgress = false;\n\n\t\t\tif (queue.length > 0) {\n\t\t\t\ttwitterFetcher.fetch(queue[0]);\n\t\t\t\tqueue.splice(0,1);\n\t\t\t}\n\t\t}\n\t};\n\n\t// It must be a global variable because it will be called by JSONP.\n\twindow.twitterFetcher = twitterFetcher;\n\n\treturn twitterFetcher;\n}));\n\n\n/*\n* ### HOW TO CREATE A VALID ID TO USE: ###\n* Go to www.twitter.com and sign in as normal, go to your settings page.\n* Go to \"Widgets\" on the left hand side.\n* Create a new widget for what you need eg \"user time line\" or \"search\" etc.\n* Feel free to check \"exclude replies\" if you don't want replies in results.\n* Now go back to settings page, and then go back to widgets page, you should\n* see the widget you just created. Click edit.\n* Now look at the URL in your web browser, you will see a long number like this:\n* 345735908357048478\n* Use this as your ID on config.js instead!\n*/\n\nvar twitterConfig;\n\nfunction initTwitter() {\n\tif ( $(\"[data-twitter]\").length ) {\n\t\t$(\"[data-twitter]\").each(function(i) {\n\t\t\tvar el = $(this),\n\t\t\t\tdomId = el.attr(\"id\"),\n\t\t\t\twidgetId = el.data(\"widget-id\"),\n\t\t\t\tstartAt = el.data(\"start-at\")\n\t\t\t\tmaxTweets = el.data(\"max-tweets\");\n\n\t\t\tif ( typeof domId === \"undefined\" ) {\n\t\t\t\tel.attr(\"id\", \"widget-twitter-\" + i);\n\n\t\t\t\ttwitterConfig = {\n\t\t\t\t\tdomId: el.attr(\"id\"),\n\t\t\t\t\twidgetId: typeof widgetId !== \"undefined\" ? widgetId : config.twitter.widgetId,\n\t\t\t\t\tstartAt: typeof startAt !== \"undefined\" ? startAt : (config.twitter.startAt + config.twitter.maxTweets) * i,\n\t\t\t\t\tmaxTweets: typeof maxTweets !== \"undefined\" ? maxTweets : config.twitter.maxTweets,\n\t\t\t\t\tenableLinks: config.twitter.enableLinks,\n\t\t\t\t\tshowUser: config.twitter.showUser,\n\t\t\t\t\tshowTime: config.twitter.showTime,\n\t\t\t\t\tshowRetweet: config.twitter.showRetweet,\n\t\t\t\t\tshowFollow: config.twitter.showFollow,\n\t\t\t\t\tshowInteraction: config.twitter.showInteraction\n\t\t\t\t};\n\n\t\t\t\ttwitterFetcher.fetch(twitterConfig);\n\t\t\t}\n\t\t});\n\n\t\tif ( config.application.debug ) console.log(\"Widget :: Twitter\");\n\t}\n\n\t// Example config and call\n\n\t// var twitterConfig1 = {\n\t// \tdomId: \"twitter-1\",\n\t// \twidgetId: \"572802782449909760\",\n\t// \tstartAt: 2,\n\t// \tmaxTweets: 2,\n\t// \tenableLinks: config.twitter.enableLinks,\n\t// \tshowUser: config.twitter.showUser,\n\t// \tshowTime: config.twitter.showTime,\n\t// \tshowRetweet: true,\n\t// \tshowFollow: config.twitter.showFollow,\n\t// \tshowInteraction: config.twitter.showInteraction\n\t// };\n\n\t// twitterFetcher.fetch(twitterConfig1);\n}","/*!\n * Modernizr v2.8.3\n * www.modernizr.com\n *\n * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton\n * Available under the BSD and MIT licenses: www.modernizr.com/license/\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in\n * the current UA and makes the results available to you in two ways:\n * as properties on a global Modernizr object, and as classes on the\n * <html> element. This information allows you to progressively enhance\n * your pages with a granular level of control over the experience.\n *\n * Modernizr has an optional (not included) conditional resource loader\n * called Modernizr.load(), based on Yepnope.js (yepnopejs.com).\n * To get a build that includes Modernizr.load(), as well as choosing\n * which tests to include, go to www.modernizr.com/download/\n *\n * Authors        Faruk Ates, Paul Irish, Alex Sexton\n * Contributors   Ryan Seddon, Ben Alman\n */\n\nwindow.Modernizr = (function( window, document, undefined ) {\n\n    var version = '2.8.3',\n\n    Modernizr = {},\n\n    /*>>cssclasses*/\n    // option for enabling the HTML classes to be added\n    enableClasses = true,\n    /*>>cssclasses*/\n\n    docElement = document.documentElement,\n\n    /**\n     * Create our \"modernizr\" element that we do most feature tests on.\n     */\n    mod = 'modernizr',\n    modElem = document.createElement(mod),\n    mStyle = modElem.style,\n\n    /**\n     * Create the input element for various Web Forms feature tests.\n     */\n    inputElem /*>>inputelem*/ = document.createElement('input') /*>>inputelem*/ ,\n\n    /*>>smile*/\n    smile = ':)',\n    /*>>smile*/\n\n    toString = {}.toString,\n\n    // TODO :: make the prefixes more granular\n    /*>>prefixes*/\n    // List of property values to set for css tests. See ticket #21\n    prefixes = ' -webkit- -moz- -o- -ms- '.split(' '),\n    /*>>prefixes*/\n\n    /*>>domprefixes*/\n    // Following spec is to expose vendor-specific style properties as:\n    //   elem.style.WebkitBorderRadius\n    // and the following would be incorrect:\n    //   elem.style.webkitBorderRadius\n\n    // Webkit ghosts their properties in lowercase but Opera & Moz do not.\n    // Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n    //   erik.eae.net/archives/2008/03/10/21.48.10/\n\n    // More here: github.com/Modernizr/Modernizr/issues/issue/21\n    omPrefixes = 'Webkit Moz O ms',\n\n    cssomPrefixes = omPrefixes.split(' '),\n\n    domPrefixes = omPrefixes.toLowerCase().split(' '),\n    /*>>domprefixes*/\n\n    /*>>ns*/\n    ns = {'svg': 'http://www.w3.org/2000/svg'},\n    /*>>ns*/\n\n    tests = {},\n    inputs = {},\n    attrs = {},\n\n    classes = [],\n\n    slice = classes.slice,\n\n    featureName, // used in testing loop\n\n\n    /*>>teststyles*/\n    // Inject element with style element and some CSS rules\n    injectElementWithStyles = function( rule, callback, nodes, testnames ) {\n\n      var style, ret, node, docOverflow,\n          div = document.createElement('div'),\n          // After page load injecting a fake body doesn't work so check if body exists\n          body = document.body,\n          // IE6 and 7 won't return offsetWidth or offsetHeight unless it's in the body element, so we fake it.\n          fakeBody = body || document.createElement('body');\n\n      if ( parseInt(nodes, 10) ) {\n          // In order not to give false positives we create a node for each test\n          // This also allows the method to scale for unspecified uses\n          while ( nodes-- ) {\n              node = document.createElement('div');\n              node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n              div.appendChild(node);\n          }\n      }\n\n      // <style> elements in IE6-9 are considered 'NoScope' elements and therefore will be removed\n      // when injected with innerHTML. To get around this you need to prepend the 'NoScope' element\n      // with a 'scoped' element, in our case the soft-hyphen entity as it won't mess with our measurements.\n      // msdn.microsoft.com/en-us/library/ms533897%28VS.85%29.aspx\n      // Documents served as xml will throw if using &shy; so use xml friendly encoded version. See issue #277\n      style = ['&#173;','<style id=\"s', mod, '\">', rule, '</style>'].join('');\n      div.id = mod;\n      // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n      // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n      (body ? div : fakeBody).innerHTML += style;\n      fakeBody.appendChild(div);\n      if ( !body ) {\n          //avoid crashing IE8, if background image is used\n          fakeBody.style.background = '';\n          //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n          fakeBody.style.overflow = 'hidden';\n          docOverflow = docElement.style.overflow;\n          docElement.style.overflow = 'hidden';\n          docElement.appendChild(fakeBody);\n      }\n\n      ret = callback(div, rule);\n      // If this is done after page load we don't want to remove the body so check if body exists\n      if ( !body ) {\n          fakeBody.parentNode.removeChild(fakeBody);\n          docElement.style.overflow = docOverflow;\n      } else {\n          div.parentNode.removeChild(div);\n      }\n\n      return !!ret;\n\n    },\n    /*>>teststyles*/\n\n    /*>>mq*/\n    // adapted from matchMedia polyfill\n    // by Scott Jehl and Paul Irish\n    // gist.github.com/786768\n    testMediaQuery = function( mq ) {\n\n      var matchMedia = window.matchMedia || window.msMatchMedia;\n      if ( matchMedia ) {\n        return matchMedia(mq) && matchMedia(mq).matches || false;\n      }\n\n      var bool;\n\n      injectElementWithStyles('@media ' + mq + ' { #' + mod + ' { position: absolute; } }', function( node ) {\n        bool = (window.getComputedStyle ?\n                  getComputedStyle(node, null) :\n                  node.currentStyle)['position'] == 'absolute';\n      });\n\n      return bool;\n\n     },\n     /*>>mq*/\n\n\n    /*>>hasevent*/\n    //\n    // isEventSupported determines if a given element supports the given event\n    // kangax.github.com/iseventsupported/\n    //\n    // The following results are known incorrects:\n    //   Modernizr.hasEvent(\"webkitTransitionEnd\", elem) // false negative\n    //   Modernizr.hasEvent(\"textInput\") // in Webkit. github.com/Modernizr/Modernizr/issues/333\n    //   ...\n    isEventSupported = (function() {\n\n      var TAGNAMES = {\n        'select': 'input', 'change': 'input',\n        'submit': 'form', 'reset': 'form',\n        'error': 'img', 'load': 'img', 'abort': 'img'\n      };\n\n      function isEventSupported( eventName, element ) {\n\n        element = element || document.createElement(TAGNAMES[eventName] || 'div');\n        eventName = 'on' + eventName;\n\n        // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and \"resize\", whereas `in` \"catches\" those\n        var isSupported = eventName in element;\n\n        if ( !isSupported ) {\n          // If it has no `setAttribute` (i.e. doesn't implement Node interface), try generic element\n          if ( !element.setAttribute ) {\n            element = document.createElement('div');\n          }\n          if ( element.setAttribute && element.removeAttribute ) {\n            element.setAttribute(eventName, '');\n            isSupported = is(element[eventName], 'function');\n\n            // If property was created, \"remove it\" (by setting value to `undefined`)\n            if ( !is(element[eventName], 'undefined') ) {\n              element[eventName] = undefined;\n            }\n            element.removeAttribute(eventName);\n          }\n        }\n\n        element = null;\n        return isSupported;\n      }\n      return isEventSupported;\n    })(),\n    /*>>hasevent*/\n\n    // TODO :: Add flag for hasownprop ? didn't last time\n\n    // hasOwnProperty shim by kangax needed for Safari 2.0 support\n    _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;\n\n    if ( !is(_hasOwnProperty, 'undefined') && !is(_hasOwnProperty.call, 'undefined') ) {\n      hasOwnProp = function (object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    }\n    else {\n      hasOwnProp = function (object, property) { /* yes, this can give false positives/negatives, but most of the time we don't care about those */\n        return ((property in object) && is(object.constructor.prototype[property], 'undefined'));\n      };\n    }\n\n    // Adapted from ES5-shim https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js\n    // es5.github.com/#x15.3.4.5\n\n    if (!Function.prototype.bind) {\n      Function.prototype.bind = function bind(that) {\n\n        var target = this;\n\n        if (typeof target != \"function\") {\n            throw new TypeError();\n        }\n\n        var args = slice.call(arguments, 1),\n            bound = function () {\n\n            if (this instanceof bound) {\n\n              var F = function(){};\n              F.prototype = target.prototype;\n              var self = new F();\n\n              var result = target.apply(\n                  self,\n                  args.concat(slice.call(arguments))\n              );\n              if (Object(result) === result) {\n                  return result;\n              }\n              return self;\n\n            } else {\n\n              return target.apply(\n                  that,\n                  args.concat(slice.call(arguments))\n              );\n\n            }\n\n        };\n\n        return bound;\n      };\n    }\n\n    /**\n     * setCss applies given styles to the Modernizr DOM node.\n     */\n    function setCss( str ) {\n        mStyle.cssText = str;\n    }\n\n    /**\n     * setCssAll extrapolates all vendor-specific css strings.\n     */\n    function setCssAll( str1, str2 ) {\n        return setCss(prefixes.join(str1 + ';') + ( str2 || '' ));\n    }\n\n    /**\n     * is returns a boolean for if typeof obj is exactly type.\n     */\n    function is( obj, type ) {\n        return typeof obj === type;\n    }\n\n    /**\n     * contains returns a boolean for if substr is found within str.\n     */\n    function contains( str, substr ) {\n        return !!~('' + str).indexOf(substr);\n    }\n\n    /*>>testprop*/\n\n    // testProps is a generic CSS / DOM property test.\n\n    // In testing support for a given CSS property, it's legit to test:\n    //    `elem.style[styleName] !== undefined`\n    // If the property is supported it will return an empty string,\n    // if unsupported it will return undefined.\n\n    // We'll take advantage of this quick test and skip setting a style\n    // on our modernizr element, but instead just testing undefined vs\n    // empty string.\n\n    // Because the testing of the CSS property names (with \"-\", as\n    // opposed to the camelCase DOM properties) is non-portable and\n    // non-standard but works in WebKit and IE (but not Gecko or Opera),\n    // we explicitly reject properties with dashes so that authors\n    // developing in WebKit or IE first don't end up with\n    // browser-specific content by accident.\n\n    function testProps( props, prefixed ) {\n        for ( var i in props ) {\n            var prop = props[i];\n            if ( !contains(prop, \"-\") && mStyle[prop] !== undefined ) {\n                return prefixed == 'pfx' ? prop : true;\n            }\n        }\n        return false;\n    }\n    /*>>testprop*/\n\n    // TODO :: add testDOMProps\n    /**\n     * testDOMProps is a generic DOM property test; if a browser supports\n     *   a certain property, it won't return undefined for it.\n     */\n    function testDOMProps( props, obj, elem ) {\n        for ( var i in props ) {\n            var item = obj[props[i]];\n            if ( item !== undefined) {\n\n                // return the property name as a string\n                if (elem === false) return props[i];\n\n                // let's bind a function\n                if (is(item, 'function')){\n                  // default to autobind unless override\n                  return item.bind(elem || obj);\n                }\n\n                // return the unbound function or obj or value\n                return item;\n            }\n        }\n        return false;\n    }\n\n    /*>>testallprops*/\n    /**\n     * testPropsAll tests a list of DOM properties we want to check against.\n     *   We specify literally ALL possible (known and/or likely) properties on\n     *   the element including the non-vendor prefixed one, for forward-\n     *   compatibility.\n     */\n    function testPropsAll( prop, prefixed, elem ) {\n\n        var ucProp  = prop.charAt(0).toUpperCase() + prop.slice(1),\n            props   = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n        // did they call .prefixed('boxSizing') or are we just testing a prop?\n        if(is(prefixed, \"string\") || is(prefixed, \"undefined\")) {\n          return testProps(props, prefixed);\n\n        // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n        } else {\n          props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n          return testDOMProps(props, prefixed, elem);\n        }\n    }\n    /*>>testallprops*/\n\n\n    /**\n     * Tests\n     * -----\n     */\n\n    // The *new* flexbox\n    // dev.w3.org/csswg/css3-flexbox\n\n    tests['flexbox'] = function() {\n      return testPropsAll('flexWrap');\n    };\n\n    // The *old* flexbox\n    // www.w3.org/TR/2009/WD-css3-flexbox-20090723/\n\n    tests['flexboxlegacy'] = function() {\n        return testPropsAll('boxDirection');\n    };\n\n    // On the S60 and BB Storm, getContext exists, but always returns undefined\n    // so we actually have to call getContext() to verify\n    // github.com/Modernizr/Modernizr/issues/issue/97/\n\n    tests['canvas'] = function() {\n        var elem = document.createElement('canvas');\n        return !!(elem.getContext && elem.getContext('2d'));\n    };\n\n    tests['canvastext'] = function() {\n        return !!(Modernizr['canvas'] && is(document.createElement('canvas').getContext('2d').fillText, 'function'));\n    };\n\n    // webk.it/70117 is tracking a legit WebGL feature detect proposal\n\n    // We do a soft detect which may false positive in order to avoid\n    // an expensive context creation: bugzil.la/732441\n\n    tests['webgl'] = function() {\n        return !!window.WebGLRenderingContext;\n    };\n\n    /*\n     * The Modernizr.touch test only indicates if the browser supports\n     *    touch events, which does not necessarily reflect a touchscreen\n     *    device, as evidenced by tablets running Windows 7 or, alas,\n     *    the Palm Pre / WebOS (touch) phones.\n     *\n     * Additionally, Chrome (desktop) used to lie about its support on this,\n     *    but that has since been rectified: crbug.com/36415\n     *\n     * We also test for Firefox 4 Multitouch Support.\n     *\n     * For more info, see: modernizr.github.com/Modernizr/touch.html\n     */\n\n    tests['touch'] = function() {\n        var bool;\n\n        if(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n          bool = true;\n        } else {\n          injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''), function( node ) {\n            bool = node.offsetTop === 9;\n          });\n        }\n\n        return bool;\n    };\n\n\n    // geolocation is often considered a trivial feature detect...\n    // Turns out, it's quite tricky to get right:\n    //\n    // Using !!navigator.geolocation does two things we don't want. It:\n    //   1. Leaks memory in IE9: github.com/Modernizr/Modernizr/issues/513\n    //   2. Disables page caching in WebKit: webk.it/43956\n    //\n    // Meanwhile, in Firefox < 8, an about:config setting could expose\n    // a false positive that would throw an exception: bugzil.la/688158\n\n    tests['geolocation'] = function() {\n        return 'geolocation' in navigator;\n    };\n\n\n    tests['postmessage'] = function() {\n      return !!window.postMessage;\n    };\n\n\n    // Chrome incognito mode used to throw an exception when using openDatabase\n    // It doesn't anymore.\n    tests['websqldatabase'] = function() {\n      return !!window.openDatabase;\n    };\n\n    // Vendors had inconsistent prefixing with the experimental Indexed DB:\n    // - Webkit's implementation is accessible through webkitIndexedDB\n    // - Firefox shipped moz_indexedDB before FF4b9, but since then has been mozIndexedDB\n    // For speed, we don't test the legacy (and beta-only) indexedDB\n    tests['indexedDB'] = function() {\n      return !!testPropsAll(\"indexedDB\", window);\n    };\n\n    // documentMode logic from YUI to filter out IE8 Compat Mode\n    //   which false positives.\n    tests['hashchange'] = function() {\n      return isEventSupported('hashchange', window) && (document.documentMode === undefined || document.documentMode > 7);\n    };\n\n    // Per 1.6:\n    // This used to be Modernizr.historymanagement but the longer\n    // name has been deprecated in favor of a shorter and property-matching one.\n    // The old API is still available in 1.6, but as of 2.0 will throw a warning,\n    // and in the first release thereafter disappear entirely.\n    tests['history'] = function() {\n      return !!(window.history && history.pushState);\n    };\n\n    tests['draganddrop'] = function() {\n        var div = document.createElement('div');\n        return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n    };\n\n    // FF3.6 was EOL'ed on 4/24/12, but the ESR version of FF10\n    // will be supported until FF19 (2/12/13), at which time, ESR becomes FF17.\n    // FF10 still uses prefixes, so check for it until then.\n    // for more ESR info, see: mozilla.org/en-US/firefox/organizations/faq/\n    tests['websockets'] = function() {\n        return 'WebSocket' in window || 'MozWebSocket' in window;\n    };\n\n\n    // css-tricks.com/rgba-browser-support/\n    tests['rgba'] = function() {\n        // Set an rgba() color and check the returned value\n\n        setCss('background-color:rgba(150,255,150,.5)');\n\n        return contains(mStyle.backgroundColor, 'rgba');\n    };\n\n    tests['hsla'] = function() {\n        // Same as rgba(), in fact, browsers re-map hsla() to rgba() internally,\n        //   except IE9 who retains it as hsla\n\n        setCss('background-color:hsla(120,40%,100%,.5)');\n\n        return contains(mStyle.backgroundColor, 'rgba') || contains(mStyle.backgroundColor, 'hsla');\n    };\n\n    tests['multiplebgs'] = function() {\n        // Setting multiple images AND a color on the background shorthand property\n        //  and then querying the style.background property value for the number of\n        //  occurrences of \"url(\" is a reliable method for detecting ACTUAL support for this!\n\n        setCss('background:url(https://),url(https://),red url(https://)');\n\n        // If the UA supports multiple backgrounds, there should be three occurrences\n        //   of the string \"url(\" in the return value for elemStyle.background\n\n        return (/(url\\s*\\(.*?){3}/).test(mStyle.background);\n    };\n\n\n\n    // this will false positive in Opera Mini\n    //   github.com/Modernizr/Modernizr/issues/396\n\n    tests['backgroundsize'] = function() {\n        return testPropsAll('backgroundSize');\n    };\n\n    tests['borderimage'] = function() {\n        return testPropsAll('borderImage');\n    };\n\n\n    // Super comprehensive table about all the unique implementations of\n    // border-radius: muddledramblings.com/table-of-css3-border-radius-compliance\n\n    tests['borderradius'] = function() {\n        return testPropsAll('borderRadius');\n    };\n\n    // WebOS unfortunately false positives on this test.\n    tests['boxshadow'] = function() {\n        return testPropsAll('boxShadow');\n    };\n\n    // FF3.0 will false positive on this test\n    tests['textshadow'] = function() {\n        return document.createElement('div').style.textShadow === '';\n    };\n\n\n    tests['opacity'] = function() {\n        // Browsers that actually have CSS Opacity implemented have done so\n        //  according to spec, which means their return values are within the\n        //  range of [0.0,1.0] - including the leading zero.\n\n        setCssAll('opacity:.55');\n\n        // The non-literal . in this regex is intentional:\n        //   German Chrome returns this value as 0,55\n        // github.com/Modernizr/Modernizr/issues/#issue/59/comment/516632\n        return (/^0.55$/).test(mStyle.opacity);\n    };\n\n\n    // Note, Android < 4 will pass this test, but can only animate\n    //   a single property at a time\n    //   goo.gl/v3V4Gp\n    tests['cssanimations'] = function() {\n        return testPropsAll('animationName');\n    };\n\n\n    tests['csscolumns'] = function() {\n        return testPropsAll('columnCount');\n    };\n\n\n    tests['cssgradients'] = function() {\n        /**\n         * For CSS Gradients syntax, please see:\n         * webkit.org/blog/175/introducing-css-gradients/\n         * developer.mozilla.org/en/CSS/-moz-linear-gradient\n         * developer.mozilla.org/en/CSS/-moz-radial-gradient\n         * dev.w3.org/csswg/css3-images/#gradients-\n         */\n\n        var str1 = 'background-image:',\n            str2 = 'gradient(linear,left top,right bottom,from(#9f9),to(white));',\n            str3 = 'linear-gradient(left top,#9f9, white);';\n\n        setCss(\n             // legacy webkit syntax (FIXME: remove when syntax not in use anymore)\n              (str1 + '-webkit- '.split(' ').join(str2 + str1) +\n             // standard syntax             // trailing 'background-image:'\n              prefixes.join(str3 + str1)).slice(0, -str1.length)\n        );\n\n        return contains(mStyle.backgroundImage, 'gradient');\n    };\n\n\n    tests['cssreflections'] = function() {\n        return testPropsAll('boxReflect');\n    };\n\n\n    tests['csstransforms'] = function() {\n        return !!testPropsAll('transform');\n    };\n\n\n    tests['csstransforms3d'] = function() {\n\n        var ret = !!testPropsAll('perspective');\n\n        // Webkit's 3D transforms are passed off to the browser's own graphics renderer.\n        //   It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in\n        //   some conditions. As a result, Webkit typically recognizes the syntax but\n        //   will sometimes throw a false positive, thus we must do a more thorough check:\n        if ( ret && 'webkitPerspective' in docElement.style ) {\n\n          // Webkit allows this media query to succeed only if the feature is enabled.\n          // `@media (transform-3d),(-webkit-transform-3d){ ... }`\n          injectElementWithStyles('@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}', function( node, rule ) {\n            ret = node.offsetLeft === 9 && node.offsetHeight === 3;\n          });\n        }\n        return ret;\n    };\n\n\n    tests['csstransitions'] = function() {\n        return testPropsAll('transition');\n    };\n\n\n    /*>>fontface*/\n    // @font-face detection routine by Diego Perini\n    // javascript.nwbox.com/CSSSupport/\n\n    // false positives:\n    //   WebOS github.com/Modernizr/Modernizr/issues/342\n    //   WP7   github.com/Modernizr/Modernizr/issues/538\n    tests['fontface'] = function() {\n        var bool;\n\n        injectElementWithStyles('@font-face {font-family:\"font\";src:url(\"https://\")}', function( node, rule ) {\n          var style = document.getElementById('smodernizr'),\n              sheet = style.sheet || style.styleSheet,\n              cssText = sheet ? (sheet.cssRules && sheet.cssRules[0] ? sheet.cssRules[0].cssText : sheet.cssText || '') : '';\n\n          bool = /src/i.test(cssText) && cssText.indexOf(rule.split(' ')[0]) === 0;\n        });\n\n        return bool;\n    };\n    /*>>fontface*/\n\n    // CSS generated content detection\n    tests['generatedcontent'] = function() {\n        var bool;\n\n        injectElementWithStyles(['#',mod,'{font:0/0 a}#',mod,':after{content:\"',smile,'\";visibility:hidden;font:3px/1 a}'].join(''), function( node ) {\n          bool = node.offsetHeight >= 3;\n        });\n\n        return bool;\n    };\n\n\n\n    // These tests evaluate support of the video/audio elements, as well as\n    // testing what types of content they support.\n    //\n    // We're using the Boolean constructor here, so that we can extend the value\n    // e.g.  Modernizr.video     // true\n    //       Modernizr.video.ogg // 'probably'\n    //\n    // Codec values from : github.com/NielsLeenheer/html5test/blob/9106a8/index.html#L845\n    //                     thx to NielsLeenheer and zcorpan\n\n    // Note: in some older browsers, \"no\" was a return value instead of empty string.\n    //   It was live in FF3.5.0 and 3.5.1, but fixed in 3.5.2\n    //   It was also live in Safari 4.0.0 - 4.0.4, but fixed in 4.0.5\n\n    tests['video'] = function() {\n        var elem = document.createElement('video'),\n            bool = false;\n\n        // IE9 Running on Windows Server SKU can cause an exception to be thrown, bug #224\n        try {\n            if ( bool = !!elem.canPlayType ) {\n                bool      = new Boolean(bool);\n                bool.ogg  = elem.canPlayType('video/ogg; codecs=\"theora\"')      .replace(/^no$/,'');\n\n                // Without QuickTime, this value will be `undefined`. github.com/Modernizr/Modernizr/issues/546\n                bool.h264 = elem.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') .replace(/^no$/,'');\n\n                bool.webm = elem.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/,'');\n            }\n\n        } catch(e) { }\n\n        return bool;\n    };\n\n    tests['audio'] = function() {\n        var elem = document.createElement('audio'),\n            bool = false;\n\n        try {\n            if ( bool = !!elem.canPlayType ) {\n                bool      = new Boolean(bool);\n                bool.ogg  = elem.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/,'');\n                bool.mp3  = elem.canPlayType('audio/mpeg;')               .replace(/^no$/,'');\n\n                // Mimetypes accepted:\n                //   developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements\n                //   bit.ly/iphoneoscodecs\n                bool.wav  = elem.canPlayType('audio/wav; codecs=\"1\"')     .replace(/^no$/,'');\n                bool.m4a  = ( elem.canPlayType('audio/x-m4a;')            ||\n                              elem.canPlayType('audio/aac;'))             .replace(/^no$/,'');\n            }\n        } catch(e) { }\n\n        return bool;\n    };\n\n\n    // In FF4, if disabled, window.localStorage should === null.\n\n    // Normally, we could not test that directly and need to do a\n    //   `('localStorage' in window) && ` test first because otherwise Firefox will\n    //   throw bugzil.la/365772 if cookies are disabled\n\n    // Also in iOS5 Private Browsing mode, attempting to use localStorage.setItem\n    // will throw the exception:\n    //   QUOTA_EXCEEDED_ERRROR DOM Exception 22.\n    // Peculiarly, getItem and removeItem calls do not throw.\n\n    // Because we are forced to try/catch this, we'll go aggressive.\n\n    // Just FWIW: IE8 Compat mode supports these features completely:\n    //   www.quirksmode.org/dom/html5.html\n    // But IE8 doesn't support either with local files\n\n    tests['localstorage'] = function() {\n        try {\n            localStorage.setItem(mod, mod);\n            localStorage.removeItem(mod);\n            return true;\n        } catch(e) {\n            return false;\n        }\n    };\n\n    tests['sessionstorage'] = function() {\n        try {\n            sessionStorage.setItem(mod, mod);\n            sessionStorage.removeItem(mod);\n            return true;\n        } catch(e) {\n            return false;\n        }\n    };\n\n\n    tests['webworkers'] = function() {\n        return !!window.Worker;\n    };\n\n\n    tests['applicationcache'] = function() {\n        return !!window.applicationCache;\n    };\n\n\n    // Thanks to Erik Dahlstrom\n    tests['svg'] = function() {\n        return !!document.createElementNS && !!document.createElementNS(ns.svg, 'svg').createSVGRect;\n    };\n\n    // specifically for SVG inline in HTML, not within XHTML\n    // test page: paulirish.com/demo/inline-svg\n    tests['inlinesvg'] = function() {\n      var div = document.createElement('div');\n      div.innerHTML = '<svg/>';\n      return (div.firstChild && div.firstChild.namespaceURI) == ns.svg;\n    };\n\n    // SVG SMIL animation\n    tests['smil'] = function() {\n        return !!document.createElementNS && /SVGAnimate/.test(toString.call(document.createElementNS(ns.svg, 'animate')));\n    };\n\n    // This test is only for clip paths in SVG proper, not clip paths on HTML content\n    // demo: srufaculty.sru.edu/david.dailey/svg/newstuff/clipPath4.svg\n\n    // However read the comments to dig into applying SVG clippaths to HTML content here:\n    //   github.com/Modernizr/Modernizr/issues/213#issuecomment-1149491\n    tests['svgclippaths'] = function() {\n        return !!document.createElementNS && /SVGClipPath/.test(toString.call(document.createElementNS(ns.svg, 'clipPath')));\n    };\n\n    /*>>webforms*/\n    // input features and input types go directly onto the ret object, bypassing the tests loop.\n    // Hold this guy to execute in a moment.\n    function webforms() {\n        /*>>input*/\n        // Run through HTML5's new input attributes to see if the UA understands any.\n        // We're using f which is the <input> element created early on\n        // Mike Taylr has created a comprehensive resource for testing these attributes\n        //   when applied to all input types:\n        //   miketaylr.com/code/input-type-attr.html\n        // spec: www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary\n\n        // Only input placeholder is tested while textarea's placeholder is not.\n        // Currently Safari 4 and Opera 11 have support only for the input placeholder\n        // Both tests are available in feature-detects/forms-placeholder.js\n        Modernizr['input'] = (function( props ) {\n            for ( var i = 0, len = props.length; i < len; i++ ) {\n                attrs[ props[i] ] = !!(props[i] in inputElem);\n            }\n            if (attrs.list){\n              // safari false positive's on datalist: webk.it/74252\n              // see also github.com/Modernizr/Modernizr/issues/146\n              attrs.list = !!(document.createElement('datalist') && window.HTMLDataListElement);\n            }\n            return attrs;\n        })('autocomplete autofocus list placeholder max min multiple pattern required step'.split(' '));\n        /*>>input*/\n\n        /*>>inputtypes*/\n        // Run through HTML5's new input types to see if the UA understands any.\n        //   This is put behind the tests runloop because it doesn't return a\n        //   true/false like all the other tests; instead, it returns an object\n        //   containing each input type with its corresponding true/false value\n\n        // Big thanks to @miketaylr for the html5 forms expertise. miketaylr.com/\n        Modernizr['inputtypes'] = (function(props) {\n\n            for ( var i = 0, bool, inputElemType, defaultView, len = props.length; i < len; i++ ) {\n\n                inputElem.setAttribute('type', inputElemType = props[i]);\n                bool = inputElem.type !== 'text';\n\n                // We first check to see if the type we give it sticks..\n                // If the type does, we feed it a textual value, which shouldn't be valid.\n                // If the value doesn't stick, we know there's input sanitization which infers a custom UI\n                if ( bool ) {\n\n                    inputElem.value         = smile;\n                    inputElem.style.cssText = 'position:absolute;visibility:hidden;';\n\n                    if ( /^range$/.test(inputElemType) && inputElem.style.WebkitAppearance !== undefined ) {\n\n                      docElement.appendChild(inputElem);\n                      defaultView = document.defaultView;\n\n                      // Safari 2-4 allows the smiley as a value, despite making a slider\n                      bool =  defaultView.getComputedStyle &&\n                              defaultView.getComputedStyle(inputElem, null).WebkitAppearance !== 'textfield' &&\n                              // Mobile android web browser has false positive, so must\n                              // check the height to see if the widget is actually there.\n                              (inputElem.offsetHeight !== 0);\n\n                      docElement.removeChild(inputElem);\n\n                    } else if ( /^(search|tel)$/.test(inputElemType) ){\n                      // Spec doesn't define any special parsing or detectable UI\n                      //   behaviors so we pass these through as true\n\n                      // Interestingly, opera fails the earlier test, so it doesn't\n                      //  even make it here.\n\n                    } else if ( /^(url|email)$/.test(inputElemType) ) {\n                      // Real url and email support comes with prebaked validation.\n                      bool = inputElem.checkValidity && inputElem.checkValidity() === false;\n\n                    } else {\n                      // If the upgraded input compontent rejects the :) text, we got a winner\n                      bool = inputElem.value != smile;\n                    }\n                }\n\n                inputs[ props[i] ] = !!bool;\n            }\n            return inputs;\n        })('search tel url email datetime date month week time datetime-local number range color'.split(' '));\n        /*>>inputtypes*/\n    }\n    /*>>webforms*/\n\n\n    // End of test definitions\n    // -----------------------\n\n\n\n    // Run through all tests and detect their support in the current UA.\n    // todo: hypothetically we could be doing an array of tests and use a basic loop here.\n    for ( var feature in tests ) {\n        if ( hasOwnProp(tests, feature) ) {\n            // run the test, throw the return value into the Modernizr,\n            //   then based on that boolean, define an appropriate className\n            //   and push it into an array of classes we'll join later.\n            featureName  = feature.toLowerCase();\n            Modernizr[featureName] = tests[feature]();\n\n            classes.push((Modernizr[featureName] ? '' : 'no-') + featureName);\n        }\n    }\n\n    /*>>webforms*/\n    // input tests need to run.\n    Modernizr.input || webforms();\n    /*>>webforms*/\n\n\n    /**\n     * addTest allows the user to define their own feature tests\n     * the result will be added onto the Modernizr object,\n     * as well as an appropriate className set on the html element\n     *\n     * @param feature - String naming the feature\n     * @param test - Function returning true if feature is supported, false if not\n     */\n     Modernizr.addTest = function ( feature, test ) {\n       if ( typeof feature == 'object' ) {\n         for ( var key in feature ) {\n           if ( hasOwnProp( feature, key ) ) {\n             Modernizr.addTest( key, feature[ key ] );\n           }\n         }\n       } else {\n\n         feature = feature.toLowerCase();\n\n         if ( Modernizr[feature] !== undefined ) {\n           // we're going to quit if you're trying to overwrite an existing test\n           // if we were to allow it, we'd do this:\n           //   var re = new RegExp(\"\\\\b(no-)?\" + feature + \"\\\\b\");\n           //   docElement.className = docElement.className.replace( re, '' );\n           // but, no rly, stuff 'em.\n           return Modernizr;\n         }\n\n         test = typeof test == 'function' ? test() : test;\n\n         if (typeof enableClasses !== \"undefined\" && enableClasses) {\n           docElement.className += ' ' + (test ? '' : 'no-') + feature;\n         }\n         Modernizr[feature] = test;\n\n       }\n\n       return Modernizr; // allow chaining.\n     };\n\n\n    // Reset modElem.cssText to nothing to reduce memory footprint.\n    setCss('');\n    modElem = inputElem = null;\n\n    /*>>shiv*/\n    /**\n     * @preserve HTML5 Shiv prev3.7.1 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\n     */\n    ;(function(window, document) {\n        /*jshint evil:true */\n        /** version */\n        var version = '3.7.0';\n\n        /** Preset options */\n        var options = window.html5 || {};\n\n        /** Used to skip problem elements */\n        var reSkip = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;\n\n        /** Not all elements can be cloned in IE **/\n        var saveClones = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;\n\n        /** Detect whether the browser supports default html5 styles */\n        var supportsHtml5Styles;\n\n        /** Name of the expando, to work with multiple documents or to re-shiv one document */\n        var expando = '_html5shiv';\n\n        /** The id for the the documents expando */\n        var expanID = 0;\n\n        /** Cached data for each document */\n        var expandoData = {};\n\n        /** Detect whether the browser supports unknown elements */\n        var supportsUnknownElements;\n\n        (function() {\n          try {\n            var a = document.createElement('a');\n            a.innerHTML = '<xyz></xyz>';\n            //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles\n            supportsHtml5Styles = ('hidden' in a);\n\n            supportsUnknownElements = a.childNodes.length == 1 || (function() {\n              // assign a false positive if unable to shiv\n              (document.createElement)('a');\n              var frag = document.createDocumentFragment();\n              return (\n                typeof frag.cloneNode == 'undefined' ||\n                typeof frag.createDocumentFragment == 'undefined' ||\n                typeof frag.createElement == 'undefined'\n              );\n            }());\n          } catch(e) {\n            // assign a false positive if detection fails => unable to shiv\n            supportsHtml5Styles = true;\n            supportsUnknownElements = true;\n          }\n\n        }());\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * Creates a style sheet with the given CSS text and adds it to the document.\n         * @private\n         * @param {Document} ownerDocument The document.\n         * @param {String} cssText The CSS text.\n         * @returns {StyleSheet} The style element.\n         */\n        function addStyleSheet(ownerDocument, cssText) {\n          var p = ownerDocument.createElement('p'),\n          parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement;\n\n          p.innerHTML = 'x<style>' + cssText + '</style>';\n          return parent.insertBefore(p.lastChild, parent.firstChild);\n        }\n\n        /**\n         * Returns the value of `html5.elements` as an array.\n         * @private\n         * @returns {Array} An array of shived element node names.\n         */\n        function getElements() {\n          var elements = html5.elements;\n          return typeof elements == 'string' ? elements.split(' ') : elements;\n        }\n\n        /**\n         * Returns the data associated to the given document\n         * @private\n         * @param {Document} ownerDocument The document.\n         * @returns {Object} An object of data.\n         */\n        function getExpandoData(ownerDocument) {\n          var data = expandoData[ownerDocument[expando]];\n          if (!data) {\n            data = {};\n            expanID++;\n            ownerDocument[expando] = expanID;\n            expandoData[expanID] = data;\n          }\n          return data;\n        }\n\n        /**\n         * returns a shived element for the given nodeName and document\n         * @memberOf html5\n         * @param {String} nodeName name of the element\n         * @param {Document} ownerDocument The context document.\n         * @returns {Object} The shived element.\n         */\n        function createElement(nodeName, ownerDocument, data){\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          if(supportsUnknownElements){\n            return ownerDocument.createElement(nodeName);\n          }\n          if (!data) {\n            data = getExpandoData(ownerDocument);\n          }\n          var node;\n\n          if (data.cache[nodeName]) {\n            node = data.cache[nodeName].cloneNode();\n          } else if (saveClones.test(nodeName)) {\n            node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode();\n          } else {\n            node = data.createElem(nodeName);\n          }\n\n          // Avoid adding some elements to fragments in IE < 9 because\n          // * Attributes like `name` or `type` cannot be set/changed once an element\n          //   is inserted into a document/fragment\n          // * Link elements with `src` attributes that are inaccessible, as with\n          //   a 403 response, will cause the tab/window to crash\n          // * Script elements appended to fragments will execute when their `src`\n          //   or `text` property is set\n          return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn ? data.frag.appendChild(node) : node;\n        }\n\n        /**\n         * returns a shived DocumentFragment for the given document\n         * @memberOf html5\n         * @param {Document} ownerDocument The context document.\n         * @returns {Object} The shived DocumentFragment.\n         */\n        function createDocumentFragment(ownerDocument, data){\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          if(supportsUnknownElements){\n            return ownerDocument.createDocumentFragment();\n          }\n          data = data || getExpandoData(ownerDocument);\n          var clone = data.frag.cloneNode(),\n          i = 0,\n          elems = getElements(),\n          l = elems.length;\n          for(;i<l;i++){\n            clone.createElement(elems[i]);\n          }\n          return clone;\n        }\n\n        /**\n         * Shivs the `createElement` and `createDocumentFragment` methods of the document.\n         * @private\n         * @param {Document|DocumentFragment} ownerDocument The document.\n         * @param {Object} data of the document.\n         */\n        function shivMethods(ownerDocument, data) {\n          if (!data.cache) {\n            data.cache = {};\n            data.createElem = ownerDocument.createElement;\n            data.createFrag = ownerDocument.createDocumentFragment;\n            data.frag = data.createFrag();\n          }\n\n\n          ownerDocument.createElement = function(nodeName) {\n            //abort shiv\n            if (!html5.shivMethods) {\n              return data.createElem(nodeName);\n            }\n            return createElement(nodeName, ownerDocument, data);\n          };\n\n          ownerDocument.createDocumentFragment = Function('h,f', 'return function(){' +\n                                                          'var n=f.cloneNode(),c=n.createElement;' +\n                                                          'h.shivMethods&&(' +\n                                                          // unroll the `createElement` calls\n                                                          getElements().join().replace(/[\\w\\-]+/g, function(nodeName) {\n            data.createElem(nodeName);\n            data.frag.createElement(nodeName);\n            return 'c(\"' + nodeName + '\")';\n          }) +\n            ');return n}'\n                                                         )(html5, data.frag);\n        }\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * Shivs the given document.\n         * @memberOf html5\n         * @param {Document} ownerDocument The document to shiv.\n         * @returns {Document} The shived document.\n         */\n        function shivDocument(ownerDocument) {\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          var data = getExpandoData(ownerDocument);\n\n          if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n            data.hasCSS = !!addStyleSheet(ownerDocument,\n                                          // corrects block display not defined in IE6/7/8/9\n                                          'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n                                            // adds styling not present in IE6/7/8/9\n                                            'mark{background:#FF0;color:#000}' +\n                                            // hides non-rendered elements\n                                            'template{display:none}'\n                                         );\n          }\n          if (!supportsUnknownElements) {\n            shivMethods(ownerDocument, data);\n          }\n          return ownerDocument;\n        }\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * The `html5` object is exposed so that more elements can be shived and\n         * existing shiving can be detected on iframes.\n         * @type Object\n         * @example\n         *\n         * // options can be changed before the script is included\n         * html5 = { 'elements': 'mark section', 'shivCSS': false, 'shivMethods': false };\n         */\n        var html5 = {\n\n          /**\n           * An array or space separated string of node names of the elements to shiv.\n           * @memberOf html5\n           * @type Array|String\n           */\n          'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video',\n\n          /**\n           * current version of html5shiv\n           */\n          'version': version,\n\n          /**\n           * A flag to indicate that the HTML5 style sheet should be inserted.\n           * @memberOf html5\n           * @type Boolean\n           */\n          'shivCSS': (options.shivCSS !== false),\n\n          /**\n           * Is equal to true if a browser supports creating unknown/HTML5 elements\n           * @memberOf html5\n           * @type boolean\n           */\n          'supportsUnknownElements': supportsUnknownElements,\n\n          /**\n           * A flag to indicate that the document's `createElement` and `createDocumentFragment`\n           * methods should be overwritten.\n           * @memberOf html5\n           * @type Boolean\n           */\n          'shivMethods': (options.shivMethods !== false),\n\n          /**\n           * A string to describe the type of `html5` object (\"default\" or \"default print\").\n           * @memberOf html5\n           * @type String\n           */\n          'type': 'default',\n\n          // shivs the document according to the specified `html5` object options\n          'shivDocument': shivDocument,\n\n          //creates a shived element\n          createElement: createElement,\n\n          //creates a shived documentFragment\n          createDocumentFragment: createDocumentFragment\n        };\n\n        /*--------------------------------------------------------------------------*/\n\n        // expose html5\n        window.html5 = html5;\n\n        // shiv the document\n        shivDocument(document);\n\n    }(this, document));\n    /*>>shiv*/\n\n    // Assign private properties to the return object with prefix\n    Modernizr._version      = version;\n\n    // expose these for the plugin API. Look in the source for how to join() them against your input\n    /*>>prefixes*/\n    Modernizr._prefixes     = prefixes;\n    /*>>prefixes*/\n    /*>>domprefixes*/\n    Modernizr._domPrefixes  = domPrefixes;\n    Modernizr._cssomPrefixes  = cssomPrefixes;\n    /*>>domprefixes*/\n\n    /*>>mq*/\n    // Modernizr.mq tests a given media query, live against the current state of the window\n    // A few important notes:\n    //   * If a browser does not support media queries at all (eg. oldIE) the mq() will always return false\n    //   * A max-width or orientation query will be evaluated against the current state, which may change later.\n    //   * You must specify values. Eg. If you are testing support for the min-width media query use:\n    //       Modernizr.mq('(min-width:0)')\n    // usage:\n    // Modernizr.mq('only screen and (max-width:768)')\n    Modernizr.mq            = testMediaQuery;\n    /*>>mq*/\n\n    /*>>hasevent*/\n    // Modernizr.hasEvent() detects support for a given event, with an optional element to test on\n    // Modernizr.hasEvent('gesturestart', elem)\n    Modernizr.hasEvent      = isEventSupported;\n    /*>>hasevent*/\n\n    /*>>testprop*/\n    // Modernizr.testProp() investigates whether a given style property is recognized\n    // Note that the property names must be provided in the camelCase variant.\n    // Modernizr.testProp('pointerEvents')\n    Modernizr.testProp      = function(prop){\n        return testProps([prop]);\n    };\n    /*>>testprop*/\n\n    /*>>testallprops*/\n    // Modernizr.testAllProps() investigates whether a given style property,\n    //   or any of its vendor-prefixed variants, is recognized\n    // Note that the property names must be provided in the camelCase variant.\n    // Modernizr.testAllProps('boxSizing')\n    Modernizr.testAllProps  = testPropsAll;\n    /*>>testallprops*/\n\n\n    /*>>teststyles*/\n    // Modernizr.testStyles() allows you to add custom styles to the document and test an element afterwards\n    // Modernizr.testStyles('#modernizr { position:absolute }', function(elem, rule){ ... })\n    Modernizr.testStyles    = injectElementWithStyles;\n    /*>>teststyles*/\n\n\n    /*>>prefixed*/\n    // Modernizr.prefixed() returns the prefixed or nonprefixed property name variant of your input\n    // Modernizr.prefixed('boxSizing') // 'MozBoxSizing'\n\n    // Properties must be passed as dom-style camelcase, rather than `box-sizing` hypentated style.\n    // Return values will also be the camelCase variant, if you need to translate that to hypenated style use:\n    //\n    //     str.replace(/([A-Z])/g, function(str,m1){ return '-' + m1.toLowerCase(); }).replace(/^ms-/,'-ms-');\n\n    // If you're trying to ascertain which transition end event to bind to, you might do something like...\n    //\n    //     var transEndEventNames = {\n    //       'WebkitTransition' : 'webkitTransitionEnd',\n    //       'MozTransition'    : 'transitionend',\n    //       'OTransition'      : 'oTransitionEnd',\n    //       'msTransition'     : 'MSTransitionEnd',\n    //       'transition'       : 'transitionend'\n    //     },\n    //     transEndEventName = transEndEventNames[ Modernizr.prefixed('transition') ];\n\n    Modernizr.prefixed      = function(prop, obj, elem){\n      if(!obj) {\n        return testPropsAll(prop, 'pfx');\n      } else {\n        // Testing DOM property e.g. Modernizr.prefixed('requestAnimationFrame', window) // 'mozRequestAnimationFrame'\n        return testPropsAll(prop, obj, elem);\n      }\n    };\n    /*>>prefixed*/\n\n\n    /*>>cssclasses*/\n    // Remove \"no-js\" class from <html> element, if it exists:\n    docElement.className = docElement.className.replace(/(^|\\s)no-js(\\s|$)/, '$1$2') +\n\n                            // Add the new classes to the <html> element.\n                            (enableClasses ? ' js ' + classes.join(' ') : '');\n    /*>>cssclasses*/\n\n    return Modernizr;\n\n})(this, this.document);\n","// Device.js\n// (c) 2014 Matthew Hudson\n// Device.js is freely distributable under the MIT license.\n// For all details and documentation:\n// http://matthewhudson.me/projects/device.js/\n\n(function() {\n\tif ( document.querySelectorAll && !$(\"html\").hasClass(\"lt-ie9\") ) {\n\n\t\tvar device,\n\t\t\tpreviousDevice,\n\t\t\taddClass,\n\t\t\tdocumentElement,\n\t\t\tfind,\n\t\t\thandleOrientation,\n\t\t\thasClass,\n\t\t\torientationEvent,\n\t\t\tremoveClass,\n\t\t\tuserAgent;\n\n\t\t// Save the previous value of the device variable.\n\t\tpreviousDevice = window.device;\n\n\t\tdevice = {};\n\n\t\t// Add device as a global object.\n\t\twindow.device = device;\n\n\t\t// The <html> element.\n\t\tdocumentElement = window.document.documentElement;\n\n\t\t// The client user agent string.\n\t\t// Lowercase, so we can use the more efficient indexOf(), instead of Regex\n\t\tuserAgent = window.navigator.userAgent.toLowerCase();\n\n\t\t// Main functions\n\t\t// --------------\n\n\t\tdevice.ios = function () {\n\t\t\treturn device.iphone() || device.ipod() || device.ipad();\n\t\t};\n\n\t\tdevice.iphone = function () {\n\t\t\treturn find('iphone');\n\t\t};\n\n\t\tdevice.ipod = function () {\n\t\t\treturn find('ipod');\n\t\t};\n\n\t\tdevice.ipad = function () {\n\t\t\treturn find('ipad');\n\t\t};\n\n\t\tdevice.android = function () {\n\t\t\treturn find('android');\n\t\t};\n\n\t\tdevice.androidPhone = function () {\n\t\t\treturn device.android() && find('mobile');\n\t\t};\n\n\t\tdevice.androidTablet = function () {\n\t\t\treturn device.android() && !find('mobile');\n\t\t};\n\n\t\tdevice.blackberry = function () {\n\t\t\treturn find('blackberry') || find('bb10') || find('rim');\n\t\t};\n\n\t\tdevice.blackberryPhone = function () {\n\t\t\treturn device.blackberry() && !find('tablet');\n\t\t};\n\n\t\tdevice.blackberryTablet = function () {\n\t\t\treturn device.blackberry() && find('tablet');\n\t\t};\n\n\t\tdevice.windows = function () {\n\t\t\treturn find('windows');\n\t\t};\n\n\t\tdevice.windowsPhone = function () {\n\t\t\treturn device.windows() && find('phone');\n\t\t};\n\n\t\tdevice.windowsTablet = function () {\n\t\t\treturn device.windows() && (find('touch') && !device.windowsPhone());\n\t\t};\n\n\t\tdevice.fxos = function () {\n\t\t\treturn (find('(mobile;') || find('(tablet;')) && find('; rv:');\n\t\t};\n\n\t\tdevice.fxosPhone = function () {\n\t\t\treturn device.fxos() && find('mobile');\n\t\t};\n\n\t\tdevice.fxosTablet = function () {\n\t\t\treturn device.fxos() && find('tablet');\n\t\t};\n\n\t\tdevice.meego = function () {\n\t\t\treturn find('meego');\n\t\t};\n\n\t\tdevice.cordova = function () {\n\t\t\treturn window.cordova && location.protocol === 'file:';\n\t\t};\n\n\t\tdevice.nodeWebkit = function () {\n\t\t\treturn typeof window.process === 'object';\n\t\t};\n\n\t\tdevice.mobile = function () {\n\t\t\treturn device.androidPhone() || device.iphone() || device.ipod() || device.windowsPhone() || device.blackberryPhone() || device.fxosPhone() || device.meego();\n\t\t};\n\n\t\tdevice.tablet = function () {\n\t\t\treturn device.ipad() || device.androidTablet() || device.blackberryTablet() || device.windowsTablet() || device.fxosTablet();\n\t\t};\n\n\t\tdevice.desktop = function () {\n\t\t\treturn !device.tablet() && !device.mobile();\n\t\t};\n\n\t\tdevice.television = function() {\n\t\t\tvar i, tvString;\n\n\t\t\ttelevision = [\n\t\t\t\t\"googletv\",\n\t\t\t\t\"viera\",\n\t\t\t\t\"smarttv\",\n\t\t\t\t\"internet.tv\",\n\t\t\t\t\"netcast\",\n\t\t\t\t\"nettv\",\n\t\t\t\t\"appletv\",\n\t\t\t\t\"boxee\",\n\t\t\t\t\"kylo\",\n\t\t\t\t\"roku\",\n\t\t\t\t\"dlnadoc\",\n\t\t\t\t\"roku\",\n\t\t\t\t\"pov_tv\",\n\t\t\t\t\"hbbtv\",\n\t\t\t\t\"ce-html\"\n\t\t\t];\n\n\t\t\ti = 0;\n\t\t\twhile (i < television.length) {\n\t\t\t\tif (find(television[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tdevice.portrait = function () {\n\t\t\treturn (window.innerHeight / window.innerWidth) > 1;\n\t\t};\n\n\t\tdevice.landscape = function () {\n\t\t\treturn (window.innerHeight / window.innerWidth) < 1;\n\t\t};\n\n\t\t// Public Utility Functions\n\t\t// ------------------------\n\n\t\t// Run device.js in noConflict mode,\n\t\t// returning the device variable to its previous owner.\n\t\tdevice.noConflict = function () {\n\t\t\twindow.device = previousDevice;\n\t\t\treturn this;\n\t\t};\n\n\t\t// Private Utility Functions\n\t\t// -------------------------\n\n\t\t// Simple UA string search\n\t\tfind = function (needle) {\n\t\t\treturn userAgent.indexOf(needle) !== -1;\n\t\t};\n\n\t\t// Check if documentElement already has a given class.\n\t\thasClass = function (className) {\n\t\t\tvar regex;\n\t\t\tregex = new RegExp(className, 'i');\n\t\t\treturn documentElement.className.match(regex);\n\t\t};\n\n\t\t// Add one or more CSS classes to the <html> element.\n\t\taddClass = function (className) {\n\t\t\tif (!hasClass(className)) {\n\t\t\t\tdocumentElement.className = documentElement.className.trim() + \" \" + className;\n\t\t\t}\n\t\t};\n\n\t\t// Remove single CSS class from the <html> element.\n\t\tremoveClass = function (className) {\n\t\t\tif (hasClass(className)) {\n\t\t\t\tdocumentElement.className = documentElement.className.replace(\" \" + className, \"\");\n\t\t\t}\n\t\t};\n\n\t\t// HTML Element Handling\n\t\t// ---------------------\n\n\t\t// Insert the appropriate CSS class based on the _user_agent.\n\n\t\tif (device.ios()) {\n\t\t\tif (device.ipad()) {\n\t\t\t\taddClass(\"ios ipad tablet\");\n\t\t\t} else if (device.iphone()) {\n\t\t\t\taddClass(\"ios iphone mobile\");\n\t\t\t} else if (device.ipod()) {\n\t\t\t\taddClass(\"ios ipod mobile\");\n\t\t\t}\n\t\t} else if (device.android()) {\n\t\t\tif (device.androidTablet()) {\n\t\t\t\taddClass(\"android tablet\");\n\t\t\t} else {\n\t\t\t\taddClass(\"android mobile\");\n\t\t\t}\n\t\t} else if (device.blackberry()) {\n\t\t\tif (device.blackberryTablet()) {\n\t\t\t\taddClass(\"blackberry tablet\");\n\t\t\t} else {\n\t\t\t\taddClass(\"blackberry mobile\");\n\t\t\t}\n\t\t} else if (device.windows()) {\n\t\t\tif (device.windowsTablet()) {\n\t\t\t\taddClass(\"windows tablet\");\n\t\t\t} else if (device.windowsPhone()) {\n\t\t\t\taddClass(\"windows mobile\");\n\t\t\t} else {\n\t\t\t\taddClass(\"desktop\");\n\t\t\t}\n\t\t} else if (device.fxos()) {\n\t\t\tif (device.fxosTablet()) {\n\t\t\t\taddClass(\"fxos tablet\");\n\t\t\t} else {\n\t\t\t\taddClass(\"fxos mobile\");\n\t\t\t}\n\t\t} else if (device.meego()) {\n\t\t\taddClass(\"meego mobile\");\n\t\t} else if (device.nodeWebkit()) {\n\t\t\taddClass(\"node-webkit\");\n\t\t} else if (device.television()) {\n\t\t\taddClass(\"television\");\n\t\t} else if (device.desktop()) {\n\t\t\taddClass(\"desktop\");\n\t\t}\n\n\t\tif (device.cordova()) {\n\t\t\taddClass(\"cordova\");\n\t\t}\n\n\t\t// Orientation Handling\n\t\t// --------------------\n\n\t\t// Handle device orientation changes.\n\t\thandleOrientation = function () {\n\t\t\tif (device.landscape()) {\n\t\t\t\tremoveClass(\"portrait\");\n\t\t\t\taddClass(\"landscape\");\n\t\t\t} else {\n\t\t\t\tremoveClass(\"landscape\");\n\t\t\t\taddClass(\"portrait\");\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\n\t\t// Detect whether device supports orientationchange event,\n\t\t// otherwise fall back to the resize event.\n\t\tif (window.hasOwnProperty(\"onorientationchange\")) {\n\t\t\torientationEvent = \"orientationchange\";\n\t\t} else {\n\t\t\torientationEvent = \"resize\";\n\t\t}\n\n\t\t// Listen for changes in orientation.\n\t\tif (window.addEventListener) {\n\t\t\twindow.addEventListener(orientationEvent, handleOrientation, false);\n\t\t} else if (window.attachEvent) {\n\t\t\twindow.attachEvent(orientationEvent, handleOrientation);\n\t\t} else {\n\t\t\twindow[orientationEvent] = handleOrientation;\n\t\t}\n\n\t\thandleOrientation();\n\n\t\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t\tdefine(function() {\n\t\t\t\treturn device;\n\t\t\t});\n\t\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\t\tmodule.exports = device;\n\t\t} else {\n\t\t\twindow.device = device;\n\t\t}\n\n\t}\n}).call(this);\n","var config = {\r\n\tapplication: {\r\n\t\ttouch: Modernizr.touch && !device.desktop(), // bool: Modernizr check returns true or false.\r\n\t\tdebug: true, // bool: use if (debug) console.log(); instead of console.log; for permanent debugging messages.\r\n\t\troot: typeof rootPath === \"undefined\" ? \"\" : rootPath // Path variable for javascript server side image loading.\r\n\t},\r\n\ttypography: {\r\n\t\tresize: {\r\n\t\t\trange: 3 // int: number of increase and decrease steps for font size controls.\r\n\t\t},\r\n\t\tautoresize: {\r\n\t\t\tcharacters: 30, // Int: number of characters per line\r\n\t\t\trows: 2, // Int: maximum number of rows\r\n\t\t\tminFontSize: 36, // Int: minimum font size allowed\r\n\t\t\tmaxFontSize: 72 // Int: maximum font size allowed\r\n\t\t}\r\n\t},\r\n\tforms: {\r\n\t\tvalidation: true, // bool: Toggles client-side validation.\r\n\t\tmultiUploadlimit: 3 // int: Multiple file upload limit.\r\n\t},\r\n\tnotification: {\r\n\t\tactive: true, // bool: on or off\r\n\t\tdelay: 5000, // int: miliseconds for disappearance.\r\n\t\ttone: \"default\" // str: \"default\", \"success\", \"warning\", \"failure\".\r\n\t},\r\n\tcookie: {\r\n\t\tactive: true, // bool: on or off\r\n\t\tmessage: \"We use cookies to give you a better experience. By continuing to browse you are accepting our <a href='#' target='_blank'>Terms &amp; Conditions</a>.\", // str: First visit cookie message.\r\n\t\tdelay: 0 // int: First visit cookie delay on screen. 0 is permanent.\r\n\t},\r\n\tbrochure: {\r\n\t\tactive: true // bool: on or off\r\n\t},\r\n\tsearch: {\r\n\t\tview: \"grid\", // str: \"grid\", \"list\".\r\n\t\tdisplay: \"full\", // str: \"full\", \"mini\".\r\n\t\tcount: 10, // int: Number of items to show per page.\r\n\t\tpagination: false // bool: Toggle pagination controls and loading of page elements only.\r\n\t},\r\n\tslider: {\r\n\t\tnav: true, // bool: Show bullets.\r\n\t\tarrows: true, // bool: Show arrows.\r\n\t\tthumbnails: false, // bool: Show thumbnails.\r\n\t\tshow: 1, // bool: Automatic slide change.\r\n\t\tslideshow: true, // bool: Automatic slide change.\r\n\t\tanimation: \"slide\", // str: \"slide\", \"fade\".\r\n\t\tduration: 750, // int: miliseconds for slide change.\r\n\t\tinterval: 7500, // int: miliseconds for slide interval.\r\n\t\tthreshold: 20 // int: px distance on X axis from touchstart to current touch position.\r\n\t},\r\n\ttables: {\r\n\t\tresponsive: true // bool: Converts every row into a separate table on mobiles.\r\n\t},\r\n\ttooltip: {\r\n\t\tbound: true, // bool: Sets boundaries to .wrapper (content container).\r\n\t\tposition: \"center\" // str: \"left\", \"center\", \"right\".\r\n\t},\r\n\ttwitter: {\r\n\t\twidgetId: '492660537293938688', // Generated via Twitter.com. See the matterframework.net/widgets..\r\n\t\tstartAt: 0, // int: Starting tweet index.\r\n\t\tmaxTweets: 3, // int: Maximum number of tweets shown at any time.\r\n\t\tenableLinks: true, // bool: Turns URLs and hashtags into links.\r\n\t\tshowUser: true, // bool: Show User's avatar.\r\n\t\tshowTime: true, // bool: Show posted time.\r\n\t\tshowRetweet: false, // bool: Show retweets that you posted.\r\n\t\tshowFollow: false, // bool: Show Follow button.\r\n\t\tshowInteraction: false // bool: Show Reply, Retweet and Favorite.\r\n\t}\r\n};","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var n;\"undefined\"!=typeof window?n=window:\"undefined\"!=typeof global?n=global:\"undefined\"!=typeof self&&(n=self),n.AnimationFrame=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * An even better animation frame.\n *\n * @copyright Oleg Slobodskoi 2015\n * @website https://github.com/kof/animationFrame\n * @license MIT\n */\n\nmodule.exports = require('./lib/animation-frame')\n\n},{\"./lib/animation-frame\":2}],2:[function(require,module,exports){\n'use strict'\n\nvar nativeImpl = require('./native')\nvar now = require('./now')\nvar performance = require('./performance')\n\n// Weird native implementation doesn't work if context is defined.\nvar nativeRequest = nativeImpl.request\nvar nativeCancel = nativeImpl.cancel\n\n/**\n * Animation frame constructor.\n *\n * Options:\n *   - `useNative` use the native animation frame if possible, defaults to true\n *   - `frameRate` pass a custom frame rate\n *\n * @param {Object|Number} options\n */\nfunction AnimationFrame(options) {\n    if (!(this instanceof AnimationFrame)) return new AnimationFrame(options)\n    options || (options = {})\n\n    // Its a frame rate.\n    if (typeof options == 'number') options = {frameRate: options}\n    options.useNative != null || (options.useNative = true)\n    this.options = options\n    this.frameRate = options.frameRate || AnimationFrame.FRAME_RATE\n    this._frameLength = 1000 / this.frameRate\n    this._isCustomFrameRate = this.frameRate !== AnimationFrame.FRAME_RATE\n    this._timeoutId = null\n    this._callbacks = {}\n    this._lastTickTime = 0\n    this._tickCounter = 0\n}\n\nmodule.exports = AnimationFrame\n\n/**\n * Default frame rate used for shim implementation. Native implementation\n * will use the screen frame rate, but js have no way to detect it.\n *\n * If you know your target device, define it manually.\n *\n * @type {Number}\n * @api public\n */\nAnimationFrame.FRAME_RATE = 60\n\n/**\n * Replace the globally defined implementation or define it globally.\n *\n * @param {Object|Number} [options]\n * @api public\n */\nAnimationFrame.shim = function(options) {\n    var animationFrame = new AnimationFrame(options)\n\n    window.requestAnimationFrame = function(callback) {\n        return animationFrame.request(callback)\n    }\n    window.cancelAnimationFrame = function(id) {\n        return animationFrame.cancel(id)\n    }\n\n    return animationFrame\n}\n\n/**\n * Request animation frame.\n * We will use the native RAF as soon as we know it does works.\n *\n * @param {Function} callback\n * @return {Number} timeout id or requested animation frame id\n * @api public\n */\nAnimationFrame.prototype.request = function(callback) {\n    var self = this\n\n    // Alawys inc counter to ensure it never has a conflict with the native counter.\n    // After the feature test phase we don't know exactly which implementation has been used.\n    // Therefore on #cancel we do it for both.\n    ++this._tickCounter\n\n    if (nativeImpl.supported && this.options.useNative && !this._isCustomFrameRate) {\n        return nativeRequest(callback)\n    }\n\n    if (!callback) throw new TypeError('Not enough arguments')\n\n    if (this._timeoutId == null) {\n        // Much faster than Math.max\n        // http://jsperf.com/math-max-vs-comparison/3\n        // http://jsperf.com/date-now-vs-date-gettime/11\n        var delay = this._frameLength + this._lastTickTime - now()\n        if (delay < 0) delay = 0\n\n        this._timeoutId = setTimeout(function() {\n            self._lastTickTime = now()\n            self._timeoutId = null\n            ++self._tickCounter\n            var callbacks = self._callbacks\n            self._callbacks = {}\n            for (var id in callbacks) {\n                if (callbacks[id]) {\n                    if (nativeImpl.supported && self.options.useNative) {\n                        nativeRequest(callbacks[id])\n                    } else {\n                        callbacks[id](performance.now())\n                    }\n                }\n            }\n        }, delay)\n    }\n\n    this._callbacks[this._tickCounter] = callback\n\n    return this._tickCounter\n}\n\n/**\n * Cancel animation frame.\n *\n * @param {Number} timeout id or requested animation frame id\n *\n * @api public\n */\nAnimationFrame.prototype.cancel = function(id) {\n    if (nativeImpl.supported && this.options.useNative) nativeCancel(id)\n    delete this._callbacks[id]\n}\n\n},{\"./native\":3,\"./now\":4,\"./performance\":6}],3:[function(require,module,exports){\n'use strict'\n\nvar global = window\n\n// Test if we are within a foreign domain. Use raf from the top if possible.\ntry {\n    // Accessing .name will throw SecurityError within a foreign domain.\n    global.top.name\n    global = global.top\n} catch(e) {}\n\nexports.request = global.requestAnimationFrame\nexports.cancel = global.cancelAnimationFrame || global.cancelRequestAnimationFrame\nexports.supported = false\n\nvar vendors = ['Webkit', 'Moz', 'ms', 'O']\n\n// Grab the native implementation.\nfor (var i = 0; i < vendors.length && !exports.request; i++) {\n    exports.request = global[vendors[i] + 'RequestAnimationFrame']\n    exports.cancel = global[vendors[i] + 'CancelAnimationFrame'] ||\n        global[vendors[i] + 'CancelRequestAnimationFrame']\n}\n\n// Test if native implementation works.\n// There are some issues on ios6\n// http://shitwebkitdoes.tumblr.com/post/47186945856/native-requestanimationframe-broken-on-ios-6\n// https://gist.github.com/KrofDrakula/5318048\n\nif (exports.request) {\n    exports.request.call(null, function() {\n        exports.supported = true\n    });\n}\n\n},{}],4:[function(require,module,exports){\n'use strict'\n\n/**\n * Crossplatform Date.now()\n *\n * @return {Number} time in ms\n * @api private\n */\nmodule.exports = Date.now || function() {\n    return (new Date).getTime()\n}\n\n},{}],5:[function(require,module,exports){\n'use strict'\n\nvar now = require('./now')\n\n/**\n * Replacement for PerformanceTiming.navigationStart for the case when\n * performance.now is not implemented.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/PerformanceTiming.navigationStart\n *\n * @type {Number}\n * @api private\n */\nexports.navigationStart = now()\n\n},{\"./now\":4}],6:[function(require,module,exports){\n'use strict'\n\nvar now = require('./now')\nvar PerformanceTiming = require('./performance-timing')\n\n/**\n * Crossplatform performance.now()\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/Performance.now()\n *\n * @return {Number} relative time in ms\n * @api public\n */\nexports.now = function () {\n    if (window.performance && window.performance.now) return window.performance.now()\n    return now() - PerformanceTiming.navigationStart\n}\n\n\n},{\"./now\":4,\"./performance-timing\":5}]},{},[1])(1)\n});","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\nvar dateFormat = function() {\n    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n        timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n        timezoneClip = /[^-+\\dA-Z]/g,\n        pad = function (val, len) {\n            val = String(val);\n            len = len || 2;\n            while (val.length < len) val = \"0\" + val;\n            return val;\n        };\n\n    // Regexes and supporting functions are cached through closure\n    return function (date, mask, utc) {\n        var dF = dateFormat;\n\n        // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n        if (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n            mask = date;\n            date = undefined;\n        }\n\n        // Passing date through Date applies Date.parse, if necessary\n        date = date ? new Date(date) : new Date();\n        // if (isNaN(date)) throw SyntaxError(\"invalid date\");\n\n        mask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n        // Allow setting the utc argument via the mask\n        if (mask.slice(0, 4) == \"UTC:\") {\n            mask = mask.slice(4);\n            utc = true;\n        }\n\n        var _ = utc ? \"getUTC\" : \"get\",\n            d = date[_ + \"Date\"](),\n            D = date[_ + \"Day\"](),\n            m = date[_ + \"Month\"](),\n            y = date[_ + \"FullYear\"](),\n            H = date[_ + \"Hours\"](),\n            M = date[_ + \"Minutes\"](),\n            s = date[_ + \"Seconds\"](),\n            L = date[_ + \"Milliseconds\"](),\n            o = utc ? 0 : date.getTimezoneOffset(),\n            flags = {\n                d:    d,\n                dd:   pad(d),\n                ddd:  dF.i18n.dayNames[D],\n                dddd: dF.i18n.dayNames[D + 7],\n                m:    m + 1,\n                mm:   pad(m + 1),\n                mmm:  dF.i18n.monthNames[m],\n                mmmm: dF.i18n.monthNames[m + 12],\n                yy:   String(y).slice(2),\n                yyyy: y,\n                h:    H % 12 || 12,\n                hh:   pad(H % 12 || 12),\n                H:    H,\n                HH:   pad(H),\n                M:    M,\n                MM:   pad(M),\n                s:    s,\n                ss:   pad(s),\n                l:    pad(L, 3),\n                L:    pad(L > 99 ? Math.round(L / 10) : L),\n                t:    H < 12 ? \"a\"  : \"p\",\n                tt:   H < 12 ? \"am\" : \"pm\",\n                T:    H < 12 ? \"A\"  : \"P\",\n                TT:   H < 12 ? \"AM\" : \"PM\",\n                Z:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n                o:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n                S:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n            };\n\n        return mask.replace(token, function ($0) {\n            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n        });\n    };\n}();\n\n// Some common format strings\ndateFormat.masks = {\n    \"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n    shortDate:      \"m/d/yy\",\n    mediumDate:     \"mmm d, yyyy\",\n    longDate:       \"mmmm d, yyyy\",\n    fullDate:       \"dddd, mmmm d, yyyy\",\n    shortTime:      \"h:MM TT\",\n    mediumTime:     \"h:MM:ss TT\",\n    longTime:       \"h:MM:ss TT Z\",\n    isoDate:        \"yyyy-mm-dd\",\n    isoTime:        \"HH:MM:ss\",\n    isoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n    isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n    dayNames: [\n        \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n        \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n    ],\n    monthNames: [\n        \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n        \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n    ]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n    return dateFormat(this, mask, utc);\n};","// IE8 Fixes\n\nwindow.hasOwnProperty = window.hasOwnProperty || Object.prototype.hasOwnProperty;\n\nif( typeof String.prototype.trim !== 'function' ) {\n\tString.prototype.trim = function() {\n\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t}\n}\n\nElement.prototype.remove = function() {\n\tthis.parentElement.removeChild(this);\n}\nNodeList.prototype.remove = HTMLCollection.prototype.remove = function() {\n\tfor(var i = 0, len = this.length; i < len; i++) {\n\t\tif(this[i] && this[i].parentElement) {\n\t\t\tthis[i].parentElement.removeChild(this[i]);\n\t\t}\n\t}\n}\n\n\n\n\n// ECMAScript5\n\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\n\t\t\"use strict\";\n\t\tif (this == null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\n\t\tif (len === 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar n = 0;\n\t\tif (arguments.length > 1) {\n\t\t\tn = Number(arguments[1]);\n\t\t\tif (n != n) { // shortcut for verifying if it's NaN\n\t\t\t\tn = 0;\n\t\t\t} else if (n !== 0 && n != Infinity && n != -Infinity) {\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\n\t\t\t}\n\t\t}\n\t\tif (n >= len) {\n\t\t\treturn -1;\n\t\t}\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\n\t\tfor (; k < len; k++) {\n\t\t\tif (k in t && t[k] === searchElement) {\n\t\t\t\treturn k;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n}\n\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function (callbackfn, thisArg) {\n\t\tvar O = Object(this),\n\t\t\tlenValue = O.length,\n\t\t\tlen = lenValue >>> 0,\n\t\t\tT,\n\t\t\tk,\n\t\t\tPk,\n\t\t\tkPresent,\n\t\t\tkValue;\n\n\t\tif (typeof callbackfn !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tT = thisArg ? thisArg : undefined;\n\n\t\tk = 0;\n\t\twhile (k < len) {\n\t\t\tPk = k.toString();\n\t\t\tkPresent = O.hasOwnProperty(Pk);\n\t\t\tif (kPresent) {\n\t\t\t\tkValue = O[Pk];\n\t\t\t\tcallbackfn.call(T, kValue, k, O);\n\t\t\t}\n\t\t\tk += 1;\n\t\t}\n\t\treturn undefined;\n\t};\n}\n\n\n\n\n// Animation Frame\n\nvar initAnimationFrame = function() {\n\tvar lastTime = 0;\n    var vendors = ['webkit', 'moz', 'ms', 'o'];\n    for ( var x = 0; x < vendors.length && !window.requestAnimationFrame; x++ ) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if ( !window.requestAnimationFrame ) {\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if ( !window.cancelAnimationFrame ) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n}\n\n\n\n\n// Arrays\n\n// Single\n\nArray.prototype.clean = function(deleteValue) { // Delete empty values\n\tfor ( var i = 0; i < this.length; i++ ) {\n\t\tif ( this[i] == deleteValue ) {\n\t\t\tthis.splice(i, 1);\n\t\t\ti--;\n\t\t}\n\t}\n\treturn this;\n}\n\nArray.prototype.uniques = function() { // Gather duplicate values\n\treturn this.reduce(function(a, b){\n\t\tif ( a.indexOf(b) < 0 ) a.push(b);\n\t\treturn a;\n\t}, []);\n}\n\nArray.prototype.contains = function(v) { // Contains specified value\n\tfor ( var i = 0; i < this.length; i++ ) {\n\t\tif (this[i] === v)\treturn true;\n\t}\n\treturn false;\n}\n\nArray.prototype.duplicates = function() { // Gather duplicate values\n\tvar arrayLength = this.length, i, j, result = [];\n\tfor (i = 0; i < arrayLength; i++) {\n\t\tfor (j = 0; j < arrayLength; j++) {\n\t\t\tif (this[i] == this[j] && i != j && !result.contains(this[i])) {\n\t\t\t\tresult.push(this[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nArray.prototype.reduce = function() { // Join all internal arrays\n\tvar a = [];\n\tfor (var i=0; i < this.length; i++) {\n\t\tfor (var j=0; j < this[i].length; j++) {\n\t\t\ta.push(this[i][j]);\n\t\t}\n\t}\n\treturn a;\n}\n\n\n\n\n// Objects\n\nvar serialize = function(obj) {\n\tvar str = [];\n\tfor ( var p in obj ) {\n\t\tif ( obj.hasOwnProperty(p) ) {\n\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\n\t\t}\n\t}\n\treturn str.join(\"&\");\n}\n\n\n\n\n// Strings\n\nif ( !String.prototype.trim ) {\n\tString.prototype.trim = function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g,'');\n\t};\n}\n\nString.prototype.toCamelCase = function() {\n\treturn this.replace(/(\\-[a-z])/g, function($1) { return $1.toUpperCase().replace('-',''); } );\n}\n\nString.prototype.bool = function() {\n    return (/^true$/i).test(this);\n}","/* =========================================================\r\n * bootstrap-datepicker.js\r\n * Repo: https://github.com/eternicode/bootstrap-datepicker/\r\n * Demo: http://eternicode.github.io/bootstrap-datepicker/\r\n * Docs: http://bootstrap-datepicker.readthedocs.org/\r\n * Forked from http://www.eyecon.ro/bootstrap-datepicker\r\n * =========================================================\r\n * Started by Stefan Petre; improvements by Andrew Rowls + contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n(function($, undefined){\r\n\r\n\tvar $window = $(window);\r\n\r\n\tfunction UTCDate(){\r\n\t\treturn new Date(Date.UTC.apply(Date, arguments));\r\n\t}\r\n\tfunction UTCToday(){\r\n\t\tvar today = new Date();\r\n\t\treturn UTCDate(today.getFullYear(), today.getMonth(), today.getDate());\r\n\t}\r\n\tfunction alias(method){\r\n\t\treturn function(){\r\n\t\t\treturn this[method].apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tvar DateArray = (function(){\r\n\t\tvar extras = {\r\n\t\t\tget: function(i){\r\n\t\t\t\treturn this.slice(i)[0];\r\n\t\t\t},\r\n\t\t\tcontains: function(d){\r\n\t\t\t\t// Array.indexOf is not cross-browser;\r\n\t\t\t\t// $.inArray doesn't work with Dates\r\n\t\t\t\tvar val = d && d.valueOf();\r\n\t\t\t\tfor (var i=0, l=this.length; i < l; i++)\r\n\t\t\t\t\tif (this[i].valueOf() === val)\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\t\t\tremove: function(i){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t},\r\n\t\t\treplace: function(new_array){\r\n\t\t\t\tif (!new_array)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tif (!$.isArray(new_array))\r\n\t\t\t\t\tnew_array = [new_array];\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tthis.push.apply(this, new_array);\r\n\t\t\t},\r\n\t\t\tclear: function(){\r\n\t\t\t\tthis.splice(0);\r\n\t\t\t},\r\n\t\t\tcopy: function(){\r\n\t\t\t\tvar a = new DateArray();\r\n\t\t\t\ta.replace(this);\r\n\t\t\t\treturn a;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn function(){\r\n\t\t\tvar a = [];\r\n\t\t\ta.push.apply(a, arguments);\r\n\t\t\t$.extend(a, extras);\r\n\t\t\treturn a;\r\n\t\t};\r\n\t})();\r\n\r\n\r\n\t// Picker object\r\n\r\n\tvar Datepicker = function(element, options){\r\n\t\tthis.dates = new DateArray();\r\n\t\tthis.viewDate = UTCToday();\r\n\t\tthis.focusDate = null;\r\n\r\n\t\tthis._process_options(options);\r\n\r\n\t\tthis.element = $(element);\r\n\t\tthis.isInline = false;\r\n\t\tthis.isInput = this.element.is('input');\r\n\t\tthis.component = this.element.is('.date') ? this.element.find('.add-on, .input-group-addon, .btn') : false;\r\n\t\tthis.hasInput = this.component && this.element.find('input').length;\r\n\t\tif (this.component && this.component.length === 0)\r\n\t\t\tthis.component = false;\r\n\r\n\t\tthis.picker = $(DPGlobal.template);\r\n\t\tthis._buildEvents();\r\n\t\tthis._attachEvents();\r\n\r\n\t\tif (this.isInline){\r\n\t\t\tthis.picker.addClass('datepicker-inline').appendTo(this.element);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.picker.addClass('datepicker-dropdown dropdown-menu');\r\n\t\t}\r\n\r\n\t\tif (this.o.rtl){\r\n\t\t\tthis.picker.addClass('datepicker-rtl');\r\n\t\t}\r\n\r\n\t\tthis.viewMode = this.o.startView;\r\n\r\n\t\tif (this.o.calendarWeeks)\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t\t\t.attr('colspan', function(i, val){\r\n\t\t\t\t\t\t\treturn parseInt(val) + 1;\r\n\t\t\t\t\t\t});\r\n\r\n\t\tthis._allow_update = false;\r\n\r\n\t\tthis.setStartDate(this._o.startDate);\r\n\t\tthis.setEndDate(this._o.endDate);\r\n\t\tthis.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);\r\n\r\n\t\tthis.fillDow();\r\n\t\tthis.fillMonths();\r\n\r\n\t\tthis._allow_update = true;\r\n\r\n\t\tthis.update();\r\n\t\tthis.showMode();\r\n\r\n\t\tif (this.isInline){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tDatepicker.prototype = {\r\n\t\tconstructor: Datepicker,\r\n\r\n\t\t_process_options: function(opts){\r\n\t\t\t// Store raw options for reference\r\n\t\t\tthis._o = $.extend({}, this._o, opts);\r\n\t\t\t// Processed options\r\n\t\t\tvar o = this.o = $.extend({}, this._o);\r\n\r\n\t\t\t// Check if \"de-DE\" style date is available, if not language should\r\n\t\t\t// fallback to 2 letter code eg \"de\"\r\n\t\t\tvar lang = o.language;\r\n\t\t\tif (!dates[lang]){\r\n\t\t\t\tlang = lang.split('-')[0];\r\n\t\t\t\tif (!dates[lang])\r\n\t\t\t\t\tlang = defaults.language;\r\n\t\t\t}\r\n\t\t\to.language = lang;\r\n\r\n\t\t\tswitch (o.startView){\r\n\t\t\t\tcase 2:\r\n\t\t\t\tcase 'decade':\r\n\t\t\t\t\to.startView = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\to.startView = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\to.startView = 0;\r\n\t\t\t}\r\n\r\n\t\t\tswitch (o.minViewMode){\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 'months':\r\n\t\t\t\t\to.minViewMode = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\tcase 'years':\r\n\t\t\t\t\to.minViewMode = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\to.minViewMode = 0;\r\n\t\t\t}\r\n\r\n\t\t\to.startView = Math.max(o.startView, o.minViewMode);\r\n\r\n\t\t\t// true, false, or Number > 0\r\n\t\t\tif (o.multidate !== true){\r\n\t\t\t\to.multidate = Number(o.multidate) || false;\r\n\t\t\t\tif (o.multidate !== false)\r\n\t\t\t\t\to.multidate = Math.max(0, o.multidate);\r\n\t\t\t\telse\r\n\t\t\t\t\to.multidate = 1;\r\n\t\t\t}\r\n\t\t\to.multidateSeparator = String(o.multidateSeparator);\r\n\r\n\t\t\to.weekStart %= 7;\r\n\t\t\to.weekEnd = ((o.weekStart + 6) % 7);\r\n\r\n\t\t\tvar format = DPGlobal.parseFormat(o.format);\r\n\t\t\tif (o.startDate !== -Infinity){\r\n\t\t\t\tif (!!o.startDate){\r\n\t\t\t\t\tif (o.startDate instanceof Date)\r\n\t\t\t\t\t\to.startDate = this._local_to_utc(this._zero_time(o.startDate));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to.startDate = DPGlobal.parseDate(o.startDate, format, o.language);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\to.startDate = -Infinity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (o.endDate !== Infinity){\r\n\t\t\t\tif (!!o.endDate){\r\n\t\t\t\t\tif (o.endDate instanceof Date)\r\n\t\t\t\t\t\to.endDate = this._local_to_utc(this._zero_time(o.endDate));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\to.endDate = DPGlobal.parseDate(o.endDate, format, o.language);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\to.endDate = Infinity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\to.daysOfWeekDisabled = o.daysOfWeekDisabled||[];\r\n\t\t\tif (!$.isArray(o.daysOfWeekDisabled))\r\n\t\t\t\to.daysOfWeekDisabled = o.daysOfWeekDisabled.split(/[,\\s]*/);\r\n\t\t\to.daysOfWeekDisabled = $.map(o.daysOfWeekDisabled, function(d){\r\n\t\t\t\treturn parseInt(d, 10);\r\n\t\t\t});\r\n\r\n\t\t\tvar plc = String(o.orientation).toLowerCase().split(/\\s+/g),\r\n\t\t\t\t_plc = o.orientation.toLowerCase();\r\n\t\t\tplc = $.grep(plc, function(word){\r\n\t\t\t\treturn (/^auto|left|right|top|bottom$/).test(word);\r\n\t\t\t});\r\n\t\t\to.orientation = {x: 'auto', y: 'auto'};\r\n\t\t\tif (!_plc || _plc === 'auto')\r\n\t\t\t\t; // no action\r\n\t\t\telse if (plc.length === 1){\r\n\t\t\t\tswitch (plc[0]){\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\to.orientation.y = plc[0];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\to.orientation.x = plc[0];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t_plc = $.grep(plc, function(word){\r\n\t\t\t\t\treturn (/^left|right$/).test(word);\r\n\t\t\t\t});\r\n\t\t\t\to.orientation.x = _plc[0] || 'auto';\r\n\r\n\t\t\t\t_plc = $.grep(plc, function(word){\r\n\t\t\t\t\treturn (/^top|bottom$/).test(word);\r\n\t\t\t\t});\r\n\t\t\t\to.orientation.y = _plc[0] || 'auto';\r\n\t\t\t}\r\n\t\t},\r\n\t\t_events: [],\r\n\t\t_secondaryEvents: [],\r\n\t\t_applyEvents: function(evs){\r\n\t\t\tfor (var i=0, el, ch, ev; i < evs.length; i++){\r\n\t\t\t\tel = evs[i][0];\r\n\t\t\t\tif (evs[i].length === 2){\r\n\t\t\t\t\tch = undefined;\r\n\t\t\t\t\tev = evs[i][1];\r\n\t\t\t\t}\r\n\t\t\t\telse if (evs[i].length === 3){\r\n\t\t\t\t\tch = evs[i][1];\r\n\t\t\t\t\tev = evs[i][2];\r\n\t\t\t\t}\r\n\t\t\t\tel.on(ev, ch);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_unapplyEvents: function(evs){\r\n\t\t\tfor (var i=0, el, ev, ch; i < evs.length; i++){\r\n\t\t\t\tel = evs[i][0];\r\n\t\t\t\tif (evs[i].length === 2){\r\n\t\t\t\t\tch = undefined;\r\n\t\t\t\t\tev = evs[i][1];\r\n\t\t\t\t}\r\n\t\t\t\telse if (evs[i].length === 3){\r\n\t\t\t\t\tch = evs[i][1];\r\n\t\t\t\t\tev = evs[i][2];\r\n\t\t\t\t}\r\n\t\t\t\tel.off(ev, ch);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_buildEvents: function(){\r\n\t\t\tif (this.isInput){ // single input\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tfocus: $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup: $.proxy(function(e){\r\n\t\t\t\t\t\t\tif ($.inArray(e.keyCode, [27,37,39,38,40,32,13,9]) === -1)\r\n\t\t\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\t}, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.component && this.hasInput){ // component: input + button\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t// For components that are not readonly, allow keyboard nav\r\n\t\t\t\t\t[this.element.find('input'), {\r\n\t\t\t\t\t\tfocus: $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup: $.proxy(function(e){\r\n\t\t\t\t\t\t\tif ($.inArray(e.keyCode, [27,37,39,38,40,32,13,9]) === -1)\r\n\t\t\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\t}, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[this.component, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.element.is('div')){  // inline datepicker\r\n\t\t\t\tthis.isInline = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tthis._events.push(\r\n\t\t\t\t// Component: listen for blur on element descendants\r\n\t\t\t\t[this.element, '*', {\r\n\t\t\t\t\tblur: $.proxy(function(e){\r\n\t\t\t\t\t\tthis._focused_from = e.target;\r\n\t\t\t\t\t}, this)\r\n\t\t\t\t}],\r\n\t\t\t\t// Input: listen for blur on element\r\n\t\t\t\t[this.element, {\r\n\t\t\t\t\tblur: $.proxy(function(e){\r\n\t\t\t\t\t\tthis._focused_from = e.target;\r\n\t\t\t\t\t}, this)\r\n\t\t\t\t}]\r\n\t\t\t);\r\n\r\n\t\t\tthis._secondaryEvents = [\r\n\t\t\t\t[this.picker, {\r\n\t\t\t\t\tclick: $.proxy(this.click, this)\r\n\t\t\t\t}],\r\n\t\t\t\t[$(window), {\r\n\t\t\t\t\tresize: $.proxy(this.place, this)\r\n\t\t\t\t}],\r\n\t\t\t\t[$(document), {\r\n\t\t\t\t\t'mousedown touchstart': $.proxy(function(e){\r\n\t\t\t\t\t\t// Clicked outside the datepicker, hide it\r\n\t\t\t\t\t\tif (!(\r\n\t\t\t\t\t\t\tthis.element.is(e.target) ||\r\n\t\t\t\t\t\t\tthis.element.find(e.target).length ||\r\n\t\t\t\t\t\t\tthis.picker.is(e.target) ||\r\n\t\t\t\t\t\t\tthis.picker.find(e.target).length\r\n\t\t\t\t\t\t)){\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, this)\r\n\t\t\t\t}]\r\n\t\t\t];\r\n\t\t},\r\n\t\t_attachEvents: function(){\r\n\t\t\tthis._detachEvents();\r\n\t\t\tthis._applyEvents(this._events);\r\n\t\t},\r\n\t\t_detachEvents: function(){\r\n\t\t\tthis._unapplyEvents(this._events);\r\n\t\t},\r\n\t\t_attachSecondaryEvents: function(){\r\n\t\t\tthis._detachSecondaryEvents();\r\n\t\t\tthis._applyEvents(this._secondaryEvents);\r\n\t\t},\r\n\t\t_detachSecondaryEvents: function(){\r\n\t\t\tthis._unapplyEvents(this._secondaryEvents);\r\n\t\t},\r\n\t\t_trigger: function(event, altdate){\r\n\t\t\tvar date = altdate || this.dates.get(-1),\r\n\t\t\t\tlocal_date = this._utc_to_local(date);\r\n\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: event,\r\n\t\t\t\tdate: local_date,\r\n\t\t\t\tdates: $.map(this.dates, this._utc_to_local),\r\n\t\t\t\tformat: $.proxy(function(ix, format){\r\n\t\t\t\t\tif (arguments.length === 0){\r\n\t\t\t\t\t\tix = this.dates.length - 1;\r\n\t\t\t\t\t\tformat = this.o.format;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (typeof ix === 'string'){\r\n\t\t\t\t\t\tformat = ix;\r\n\t\t\t\t\t\tix = this.dates.length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tformat = format || this.o.format;\r\n\t\t\t\t\tvar date = this.dates.get(ix);\r\n\t\t\t\t\treturn DPGlobal.formatDate(date, format, this.o.language);\r\n\t\t\t\t}, this)\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tshow: function(){\r\n\t\t\tif (!this.isInline)\r\n\t\t\t\tthis.picker.appendTo('body');\r\n\t\t\tthis.picker.show();\r\n\t\t\tthis.place();\r\n\t\t\tthis._attachSecondaryEvents();\r\n\t\t\tthis._trigger('show');\r\n\t\t},\r\n\r\n\t\thide: function(){\r\n\t\t\tif (this.isInline)\r\n\t\t\t\treturn;\r\n\t\t\tif (!this.picker.is(':visible'))\r\n\t\t\t\treturn;\r\n\t\t\tthis.focusDate = null;\r\n\t\t\tthis.picker.hide().detach();\r\n\t\t\tthis._detachSecondaryEvents();\r\n\t\t\tthis.viewMode = this.o.startView;\r\n\t\t\tthis.showMode();\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.o.forceParse &&\r\n\t\t\t\t(\r\n\t\t\t\t\tthis.isInput && this.element.val() ||\r\n\t\t\t\t\tthis.hasInput && this.element.find('input').val()\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t\tthis.setValue();\r\n\t\t\tthis._trigger('hide');\r\n\t\t},\r\n\r\n\t\tremove: function(){\r\n\t\t\tthis.hide();\r\n\t\t\tthis._detachEvents();\r\n\t\t\tthis._detachSecondaryEvents();\r\n\t\t\tthis.picker.remove();\r\n\t\t\tdelete this.element.data().datepicker;\r\n\t\t\tif (!this.isInput){\r\n\t\t\t\tdelete this.element.data().date;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_utc_to_local: function(utc){\r\n\t\t\treturn utc && new Date(utc.getTime() + (utc.getTimezoneOffset()*60000));\r\n\t\t},\r\n\t\t_local_to_utc: function(local){\r\n\t\t\treturn local && new Date(local.getTime() - (local.getTimezoneOffset()*60000));\r\n\t\t},\r\n\t\t_zero_time: function(local){\r\n\t\t\treturn local && new Date(local.getFullYear(), local.getMonth(), local.getDate());\r\n\t\t},\r\n\t\t_zero_utc_time: function(utc){\r\n\t\t\treturn utc && new Date(Date.UTC(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate()));\r\n\t\t},\r\n\r\n\t\tgetDates: function(){\r\n\t\t\treturn $.map(this.dates, this._utc_to_local);\r\n\t\t},\r\n\r\n\t\tgetUTCDates: function(){\r\n\t\t\treturn $.map(this.dates, function(d){\r\n\t\t\t\treturn new Date(d);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetDate: function(){\r\n\t\t\treturn this._utc_to_local(this.getUTCDate());\r\n\t\t},\r\n\r\n\t\tgetUTCDate: function(){\r\n\t\t\treturn new Date(this.dates.get(-1));\r\n\t\t},\r\n\r\n\t\tsetDates: function(){\r\n\t\t\tvar args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n\t\t\tthis.update.apply(this, args);\r\n\t\t\tthis._trigger('changeDate');\r\n\t\t\tthis.setValue();\r\n\t\t},\r\n\r\n\t\tsetUTCDates: function(){\r\n\t\t\tvar args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n\t\t\tthis.update.apply(this, $.map(args, this._utc_to_local));\r\n\t\t\tthis._trigger('changeDate');\r\n\t\t\tthis.setValue();\r\n\t\t},\r\n\r\n\t\tsetDate: alias('setDates'),\r\n\t\tsetUTCDate: alias('setUTCDates'),\r\n\r\n\t\tsetValue: function(){\r\n\t\t\tvar formatted = this.getFormattedDate();\r\n\t\t\tif (!this.isInput){\r\n\t\t\t\tif (this.component){\r\n\t\t\t\t\tthis.element.find('input').val(formatted).change();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.element.val(formatted).change();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetFormattedDate: function(format){\r\n\t\t\tif (format === undefined)\r\n\t\t\t\tformat = this.o.format;\r\n\r\n\t\t\tvar lang = this.o.language;\r\n\t\t\treturn $.map(this.dates, function(d){\r\n\t\t\t\treturn DPGlobal.formatDate(d, format, lang);\r\n\t\t\t}).join(this.o.multidateSeparator);\r\n\t\t},\r\n\r\n\t\tsetStartDate: function(startDate){\r\n\t\t\tthis._process_options({startDate: startDate});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetEndDate: function(endDate){\r\n\t\t\tthis._process_options({endDate: endDate});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetDaysOfWeekDisabled: function(daysOfWeekDisabled){\r\n\t\t\tthis._process_options({daysOfWeekDisabled: daysOfWeekDisabled});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tplace: function(){\r\n\t\t\tif (this.isInline)\r\n\t\t\t\treturn;\r\n\t\t\tvar calendarWidth = this.picker.outerWidth(),\r\n\t\t\t\tcalendarHeight = this.picker.outerHeight(),\r\n\t\t\t\tvisualPadding = 10,\r\n\t\t\t\twindowWidth = $window.width(),\r\n\t\t\t\twindowHeight = $window.height(),\r\n\t\t\t\tscrollTop = $window.scrollTop();\r\n\r\n\t\t\tvar zIndex = parseInt(this.element.parents().filter(function(){\r\n\t\t\t\t\treturn $(this).css('z-index') !== 'auto';\r\n\t\t\t\t}).first().css('z-index'))+10;\r\n\t\t\tvar offset = this.component ? this.component.parent().offset() : this.element.offset();\r\n\t\t\tvar height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);\r\n\t\t\tvar width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);\r\n\t\t\tvar left = offset.left,\r\n\t\t\t\ttop = offset.top;\r\n\r\n\t\t\tthis.picker.removeClass(\r\n\t\t\t\t'datepicker-orient-top datepicker-orient-bottom '+\r\n\t\t\t\t'datepicker-orient-right datepicker-orient-left'\r\n\t\t\t);\r\n\r\n\t\t\tif (this.o.orientation.x !== 'auto'){\r\n\t\t\t\tthis.picker.addClass('datepicker-orient-' + this.o.orientation.x);\r\n\t\t\t\tif (this.o.orientation.x === 'right')\r\n\t\t\t\t\tleft -= calendarWidth - width;\r\n\t\t\t}\r\n\t\t\t// auto x orientation is best-placement: if it crosses a window\r\n\t\t\t// edge, fudge it sideways\r\n\t\t\telse {\r\n\t\t\t\t// Default to left\r\n\t\t\t\tthis.picker.addClass('datepicker-orient-left');\r\n\t\t\t\tif (offset.left < 0)\r\n\t\t\t\t\tleft -= offset.left - visualPadding;\r\n\t\t\t\telse if (offset.left + calendarWidth > windowWidth)\r\n\t\t\t\t\tleft = windowWidth - calendarWidth - visualPadding;\r\n\t\t\t}\r\n\r\n\t\t\t// auto y orientation is best-situation: top or bottom, no fudging,\r\n\t\t\t// decision based on which shows more of the calendar\r\n\t\t\tvar yorient = this.o.orientation.y,\r\n\t\t\t\ttop_overflow, bottom_overflow;\r\n\t\t\tif (yorient === 'auto'){\r\n\t\t\t\ttop_overflow = -scrollTop + offset.top - calendarHeight;\r\n\t\t\t\tbottom_overflow = scrollTop + windowHeight - (offset.top + height + calendarHeight);\r\n\t\t\t\tif (Math.max(top_overflow, bottom_overflow) === bottom_overflow)\r\n\t\t\t\t\tyorient = 'top';\r\n\t\t\t\telse\r\n\t\t\t\t\tyorient = 'bottom';\r\n\t\t\t}\r\n\t\t\tthis.picker.addClass('datepicker-orient-' + yorient);\r\n\t\t\tif (yorient === 'top')\r\n\t\t\t\ttop += height;\r\n\t\t\telse\r\n\t\t\t\ttop -= calendarHeight + parseInt(this.picker.css('padding-top'));\r\n\r\n\t\t\tthis.picker.css({\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left,\r\n\t\t\t\tzIndex: zIndex\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_allow_update: true,\r\n\t\tupdate: function(){\r\n\t\t\tif (!this._allow_update)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldDates = this.dates.copy(),\r\n\t\t\t\tdates = [],\r\n\t\t\t\tfromArgs = false;\r\n\t\t\tif (arguments.length){\r\n\t\t\t\t$.each(arguments, $.proxy(function(i, date){\r\n\t\t\t\t\tif (date instanceof Date)\r\n\t\t\t\t\t\tdate = this._local_to_utc(date);\r\n\t\t\t\t\tdates.push(date);\r\n\t\t\t\t}, this));\r\n\t\t\t\tfromArgs = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdates = this.isInput\r\n\t\t\t\t\t\t? this.element.val()\r\n\t\t\t\t\t\t: this.element.data('date') || this.element.find('input').val();\r\n\t\t\t\tif (dates && this.o.multidate)\r\n\t\t\t\t\tdates = dates.split(this.o.multidateSeparator);\r\n\t\t\t\telse\r\n\t\t\t\t\tdates = [dates];\r\n\t\t\t\tdelete this.element.data().date;\r\n\t\t\t}\r\n\r\n\t\t\tdates = $.map(dates, $.proxy(function(date){\r\n\t\t\t\treturn DPGlobal.parseDate(date, this.o.format, this.o.language);\r\n\t\t\t}, this));\r\n\t\t\tdates = $.grep(dates, $.proxy(function(date){\r\n\t\t\t\treturn (\r\n\t\t\t\t\tdate < this.o.startDate ||\r\n\t\t\t\t\tdate > this.o.endDate ||\r\n\t\t\t\t\t!date\r\n\t\t\t\t);\r\n\t\t\t}, this), true);\r\n\t\t\tthis.dates.replace(dates);\r\n\r\n\t\t\tif (this.dates.length)\r\n\t\t\t\tthis.viewDate = new Date(this.dates.get(-1));\r\n\t\t\telse if (this.viewDate < this.o.startDate)\r\n\t\t\t\tthis.viewDate = new Date(this.o.startDate);\r\n\t\t\telse if (this.viewDate > this.o.endDate)\r\n\t\t\t\tthis.viewDate = new Date(this.o.endDate);\r\n\r\n\t\t\tif (fromArgs){\r\n\t\t\t\t// setting date by clicking\r\n\t\t\t\tthis.setValue();\r\n\t\t\t}\r\n\t\t\telse if (dates.length){\r\n\t\t\t\t// setting date by typing\r\n\t\t\t\tif (String(oldDates) !== String(this.dates))\r\n\t\t\t\t\tthis._trigger('changeDate');\r\n\t\t\t}\r\n\t\t\tif (!this.dates.length && oldDates.length)\r\n\t\t\t\tthis._trigger('clearDate');\r\n\r\n\t\t\tthis.fill();\r\n\t\t},\r\n\r\n\t\tfillDow: function(){\r\n\t\t\tvar dowCnt = this.o.weekStart,\r\n\t\t\t\thtml = '<tr>';\r\n\t\t\tif (this.o.calendarWeeks){\r\n\t\t\t\tvar cell = '<th class=\"cw\">&nbsp;</th>';\r\n\t\t\t\thtml += cell;\r\n\t\t\t\tthis.picker.find('.datepicker-days thead tr:first-child').prepend(cell);\r\n\t\t\t}\r\n\t\t\twhile (dowCnt < this.o.weekStart + 7){\r\n\t\t\t\thtml += '<th class=\"dow\">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';\r\n\t\t\t}\r\n\t\t\thtml += '</tr>';\r\n\t\t\tthis.picker.find('.datepicker-days thead').append(html);\r\n\t\t},\r\n\r\n\t\tfillMonths: function(){\r\n\t\t\tvar html = '',\r\n\t\t\ti = 0;\r\n\t\t\twhile (i < 12){\r\n\t\t\t\thtml += '<span class=\"month\">'+dates[this.o.language].monthsShort[i++]+'</span>';\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datepicker-months td').html(html);\r\n\t\t},\r\n\r\n\t\tsetRange: function(range){\r\n\t\t\tif (!range || !range.length)\r\n\t\t\t\tdelete this.range;\r\n\t\t\telse\r\n\t\t\t\tthis.range = $.map(range, function(d){\r\n\t\t\t\t\treturn d.valueOf();\r\n\t\t\t\t});\r\n\t\t\tthis.fill();\r\n\t\t},\r\n\r\n\t\tgetClassNames: function(date){\r\n\t\t\tvar cls = [],\r\n\t\t\t\tyear = this.viewDate.getUTCFullYear(),\r\n\t\t\t\tmonth = this.viewDate.getUTCMonth(),\r\n\t\t\t\ttoday = new Date();\r\n\t\t\tif (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)){\r\n\t\t\t\tcls.push('old');\r\n\t\t\t}\r\n\t\t\telse if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)){\r\n\t\t\t\tcls.push('new');\r\n\t\t\t}\r\n\t\t\tif (this.focusDate && date.valueOf() === this.focusDate.valueOf())\r\n\t\t\t\tcls.push('focused');\r\n\t\t\t// Compare internal UTC date with local today, not UTC today\r\n\t\t\tif (this.o.todayHighlight &&\r\n\t\t\t\tdate.getUTCFullYear() === today.getFullYear() &&\r\n\t\t\t\tdate.getUTCMonth() === today.getMonth() &&\r\n\t\t\t\tdate.getUTCDate() === today.getDate()){\r\n\t\t\t\tcls.push('today');\r\n\t\t\t}\r\n\t\t\tif (this.dates.contains(date) !== -1)\r\n\t\t\t\tcls.push('active');\r\n\t\t\tif (date.valueOf() < this.o.startDate || date.valueOf() > this.o.endDate ||\r\n\t\t\t\t$.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1){\r\n\t\t\t\tcls.push('disabled');\r\n\t\t\t}\r\n\t\t\tif (this.range){\r\n\t\t\t\tif (date > this.range[0] && date < this.range[this.range.length-1]){\r\n\t\t\t\t\tcls.push('range');\r\n\t\t\t\t}\r\n\t\t\t\tif ($.inArray(date.valueOf(), this.range) !== -1){\r\n\t\t\t\t\tcls.push('selected');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cls;\r\n\t\t},\r\n\r\n\t\tfill: function(){\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tstartYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,\r\n\t\t\t\tstartMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,\r\n\t\t\t\tendYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,\r\n\t\t\t\tendMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,\r\n\t\t\t\ttodaytxt = dates[this.o.language].today || dates['en'].today || '',\r\n\t\t\t\tcleartxt = dates[this.o.language].clear || dates['en'].clear || '',\r\n\t\t\t\ttooltip;\r\n\t\t\tthis.picker.find('.datepicker-days thead th.datepicker-switch')\r\n\t\t\t\t\t\t.text(dates[this.o.language].months[month]+' '+year);\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t\t\t.text(todaytxt)\r\n\t\t\t\t\t\t.toggle(this.o.todayBtn !== false);\r\n\t\t\tthis.picker.find('tfoot th.clear')\r\n\t\t\t\t\t\t.text(cleartxt)\r\n\t\t\t\t\t\t.toggle(this.o.clearBtn !== false);\r\n\t\t\tthis.updateNavArrows();\r\n\t\t\tthis.fillMonths();\r\n\t\t\tvar prevMonth = UTCDate(year, month-1, 28),\r\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\r\n\t\t\tprevMonth.setUTCDate(day);\r\n\t\t\tprevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7)%7);\r\n\t\t\tvar nextMonth = new Date(prevMonth);\r\n\t\t\tnextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n\t\t\tnextMonth = nextMonth.valueOf();\r\n\t\t\tvar html = [];\r\n\t\t\tvar clsName;\r\n\t\t\twhile (prevMonth.valueOf() < nextMonth){\r\n\t\t\t\tif (prevMonth.getUTCDay() === this.o.weekStart){\r\n\t\t\t\t\thtml.push('<tr>');\r\n\t\t\t\t\tif (this.o.calendarWeeks){\r\n\t\t\t\t\t\t// ISO 8601: First week contains first thursday.\r\n\t\t\t\t\t\t// ISO also states week starts on Monday, but we can be more abstract here.\r\n\t\t\t\t\t\tvar\r\n\t\t\t\t\t\t\t// Start of current week: based on weekstart/current date\r\n\t\t\t\t\t\t\tws = new Date(+prevMonth + (this.o.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),\r\n\t\t\t\t\t\t\t// Thursday of this week\r\n\t\t\t\t\t\t\tth = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),\r\n\t\t\t\t\t\t\t// First Thursday of year, year from thursday\r\n\t\t\t\t\t\t\tyth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay())%7*864e5),\r\n\t\t\t\t\t\t\t// Calendar week: ms between thursdays, div ms per day, div 7 days\r\n\t\t\t\t\t\t\tcalWeek =  (th - yth) / 864e5 / 7 + 1;\r\n\t\t\t\t\t\thtml.push('<td class=\"cw\">'+ calWeek +'</td>');\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tclsName = this.getClassNames(prevMonth);\r\n\t\t\t\tclsName.push('day');\r\n\r\n\t\t\t\tif (this.o.beforeShowDay !== $.noop){\r\n\t\t\t\t\tvar before = this.o.beforeShowDay(this._utc_to_local(prevMonth));\r\n\t\t\t\t\tif (before === undefined)\r\n\t\t\t\t\t\tbefore = {};\r\n\t\t\t\t\telse if (typeof(before) === 'boolean')\r\n\t\t\t\t\t\tbefore = {enabled: before};\r\n\t\t\t\t\telse if (typeof(before) === 'string')\r\n\t\t\t\t\t\tbefore = {classes: before};\r\n\t\t\t\t\tif (before.enabled === false)\r\n\t\t\t\t\t\tclsName.push('disabled');\r\n\t\t\t\t\tif (before.classes)\r\n\t\t\t\t\t\tclsName = clsName.concat(before.classes.split(/\\s+/));\r\n\t\t\t\t\tif (before.tooltip)\r\n\t\t\t\t\t\ttooltip = before.tooltip;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclsName = $.unique(clsName);\r\n\t\t\t\thtml.push('<td class=\"'+clsName.join(' ')+'\"' + (tooltip ? ' title=\"'+tooltip+'\"' : '') + '>'+prevMonth.getUTCDate() + '</td>');\r\n\t\t\t\tif (prevMonth.getUTCDay() === this.o.weekEnd){\r\n\t\t\t\t\thtml.push('</tr>');\r\n\t\t\t\t}\r\n\t\t\t\tprevMonth.setUTCDate(prevMonth.getUTCDate()+1);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n\r\n\t\t\tvar months = this.picker.find('.datepicker-months')\r\n\t\t\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t\t\t\t.text(year)\r\n\t\t\t\t\t\t\t.end()\r\n\t\t\t\t\t\t.find('span').removeClass('active');\r\n\r\n\t\t\t$.each(this.dates, function(i, d){\r\n\t\t\t\tif (d.getUTCFullYear() === year)\r\n\t\t\t\t\tmonths.eq(d.getUTCMonth()).addClass('active');\r\n\t\t\t});\r\n\r\n\t\t\tif (year < startYear || year > endYear){\r\n\t\t\t\tmonths.addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year === startYear){\r\n\t\t\t\tmonths.slice(0, startMonth).addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year === endYear){\r\n\t\t\t\tmonths.slice(endMonth+1).addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\thtml = '';\r\n\t\t\tyear = parseInt(year/10, 10) * 10;\r\n\t\t\tvar yearCont = this.picker.find('.datepicker-years')\r\n\t\t\t\t\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t\t\t\t\t\t.text(year + '-' + (year + 9))\r\n\t\t\t\t\t\t\t\t\t.end()\r\n\t\t\t\t\t\t\t\t.find('td');\r\n\t\t\tyear -= 1;\r\n\t\t\tvar years = $.map(this.dates, function(d){\r\n\t\t\t\t\treturn d.getUTCFullYear();\r\n\t\t\t\t}),\r\n\t\t\t\tclasses;\r\n\t\t\tfor (var i = -1; i < 11; i++){\r\n\t\t\t\tclasses = ['year'];\r\n\t\t\t\tif (i === -1)\r\n\t\t\t\t\tclasses.push('old');\r\n\t\t\t\telse if (i === 10)\r\n\t\t\t\t\tclasses.push('new');\r\n\t\t\t\tif ($.inArray(year, years) !== -1)\r\n\t\t\t\t\tclasses.push('active');\r\n\t\t\t\tif (year < startYear || year > endYear)\r\n\t\t\t\t\tclasses.push('disabled');\r\n\t\t\t\thtml += '<span class=\"' + classes.join(' ') + '\">'+year+'</span>';\r\n\t\t\t\tyear += 1;\r\n\t\t\t}\r\n\t\t\tyearCont.html(html);\r\n\t\t},\r\n\r\n\t\tupdateNavArrows: function(){\r\n\t\t\tif (!this._allow_update)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth();\r\n\t\t\tswitch (this.viewMode){\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() && month <= this.o.startDate.getUTCMonth()){\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() && month >= this.o.endDate.getUTCMonth()){\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear()){\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear()){\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclick: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar target = $(e.target).closest('span, td, th'),\r\n\t\t\t\tyear, month, day;\r\n\t\t\tif (target.length === 1){\r\n\t\t\t\tswitch (target[0].nodeName.toLowerCase()){\r\n\t\t\t\t\tcase 'th':\r\n\t\t\t\t\t\tswitch (target[0].className){\r\n\t\t\t\t\t\t\tcase 'datepicker-switch':\r\n\t\t\t\t\t\t\t\tthis.showMode(1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'prev':\r\n\t\t\t\t\t\t\tcase 'next':\r\n\t\t\t\t\t\t\t\tvar dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);\r\n\t\t\t\t\t\t\t\tswitch (this.viewMode){\r\n\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tif (this.viewMode === 1)\r\n\t\t\t\t\t\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'today':\r\n\t\t\t\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\t\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n\r\n\t\t\t\t\t\t\t\tthis.showMode(-2);\r\n\t\t\t\t\t\t\t\tvar which = this.o.todayBtn === 'linked' ? null : 'view';\r\n\t\t\t\t\t\t\t\tthis._setDate(date, which);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'clear':\r\n\t\t\t\t\t\t\t\tvar element;\r\n\t\t\t\t\t\t\t\tif (this.isInput)\r\n\t\t\t\t\t\t\t\t\telement = this.element;\r\n\t\t\t\t\t\t\t\telse if (this.component)\r\n\t\t\t\t\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t\t\t\t\tif (element)\r\n\t\t\t\t\t\t\t\t\telement.val(\"\").change();\r\n\t\t\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\t\t\tthis._trigger('changeDate');\r\n\t\t\t\t\t\t\t\tif (this.o.autoclose)\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'span':\r\n\t\t\t\t\t\tif (!target.is('.disabled')){\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\tif (target.is('.month')){\r\n\t\t\t\t\t\t\t\tday = 1;\r\n\t\t\t\t\t\t\t\tmonth = target.parent().find('span').index(target);\r\n\t\t\t\t\t\t\t\tyear = this.viewDate.getUTCFullYear();\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month);\r\n\t\t\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\r\n\t\t\t\t\t\t\t\tif (this.o.minViewMode === 1){\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tday = 1;\r\n\t\t\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t\t\t\tyear = parseInt(target.text(), 10)||0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\r\n\t\t\t\t\t\t\t\tif (this.o.minViewMode === 2){\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'td':\r\n\t\t\t\t\t\tif (target.is('.day') && !target.is('.disabled')){\r\n\t\t\t\t\t\t\tday = parseInt(target.text(), 10)||1;\r\n\t\t\t\t\t\t\tyear = this.viewDate.getUTCFullYear();\r\n\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth();\r\n\t\t\t\t\t\t\tif (target.is('.old')){\r\n\t\t\t\t\t\t\t\tif (month === 0){\r\n\t\t\t\t\t\t\t\t\tmonth = 11;\r\n\t\t\t\t\t\t\t\t\tyear -= 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tmonth -= 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (target.is('.new')){\r\n\t\t\t\t\t\t\t\tif (month === 11){\r\n\t\t\t\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t\t\t\t\tyear += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tmonth += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.picker.is(':visible') && this._focused_from){\r\n\t\t\t\t$(this._focused_from).focus();\r\n\t\t\t}\r\n\t\t\tdelete this._focused_from;\r\n\t\t},\r\n\r\n\t\t_toggle_multidate: function(date){\r\n\t\t\tvar ix = this.dates.contains(date);\r\n\t\t\tif (!date){\r\n\t\t\t\tthis.dates.clear();\r\n\t\t\t}\r\n\t\t\telse if (ix !== -1){\r\n\t\t\t\tthis.dates.remove(ix);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.dates.push(date);\r\n\t\t\t}\r\n\t\t\tif (typeof this.o.multidate === 'number')\r\n\t\t\t\twhile (this.dates.length > this.o.multidate)\r\n\t\t\t\t\tthis.dates.remove(0);\r\n\t\t},\r\n\r\n\t\t_setDate: function(date, which){\r\n\t\t\tif (!which || which === 'date')\r\n\t\t\t\tthis._toggle_multidate(date && new Date(date));\r\n\t\t\tif (!which || which  === 'view')\r\n\t\t\t\tthis.viewDate = date && new Date(date);\r\n\r\n\t\t\tthis.fill();\r\n\t\t\tthis.setValue();\r\n\t\t\tthis._trigger('changeDate');\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput){\r\n\t\t\t\telement = this.element;\r\n\t\t\t}\r\n\t\t\telse if (this.component){\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element){\r\n\t\t\t\telement.change();\r\n\t\t\t}\r\n\t\t\tif (this.o.autoclose && (!which || which === 'date')){\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmoveMonth: function(date, dir){\r\n\t\t\tif (!date)\r\n\t\t\t\treturn undefined;\r\n\t\t\tif (!dir)\r\n\t\t\t\treturn date;\r\n\t\t\tvar new_date = new Date(date.valueOf()),\r\n\t\t\t\tday = new_date.getUTCDate(),\r\n\t\t\t\tmonth = new_date.getUTCMonth(),\r\n\t\t\t\tmag = Math.abs(dir),\r\n\t\t\t\tnew_month, test;\r\n\t\t\tdir = dir > 0 ? 1 : -1;\r\n\t\t\tif (mag === 1){\r\n\t\t\t\ttest = dir === -1\r\n\t\t\t\t\t// If going back one month, make sure month is not current month\r\n\t\t\t\t\t// (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t? function(){\r\n\t\t\t\t\t\treturn new_date.getUTCMonth() === month;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// If going forward one month, make sure month is as expected\r\n\t\t\t\t\t// (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t: function(){\r\n\t\t\t\t\t\treturn new_date.getUTCMonth() !== new_month;\r\n\t\t\t\t\t};\r\n\t\t\t\tnew_month = month + dir;\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t\t// Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n\t\t\t\tif (new_month < 0 || new_month > 11)\r\n\t\t\t\t\tnew_month = (new_month + 12) % 12;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// For magnitudes >1, move one month at a time...\r\n\t\t\t\tfor (var i=0; i < mag; i++)\r\n\t\t\t\t\t// ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n\t\t\t\t\tnew_date = this.moveMonth(new_date, dir);\r\n\t\t\t\t// ...then reset the day, keeping it in the new month\r\n\t\t\t\tnew_month = new_date.getUTCMonth();\r\n\t\t\t\tnew_date.setUTCDate(day);\r\n\t\t\t\ttest = function(){\r\n\t\t\t\t\treturn new_month !== new_date.getUTCMonth();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// Common date-resetting loop -- if date is beyond end of month, make it\r\n\t\t\t// end of month\r\n\t\t\twhile (test()){\r\n\t\t\t\tnew_date.setUTCDate(--day);\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t}\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveYear: function(date, dir){\r\n\t\t\treturn this.moveMonth(date, dir*12);\r\n\t\t},\r\n\r\n\t\tdateWithinRange: function(date){\r\n\t\t\treturn date >= this.o.startDate && date <= this.o.endDate;\r\n\t\t},\r\n\r\n\t\tkeydown: function(e){\r\n\t\t\tif (this.picker.is(':not(:visible)')){\r\n\t\t\t\tif (e.keyCode === 27) // allow escape to hide and re-show picker\r\n\t\t\t\t\tthis.show();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar dateChanged = false,\r\n\t\t\t\tdir, newDate, newViewDate,\r\n\t\t\t\tfocusDate = this.focusDate || this.viewDate;\r\n\t\t\tswitch (e.keyCode){\r\n\t\t\t\tcase 27: // escape\r\n\t\t\t\t\tif (this.focusDate){\r\n\t\t\t\t\t\tthis.focusDate = null;\r\n\t\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: // left\r\n\t\t\t\tcase 39: // right\r\n\t\t\t\t\tif (!this.o.keyboardNavigation)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdir = e.keyCode === 37 ? -1 : 1;\r\n\t\t\t\t\tif (e.ctrlKey){\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(focusDate, dir);\r\n\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (e.shiftKey){\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(focusDate, dir);\r\n\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnewDate = new Date(this.dates.get(-1) || UTCToday());\r\n\t\t\t\t\t\tnewDate.setUTCDate(newDate.getUTCDate() + dir);\r\n\t\t\t\t\t\tnewViewDate = new Date(focusDate);\r\n\t\t\t\t\t\tnewViewDate.setUTCDate(focusDate.getUTCDate() + dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)){\r\n\t\t\t\t\t\tthis.focusDate = this.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: // up\r\n\t\t\t\tcase 40: // down\r\n\t\t\t\t\tif (!this.o.keyboardNavigation)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdir = e.keyCode === 38 ? -1 : 1;\r\n\t\t\t\t\tif (e.ctrlKey){\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(focusDate, dir);\r\n\t\t\t\t\t\tthis._trigger('changeYear', this.viewDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (e.shiftKey){\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(focusDate, dir);\r\n\t\t\t\t\t\tthis._trigger('changeMonth', this.viewDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnewDate = new Date(this.dates.get(-1) || UTCToday());\r\n\t\t\t\t\t\tnewDate.setUTCDate(newDate.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\tnewViewDate = new Date(focusDate);\r\n\t\t\t\t\t\tnewViewDate.setUTCDate(focusDate.getUTCDate() + dir * 7);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)){\r\n\t\t\t\t\t\tthis.focusDate = this.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 32: // spacebar\r\n\t\t\t\t\t// Spacebar is used in manually typing dates in some formats.\r\n\t\t\t\t\t// As such, its behavior should not be hijacked.\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 13: // enter\r\n\t\t\t\t\tfocusDate = this.focusDate || this.dates.get(-1) || this.viewDate;\r\n\t\t\t\t\tthis._toggle_multidate(focusDate);\r\n\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\tthis.focusDate = null;\r\n\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\r\n\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\tthis.fill();\r\n\t\t\t\t\tif (this.picker.is(':visible')){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tif (this.o.autoclose)\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9: // tab\r\n\t\t\t\t\tthis.focusDate = null;\r\n\t\t\t\t\tthis.viewDate = this.dates.get(-1) || this.viewDate;\r\n\t\t\t\t\tthis.fill();\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dateChanged){\r\n\t\t\t\tif (this.dates.length)\r\n\t\t\t\t\tthis._trigger('changeDate');\r\n\t\t\t\telse\r\n\t\t\t\t\tthis._trigger('clearDate');\r\n\t\t\t\tvar element;\r\n\t\t\t\tif (this.isInput){\r\n\t\t\t\t\telement = this.element;\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.component){\r\n\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t}\r\n\t\t\t\tif (element){\r\n\t\t\t\t\telement.change();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshowMode: function(dir){\r\n\t\t\tif (dir){\r\n\t\t\t\tthis.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + dir));\r\n\t\t\t}\r\n\t\t\tthis.picker\r\n\t\t\t\t.find('>div')\r\n\t\t\t\t.hide()\r\n\t\t\t\t.filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName)\r\n\t\t\t\t\t.css('display', 'block');\r\n\t\t\tthis.updateNavArrows();\r\n\t\t}\r\n\t};\r\n\r\n\tvar DateRangePicker = function(element, options){\r\n\t\tthis.element = $(element);\r\n\t\tthis.inputs = $.map(options.inputs, function(i){\r\n\t\t\treturn i.jquery ? i[0] : i;\r\n\t\t});\r\n\t\tdelete options.inputs;\r\n\r\n\t\t$(this.inputs)\r\n\t\t\t.datepicker(options)\r\n\t\t\t.bind('changeDate', $.proxy(this.dateUpdated, this));\r\n\r\n\t\tthis.pickers = $.map(this.inputs, function(i){\r\n\t\t\treturn $(i).data('datepicker');\r\n\t\t});\r\n\t\tthis.updateDates();\r\n\t};\r\n\tDateRangePicker.prototype = {\r\n\t\tupdateDates: function(){\r\n\t\t\tthis.dates = $.map(this.pickers, function(i){\r\n\t\t\t\treturn i.getUTCDate();\r\n\t\t\t});\r\n\t\t\tthis.updateRanges();\r\n\t\t},\r\n\t\tupdateRanges: function(){\r\n\t\t\tvar range = $.map(this.dates, function(d){\r\n\t\t\t\treturn d.valueOf();\r\n\t\t\t});\r\n\t\t\t$.each(this.pickers, function(i, p){\r\n\t\t\t\tp.setRange(range);\r\n\t\t\t});\r\n\t\t},\r\n\t\tdateUpdated: function(e){\r\n\t\t\t// `this.updating` is a workaround for preventing infinite recursion\r\n\t\t\t// between `changeDate` triggering and `setUTCDate` calling.  Until\r\n\t\t\t// there is a better mechanism.\r\n\t\t\tif (this.updating)\r\n\t\t\t\treturn;\r\n\t\t\tthis.updating = true;\r\n\r\n\t\t\tvar dp = $(e.target).data('datepicker'),\r\n\t\t\t\tnew_date = dp.getUTCDate(),\r\n\t\t\t\ti = $.inArray(e.target, this.inputs),\r\n\t\t\t\tl = this.inputs.length;\r\n\t\t\tif (i === -1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t$.each(this.pickers, function(i, p){\r\n\t\t\t\tif (!p.getUTCDate())\r\n\t\t\t\t\tp.setUTCDate(new_date);\r\n\t\t\t});\r\n\r\n\t\t\tif (new_date < this.dates[i]){\r\n\t\t\t\t// Date being moved earlier/left\r\n\t\t\t\twhile (i >= 0 && new_date < this.dates[i]){\r\n\t\t\t\t\tthis.pickers[i--].setUTCDate(new_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (new_date > this.dates[i]){\r\n\t\t\t\t// Date being moved later/right\r\n\t\t\t\twhile (i < l && new_date > this.dates[i]){\r\n\t\t\t\t\tthis.pickers[i++].setUTCDate(new_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.updateDates();\r\n\r\n\t\t\tdelete this.updating;\r\n\t\t},\r\n\t\tremove: function(){\r\n\t\t\t$.map(this.pickers, function(p){ p.remove(); });\r\n\t\t\tdelete this.element.data().datepicker;\r\n\t\t}\r\n\t};\r\n\r\n\tfunction opts_from_el(el, prefix){\r\n\t\t// Derive options from element data-attrs\r\n\t\tvar data = $(el).data(),\r\n\t\t\tout = {}, inkey,\r\n\t\t\treplace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');\r\n\t\tprefix = new RegExp('^' + prefix.toLowerCase());\r\n\t\tfunction re_lower(_,a){\r\n\t\t\treturn a.toLowerCase();\r\n\t\t}\r\n\t\tfor (var key in data)\r\n\t\t\tif (prefix.test(key)){\r\n\t\t\t\tinkey = key.replace(replace, re_lower);\r\n\t\t\t\tout[inkey] = data[key];\r\n\t\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n\tfunction opts_from_locale(lang){\r\n\t\t// Derive options from locale plugins\r\n\t\tvar out = {};\r\n\t\t// Check if \"de-DE\" style date is available, if not language should\r\n\t\t// fallback to 2 letter code eg \"de\"\r\n\t\tif (!dates[lang]){\r\n\t\t\tlang = lang.split('-')[0];\r\n\t\t\tif (!dates[lang])\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t\tvar d = dates[lang];\r\n\t\t$.each(locale_opts, function(i,k){\r\n\t\t\tif (k in d)\r\n\t\t\t\tout[k] = d[k];\r\n\t\t});\r\n\t\treturn out;\r\n\t}\r\n\r\n\tvar old = $.fn.datepicker;\r\n\t$.fn.datepicker = function(option){\r\n\t\tvar args = Array.apply(null, arguments);\r\n\t\targs.shift();\r\n\t\tvar internal_return;\r\n\t\tthis.each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $this.data('datepicker'),\r\n\t\t\t\toptions = typeof option === 'object' && option;\r\n\t\t\tif (!data){\r\n\t\t\t\tvar elopts = opts_from_el(this, 'date'),\r\n\t\t\t\t\t// Preliminary otions\r\n\t\t\t\t\txopts = $.extend({}, defaults, elopts, options),\r\n\t\t\t\t\tlocopts = opts_from_locale(xopts.language),\r\n\t\t\t\t\t// Options priority: js args, data-attrs, locales, defaults\r\n\t\t\t\t\topts = $.extend({}, defaults, locopts, elopts, options);\r\n\t\t\t\tif ($this.is('.input-daterange') || opts.inputs){\r\n\t\t\t\t\tvar ropts = {\r\n\t\t\t\t\t\tinputs: opts.inputs || $this.find('input').toArray()\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$this.data('datepicker', (data = new DateRangePicker(this, $.extend(opts, ropts))));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$this.data('datepicker', (data = new Datepicker(this, opts)));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof option === 'string' && typeof data[option] === 'function'){\r\n\t\t\t\tinternal_return = data[option].apply(data, args);\r\n\t\t\t\tif (internal_return !== undefined)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (internal_return !== undefined)\r\n\t\t\treturn internal_return;\r\n\t\telse\r\n\t\t\treturn this;\r\n\t};\r\n\r\n\tvar defaults = $.fn.datepicker.defaults = {\r\n\t\tautoclose: false,\r\n\t\tbeforeShowDay: $.noop,\r\n\t\tcalendarWeeks: false,\r\n\t\tclearBtn: false,\r\n\t\tdaysOfWeekDisabled: [],\r\n\t\tendDate: Infinity,\r\n\t\tforceParse: true,\r\n\t\tformat: 'mm/dd/yyyy',\r\n\t\tkeyboardNavigation: true,\r\n\t\tlanguage: 'en',\r\n\t\tminViewMode: 0,\r\n\t\tmultidate: false,\r\n\t\tmultidateSeparator: ',',\r\n\t\torientation: \"auto\",\r\n\t\trtl: false,\r\n\t\tstartDate: -Infinity,\r\n\t\tstartView: 0,\r\n\t\ttodayBtn: false,\r\n\t\ttodayHighlight: false,\r\n\t\tweekStart: 0\r\n\t};\r\n\tvar locale_opts = $.fn.datepicker.locale_opts = [\r\n\t\t'format',\r\n\t\t'rtl',\r\n\t\t'weekStart'\r\n\t];\r\n\t$.fn.datepicker.Constructor = Datepicker;\r\n\tvar dates = $.fn.datepicker.dates = {\r\n\t\ten: {\r\n\t\t\tdays: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n\t\t\tdaysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n\t\t\tdaysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n\t\t\tmonths: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\ttoday: \"Today\",\r\n\t\t\tclear: \"Clear\"\r\n\t\t}\r\n\t};\r\n\r\n\tvar DPGlobal = {\r\n\t\tmodes: [\r\n\t\t\t{\r\n\t\t\t\tclsName: 'days',\r\n\t\t\t\tnavFnc: 'Month',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'months',\r\n\t\t\t\tnavFnc: 'FullYear',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'years',\r\n\t\t\t\tnavFnc: 'FullYear',\r\n\t\t\t\tnavStep: 10\r\n\t\t}],\r\n\t\tisLeapYear: function(year){\r\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\r\n\t\t},\r\n\t\tgetDaysInMonth: function(year, month){\r\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\r\n\t\t},\r\n\t\tvalidParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,\r\n\t\tnonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\r\n\t\tparseFormat: function(format){\r\n\t\t\t// IE treats \\0 as a string end in inputs (truncating the value),\r\n\t\t\t// so it's a bad format delimiter, anyway\r\n\t\t\tvar separators = format.replace(this.validParts, '\\0').split('\\0'),\r\n\t\t\t\tparts = format.match(this.validParts);\r\n\t\t\tif (!separators || !separators.length || !parts || parts.length === 0){\r\n\t\t\t\tthrow new Error(\"Invalid date format.\");\r\n\t\t\t}\r\n\t\t\treturn {separators: separators, parts: parts};\r\n\t\t},\r\n\t\tparseDate: function(date, format, language){\r\n\t\t\tif (!date)\r\n\t\t\t\treturn undefined;\r\n\t\t\tif (date instanceof Date)\r\n\t\t\t\treturn date;\r\n\t\t\tif (typeof format === 'string')\r\n\t\t\t\tformat = DPGlobal.parseFormat(format);\r\n\t\t\tvar part_re = /([\\-+]\\d+)([dmwy])/,\r\n\t\t\t\tparts = date.match(/([\\-+]\\d+)([dmwy])/g),\r\n\t\t\t\tpart, dir, i;\r\n\t\t\tif (/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(date)){\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfor (i=0; i < parts.length; i++){\r\n\t\t\t\t\tpart = part_re.exec(parts[i]);\r\n\t\t\t\t\tdir = parseInt(part[1]);\r\n\t\t\t\t\tswitch (part[2]){\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'w':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\tdate = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);\r\n\t\t\t}\r\n\t\t\tparts = date && date.match(this.nonpunctuation) || [];\r\n\t\t\tdate = new Date();\r\n\t\t\tvar parsed = {},\r\n\t\t\t\tsetters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],\r\n\t\t\t\tsetters_map = {\r\n\t\t\t\t\tyyyy: function(d,v){\r\n\t\t\t\t\t\treturn d.setUTCFullYear(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyy: function(d,v){\r\n\t\t\t\t\t\treturn d.setUTCFullYear(2000+v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tm: function(d,v){\r\n\t\t\t\t\t\tif (isNaN(d))\r\n\t\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t\tv -= 1;\r\n\t\t\t\t\t\twhile (v < 0) v += 12;\r\n\t\t\t\t\t\tv %= 12;\r\n\t\t\t\t\t\td.setUTCMonth(v);\r\n\t\t\t\t\t\twhile (d.getUTCMonth() !== v)\r\n\t\t\t\t\t\t\td.setUTCDate(d.getUTCDate()-1);\r\n\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t},\r\n\t\t\t\t\td: function(d,v){\r\n\t\t\t\t\t\treturn d.setUTCDate(v);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tval, filtered;\r\n\t\t\tsetters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n\t\t\tsetters_map['dd'] = setters_map['d'];\r\n\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n\t\t\tvar fparts = format.parts.slice();\r\n\t\t\t// Remove noop parts\r\n\t\t\tif (parts.length !== fparts.length){\r\n\t\t\t\tfparts = $(fparts).filter(function(i,p){\r\n\t\t\t\t\treturn $.inArray(p, setters_order) !== -1;\r\n\t\t\t\t}).toArray();\r\n\t\t\t}\r\n\t\t\t// Process remainder\r\n\t\t\tfunction match_part(){\r\n\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\treturn m === p;\r\n\t\t\t}\r\n\t\t\tif (parts.length === fparts.length){\r\n\t\t\t\tvar cnt;\r\n\t\t\t\tfor (i=0, cnt = fparts.length; i < cnt; i++){\r\n\t\t\t\t\tval = parseInt(parts[i], 10);\r\n\t\t\t\t\tpart = fparts[i];\r\n\t\t\t\t\tif (isNaN(val)){\r\n\t\t\t\t\t\tswitch (part){\r\n\t\t\t\t\t\t\tcase 'MM':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].months).filter(match_part);\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].months) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].monthsShort).filter(match_part);\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparsed[part] = val;\r\n\t\t\t\t}\r\n\t\t\t\tvar _date, s;\r\n\t\t\t\tfor (i=0; i < setters_order.length; i++){\r\n\t\t\t\t\ts = setters_order[i];\r\n\t\t\t\t\tif (s in parsed && !isNaN(parsed[s])){\r\n\t\t\t\t\t\t_date = new Date(date);\r\n\t\t\t\t\t\tsetters_map[s](_date, parsed[s]);\r\n\t\t\t\t\t\tif (!isNaN(_date))\r\n\t\t\t\t\t\t\tdate = _date;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tformatDate: function(date, format, language){\r\n\t\t\tif (!date)\r\n\t\t\t\treturn '';\r\n\t\t\tif (typeof format === 'string')\r\n\t\t\t\tformat = DPGlobal.parseFormat(format);\r\n\t\t\tvar val = {\r\n\t\t\t\td: date.getUTCDate(),\r\n\t\t\t\tD: dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\tDD: dates[language].days[date.getUTCDay()],\r\n\t\t\t\tm: date.getUTCMonth() + 1,\r\n\t\t\t\tM: dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\tMM: dates[language].months[date.getUTCMonth()],\r\n\t\t\t\tyy: date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\tyyyy: date.getUTCFullYear()\r\n\t\t\t};\r\n\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\r\n\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\r\n\t\t\tdate = [];\r\n\t\t\tvar seps = $.extend([], format.separators);\r\n\t\t\tfor (var i=0, cnt = format.parts.length; i <= cnt; i++){\r\n\t\t\t\tif (seps.length)\r\n\t\t\t\t\tdate.push(seps.shift());\r\n\t\t\t\tdate.push(val[format.parts[i]]);\r\n\t\t\t}\r\n\t\t\treturn date.join('');\r\n\t\t},\r\n\t\theadTemplate: '<thead>'+\r\n\t\t\t\t\t\t\t'<tr>'+\r\n\t\t\t\t\t\t\t\t'<th class=\"prev\">&laquo;</th>'+\r\n\t\t\t\t\t\t\t\t'<th colspan=\"5\" class=\"datepicker-switch\"></th>'+\r\n\t\t\t\t\t\t\t\t'<th class=\"next\">&raquo;</th>'+\r\n\t\t\t\t\t\t\t'</tr>'+\r\n\t\t\t\t\t\t'</thead>',\r\n\t\tcontTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n\t\tfootTemplate: '<tfoot>'+\r\n\t\t\t\t\t\t\t'<tr>'+\r\n\t\t\t\t\t\t\t\t'<th colspan=\"7\" class=\"today\"></th>'+\r\n\t\t\t\t\t\t\t'</tr>'+\r\n\t\t\t\t\t\t\t'<tr>'+\r\n\t\t\t\t\t\t\t\t'<th colspan=\"7\" class=\"clear\"></th>'+\r\n\t\t\t\t\t\t\t'</tr>'+\r\n\t\t\t\t\t\t'</tfoot>'\r\n\t};\r\n\tDPGlobal.template = '<div class=\"datepicker\">'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-days\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\" table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\t'<tbody></tbody>'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-months\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'<div class=\"datepicker-years\">'+\r\n\t\t\t\t\t\t\t\t'<table class=\"table-condensed\">'+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.headTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.contTemplate+\r\n\t\t\t\t\t\t\t\t\tDPGlobal.footTemplate+\r\n\t\t\t\t\t\t\t\t'</table>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t'</div>';\r\n\r\n\t$.fn.datepicker.DPGlobal = DPGlobal;\r\n\r\n\r\n\t/* DATEPICKER NO CONFLICT\r\n\t* =================== */\r\n\r\n\t$.fn.datepicker.noConflict = function(){\r\n\t\t$.fn.datepicker = old;\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\t/* DATEPICKER DATA-API\r\n\t* ================== */\r\n\r\n\t$(document).on(\r\n\t\t'focus.datepicker.data-api click.datepicker.data-api',\r\n\t\t'[data-provide=\"datepicker\"]',\r\n\t\tfunction(e){\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif ($this.data('datepicker'))\r\n\t\t\t\treturn;\r\n\t\t\te.preventDefault();\r\n\t\t\t// component click requires us to explicitly show it\r\n\t\t\t$this.datepicker('show');\r\n\t\t}\r\n\t);\r\n\t$(function(){\r\n\t\t$('[data-provide=\"datepicker-inline\"]').datepicker();\r\n\t});\r\n\r\n}(window.jQuery));\r\n",";(function($, window) {\n\n    var vimeoJqueryAPI = {\n\n        //catches return messages when methods like getVolume are called. \n        //counter is if multiple calls are made before one returns.\n        catchMethods : {methodreturn:[], count:0},\n\n        //This kicks things off on window message event\n        init : function(d){\n\n            var vimeoVideo,\n                vimeoAPIurl,\n                data;\n\n            //is this window message from vimeo?\n            if(!d.originalEvent.origin.match(/vimeo/g)){\n                return;\n            }\n\n            //make sure data was sent\n            if(!(\"data\" in d.originalEvent)){\n                return;\n            }\n\n            //store data as JSON object\n            data = $.type(d.originalEvent.data) === \"string\" ? $.parseJSON(d.originalEvent.data) : d.originalEvent.data;\n\n            //make sure data is not blank\n            if(!data){\n                return;\n            }\n\n            //get the id of this vimeo video, hopefully they set it.\n            vimeoVideo = this.setPlayerID(data);\n\n            //check to see if player_ids were set in query string. If not, wait until next message comes through.\n            if(vimeoVideo.length){\n\n                vimeoAPIurl  = this.setVimeoAPIurl(vimeoVideo);\n\n                //If this is an event message, like ready or paused\n                if(data.hasOwnProperty(\"event\"))\n                    this.handleEvent(data, vimeoVideo, vimeoAPIurl);\n\n                //IF this is a return event message, like getVolume or getCurrentTime\n                if(data.hasOwnProperty(\"method\"))\n                    this.handleMethod(data, vimeoVideo, vimeoAPIurl);\n\n            }\n\n        },\n\n        setPlayerID : function(d){\n\n            return $(\"iframe[src*=\" + d.player_id + \"]\");\n\n        },\n\n        setVimeoAPIurl : function(d){\n\n            //prepend vimeo url with proper protocol\n            if(d.attr('src').substr(0, 4) !== 'http'){\n                return 'https:'+d.attr('src').split('?')[0];\n            } else {\n                return d.attr('src').split('?')[0];\n            }\n        },\n\n        handleMethod : function(d, vid, api){\n\n            //If the message is returned from a method call, store it for later.\n            this.catchMethods.methodreturn.push(d.value);\n\n        },\n\n        handleEvent : function(d, vid, api){\n            switch (d.event.toLowerCase()) {\n                case 'ready':\n\n                    //Go through all events attached to this element, and set an event listener\n                    for(var prop in $._data(vid[0], \"events\")){\n                        if(prop.match(/loadProgress|playProgress|play|pause|finish|seek|cuechange/)){\n                            vid[0].contentWindow.postMessage(JSON.stringify({method: 'addEventListener', value: prop}), api);\n                        }\n                    }\n\n                    //if methods are sent before video is ready, call them now\n                    if(vid.data(\"vimeoAPICall\")){\n                        var vdata = vid.data(\"vimeoAPICall\");\n                        for(var i=0; i< vdata.length; i++){\n                            vid[0].contentWindow.postMessage(JSON.stringify(vdata[i].message), vdata[i].api);\n                        }\n                        vid.removeData(\"vimeoAPICall\");\n                    }\n\n                    //this video is ready\n                    vid.data(\"vimeoReady\", true);\n                    vid.triggerHandler(\"ready\");\n\n                    break;\n\n                case 'seek':\n                    vid.triggerHandler(\"seek\", [d.data]);\n                    break;\n\n                case 'loadprogress':\n                    vid.triggerHandler(\"loadProgress\", [d.data]);\n                    break;\n\n                case 'playprogress':\n                    vid.triggerHandler(\"playProgress\", [d.data]);\n                    break;\n\n                case 'pause':\n                    vid.triggerHandler(\"pause\");\n                    break;\n\n                case 'finish':\n                    vid.triggerHandler(\"finish\");\n                    break;\n\n                case 'play':\n                    vid.triggerHandler(\"play\");\n                    break;\n\n                case 'cuechange':\n                    vid.triggerHandler(\"cuechange\");\n                    break;\n            }\n        }\n    };\n\n    jQuery(document).ready(function(){\n\n        //go through every iframe with \"vimeo.com\" in src attribute, and verify it has \"player_id\" query string\n        $(\"iframe[src*='vimeo.com']\").each(function(index){\n\n            //save the current src attribute\n            var url = $(this).attr('src');\n\n            //if they haven't added \"player_id\" in their query string, let's add one.\n            if(url.match(/player_id/g) === null){\n\n                //is there already a query string? If so, use &, otherwise ?. \n                var firstSeperator = (url.indexOf('?') === -1 ? '?' : '&');\n\n                //setup a serialized player_id with jQuery (use an unusual name in case someone manually sets the same name)\n                var param = $.param({\"api\": 1, \"player_id\": \"vvvvimeoVideo-\" + index});\n                \n                //reload the vimeo videos that don't have player_id\n                $(this).attr(\"src\", url + firstSeperator + param);\n\n            } \n\n        });\n    });\n    \n\n    //this is what kicks things off. Whenever Vimeo sends window message to us, was check to see what it is.\n    $(window).on(\"message\", function(e){ vimeoJqueryAPI.init(e); });\n\n\n    /**\n     *  Vimeo jQuery method plugin\n     *\n     * @param element {jQuery Object} The element this was called on (verifies it's an iframe)\n     * @param option1 {string} The method to send to vimeo.\n     * @param option2 {string|function} If a string, it's the value (i.e. setVolume 2) otherwise, it's a callback function\n     */\n    $.vimeo = function(element, option1, option2) {\n\n        var message = {},\n            catchMethodLength = vimeoJqueryAPI.catchMethods.methodreturn.length;\n\n        if(typeof option1 === \"string\")  \n            message.method = option1;\n\n        if(typeof option2 !== undefined && typeof option2 !== \"function\") \n            message.value  = option2;\n\n        //call method, but check if video was ready, otherwise cue it up with jQuery data to be called when video is ready\n        if(element.prop(\"tagName\").toLowerCase() === 'iframe' && message.hasOwnProperty(\"method\")){\n            if(element.data(\"vimeoReady\")){\n                element[0].contentWindow.postMessage(JSON.stringify(message), vimeoJqueryAPI.setVimeoAPIurl(element));\n            } else {\n                var _data = element.data(\"vimeoAPICall\") ? element.data(\"vimeoAPICall\") : [];\n                _data.push({message:message, api:vimeoJqueryAPI.setVimeoAPIurl(element)});\n                element.data(\"vimeoAPICall\", _data);\n            }\n        }\n\n        //If this method will return data, (starts with \"get\") then use callback once return message comes through\n        if((option1.toString().substr(0, 3) === \"get\" || option1.toString() === \"paused\") && typeof option2 === \"function\"){\n            (function(cml, func, i){\n                var interval = window.setInterval(function(){\n\n                    if(vimeoJqueryAPI.catchMethods.methodreturn.length != cml){\n                        window.clearInterval(interval);\n                        func(vimeoJqueryAPI.catchMethods.methodreturn[i]);\n                    }\n                }, 10);\n            })(catchMethodLength, option2, vimeoJqueryAPI.catchMethods.count);\n            vimeoJqueryAPI.catchMethods.count++;\n        } \n        return element;\n    };\n\n    $.fn.vimeo = function(option1, option2) {\n            return $.vimeo(this, option1, option2);\n    };\n\n})(jQuery, window);","/*! Picturefill - Responsive Images that work today.\r\n*  Author: Scott Jehl, Filament Group, 2012 ( new proposal implemented by Shawn Jansepar )\r\n*  License: MIT/GPLv2\r\n*  Spec: http://picture.responsiveimages.org/\r\n*/\r\n(function( w, doc ) {\r\n\t// Enable strict mode\r\n\t\"use strict\";\r\n\r\n\t// If picture is supported, well, that's awesome. Let's get outta here...\r\n\tif ( w.HTMLPictureElement ) {\r\n\t\tw.picturefill = function() { };\r\n\t\treturn;\r\n\t}\r\n\r\n\t// HTML shim|v it for old IE (IE9 will still need the HTML video tag workaround)\r\n\tdoc.createElement( \"picture\" );\r\n\r\n\t// local object for method references and testing exposure\r\n\tvar pf = {};\r\n\r\n\t// namespace\r\n\tpf.ns = \"picturefill\";\r\n\r\n\t// srcset support test\r\n\t(function() {\r\n\t\tvar img = doc.createElement( \"img\" );\r\n\t\tpf.srcsetSupported = \"srcset\" in img;\r\n\t\tpf.sizesSupported = \"sizes\" in img;\r\n\t})();\r\n\r\n\t// just a string trim workaround\r\n\tpf.trim = function( str ) {\r\n\t\treturn str.trim ? str.trim() : str.replace( /^\\s+|\\s+$/g, \"\" );\r\n\t};\r\n\r\n\t// just a string endsWith workaround\r\n\tpf.endsWith = function( str, suffix ) {\r\n\t\treturn str.endsWith ? str.endsWith( suffix ) : str.indexOf( suffix, str.length - suffix.length ) !== -1;\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut method for https://w3c.github.io/webappsec/specs/mixedcontent/#restricts-mixed-content ( for easy overriding in tests )\r\n\t */\r\n\tpf.restrictsMixedContent = function() {\r\n\t\treturn w.location.protocol === \"https:\";\r\n\t};\r\n\t/**\r\n\t * Shortcut method for matchMedia ( for easy overriding in tests )\r\n\t */\r\n\tpf.matchesMedia = function( media ) {\r\n\t\treturn w.matchMedia && w.matchMedia( media ).matches;\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut method for `devicePixelRatio` ( for easy overriding in tests )\r\n\t */\r\n\tpf.getDpr = function() {\r\n\t\treturn ( w.devicePixelRatio || 1 );\r\n\t};\r\n\r\n\t/**\r\n\t * Get width in css pixel value from a \"length\" value\r\n\t * http://dev.w3.org/csswg/css-values-3/#length-value\r\n\t */\r\n\tpf.getWidthFromLength = function( length ) {\r\n\t\t// If a length is specified and doesnt contain a percentage, and it is greater than 0 or using `calc`, use it. Else, use the `100vw` default.\r\n\t\tlength = length && length.indexOf( \"%\" ) > -1 === false && ( parseFloat( length ) > 0 || length.indexOf( \"calc(\" ) > -1 ) ? length : \"100vw\";\r\n\t\t/**\r\n\t\t* If length is specified in  `vw` units, use `%` instead since the div were measuring\r\n\t\t* is injected at the top of the document.\r\n\t\t*\r\n\t\t* TODO: maybe we should put this behind a feature test for `vw`?\r\n\t\t*/\r\n\t\tlength = length.replace( \"vw\", \"%\" );\r\n\r\n\t\t// Create a cached element for getting length value widths\r\n\t\tif ( !pf.lengthEl ) {\r\n\t\t\tpf.lengthEl = doc.createElement( \"div\" );\r\n\t\t\tdoc.documentElement.insertBefore( pf.lengthEl, doc.documentElement.firstChild );\r\n\t\t}\r\n\r\n\t\t// Positioning styles help prevent padding/margin/width on `html` from throwing calculations off.\r\n\t\tpf.lengthEl.style.cssText = \"position: absolute; left: 0; width: \" + length + \";\";\r\n\r\n\t\t// Add a class, so that everyone knows where this element comes from\r\n\t\tpf.lengthEl.className = \"helper-from-picturefill-js\";\r\n\r\n\t\tif ( pf.lengthEl.offsetWidth <= 0 ) {\r\n\t\t\t// Something has gone wrong. `calc()` is in use and unsupported, most likely. Default to `100vw` (`100%`, for broader support.):\r\n\t\t\tpf.lengthEl.style.cssText = \"width: 100%;\";\r\n\t\t}\r\n\r\n\t\treturn pf.lengthEl.offsetWidth;\r\n\t};\r\n\r\n\t// container of supported mime types that one might need to qualify before using\r\n\tpf.types =  {};\r\n\r\n\t// Add support for standard mime types.\r\n\tpf.types[\"image/jpeg\"] = true;\r\n\tpf.types[\"image/gif\"] = true;\r\n\tpf.types[\"image/png\"] = true;\r\n\r\n\t// test svg support\r\n\tpf.types[ \"image/svg+xml\" ] = doc.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#Image\", \"1.1\");\r\n\r\n\t// test webp support, only when the markup calls for it\r\n\tpf.types[ \"image/webp\" ] = function() {\r\n\t\t// based on Modernizr's lossless img-webp test\r\n\t\t// note: asynchronous\r\n\t\tvar img = new w.Image(),\r\n\t\t\ttype = \"image/webp\";\r\n\r\n\t\timg.onerror = function() {\r\n\t\t\tpf.types[ type ] = false;\r\n\t\t\tpicturefill();\r\n\t\t};\r\n\t\timg.onload = function() {\r\n\t\t\tpf.types[ type ] = img.width === 1;\r\n\t\t\tpicturefill();\r\n\t\t};\r\n\t\timg.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\";\r\n\t};\r\n\r\n\t/**\r\n\t * Takes a source element and checks if its type attribute is present and if so, supported\r\n\t * Note: for type tests that require a async logic,\r\n\t * you can define them as a function that'll run only if that type needs to be tested. Just make the test function call picturefill again when it is complete.\r\n\t * see the async webp test above for example\r\n\t */\r\n\tpf.verifyTypeSupport = function( source ) {\r\n\t\tvar type = source.getAttribute( \"type\" );\r\n\t\t// if type attribute exists, return test result, otherwise return true\r\n\t\tif ( type === null || type === \"\" ) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\t// if the type test is a function, run it and return \"pending\" status. The function will rerun picturefill on pending elements once finished.\r\n\t\t\tif ( typeof( pf.types[ type ] ) === \"function\" ) {\r\n\t\t\t\tpf.types[ type ]();\r\n\t\t\t\treturn \"pending\";\r\n\t\t\t} else {\r\n\t\t\t\treturn pf.types[ type ];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Parses an individual `size` and returns the length, and optional media query\r\n\t*/\r\n\tpf.parseSize = function( sourceSizeStr ) {\r\n\t\tvar match = /(\\([^)]+\\))?\\s*(.+)/g.exec( sourceSizeStr );\r\n\t\treturn {\r\n\t\t\tmedia: match && match[1],\r\n\t\t\tlength: match && match[2]\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Takes a string of sizes and returns the width in pixels as a number\r\n\t */\r\n\tpf.findWidthFromSourceSize = function( sourceSizeListStr ) {\r\n\t\t// Split up source size list, ie ( max-width: 30em ) 100%, ( max-width: 50em ) 50%, 33%\r\n\t\t//                            or (min-width:30em) calc(30% - 15px)\r\n\t\tvar sourceSizeList = pf.trim( sourceSizeListStr ).split( /\\s*,\\s*/ ),\r\n\t\t\twinningLength;\r\n\r\n\t\tfor ( var i = 0, len = sourceSizeList.length; i < len; i++ ) {\r\n\t\t\t// Match <media-condition>? length, ie ( min-width: 50em ) 100%\r\n\t\t\tvar sourceSize = sourceSizeList[ i ],\r\n\t\t\t\t// Split \"( min-width: 50em ) 100%\" into separate strings\r\n\t\t\t\tparsedSize = pf.parseSize( sourceSize ),\r\n\t\t\t\tlength = parsedSize.length,\r\n\t\t\t\tmedia = parsedSize.media;\r\n\r\n\t\t\tif ( !length ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif ( !media || pf.matchesMedia( media ) ) {\r\n\t\t\t\t// if there is no media query or it matches, choose this as our winning length\r\n\t\t\t\t// and end algorithm\r\n\t\t\t\twinningLength = length;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// pass the length to a method that can properly determine length\r\n\t\t// in pixels based on these formats: http://dev.w3.org/csswg/css-values-3/#length-value\r\n\t\treturn pf.getWidthFromLength( winningLength );\r\n\t};\r\n\r\n\tpf.parseSrcset = function( srcset ) {\r\n\t\t/**\r\n\t\t* A lot of this was pulled from Boris Smus parser for the now-defunct WHATWG `srcset`\r\n\t\t* https://github.com/borismus/srcset-polyfill/blob/master/js/srcset-info.js\r\n\t\t*\r\n\t\t* 1. Let input (`srcset`) be the value passed to this algorithm.\r\n\t\t* 2. Let position be a pointer into input, initially pointing at the start of the string.\r\n\t\t* 3. Let raw candidates be an initially empty ordered list of URLs with associated\r\n\t\t*    unparsed descriptors. The order of entries in the list is the order in which entries\r\n\t\t*    are added to the list.\r\n\t\t*/\r\n\t\tvar candidates = [];\r\n\r\n\t\twhile ( srcset !== \"\" ) {\r\n\t\t\tsrcset = srcset.replace(/^\\s+/g,\"\");\r\n\r\n\t\t\t// 5. Collect a sequence of characters that are not space characters, and let that be url.\r\n\t\t\tvar pos = srcset.search(/\\s/g),\r\n\t\t\t\turl,\r\n\t\t\t\tdescriptor = null;\r\n\r\n\t\t\tif ( pos !== -1 ) {\r\n\t\t\t\turl = srcset.slice( 0, pos );\r\n\r\n\t\t\t\tvar last = url[ url.length - 1 ];\r\n\r\n\t\t\t\t// 6. If url ends with a U+002C COMMA character (,), remove that character from url\r\n\t\t\t\t// and let descriptors be the empty string. Otherwise, follow these substeps\r\n\t\t\t\t// 6.1. If url is empty, then jump to the step labeled descriptor parser.\r\n\r\n\t\t\t\tif ( last === \",\" || url === \"\" ) {\r\n\t\t\t\t\turl = url.replace(/,+$/, \"\");\r\n\t\t\t\t\tdescriptor = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tsrcset = srcset.slice( pos + 1 );\r\n\r\n\t\t\t\t// 6.2. Collect a sequence of characters that are not U+002C COMMA characters (,), and\r\n\t\t\t\t// let that be descriptors.\r\n\t\t\t\tif ( descriptor === null ) {\r\n\t\t\t\t\tvar descpos = srcset.indexOf(\",\");\r\n\t\t\t\t\tif ( descpos !== -1 ) {\r\n\t\t\t\t\t\tdescriptor = srcset.slice( 0, descpos );\r\n\t\t\t\t\t\tsrcset = srcset.slice( descpos + 1 );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdescriptor = srcset;\r\n\t\t\t\t\t\tsrcset = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\turl = srcset;\r\n\t\t\t\tsrcset = \"\";\r\n\t\t\t}\r\n\r\n\t\t\t// 7. Add url to raw candidates, associated with descriptors.\r\n\t\t\tif ( url || descriptor ) {\r\n\t\t\t\tcandidates.push({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdescriptor: descriptor\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn candidates;\r\n\t};\r\n\r\n\tpf.parseDescriptor = function( descriptor, sizesattr ) {\r\n\t\t// 11. Descriptor parser: Let candidates be an initially empty source set. The order of entries in the list\r\n\t\t// is the order in which entries are added to the list.\r\n\t\tvar sizes = sizesattr || \"100vw\",\r\n\t\t\tsizeDescriptor = descriptor && descriptor.replace(/(^\\s+|\\s+$)/g, \"\"),\r\n\t\t\twidthInCssPixels = pf.findWidthFromSourceSize( sizes ),\r\n\t\t\tresCandidate;\r\n\r\n\t\t\tif ( sizeDescriptor ) {\r\n\t\t\t\tvar splitDescriptor = sizeDescriptor.split(\" \");\r\n\r\n\t\t\t\tfor (var i = splitDescriptor.length + 1; i >= 0; i--) {\r\n\t\t\t\t\tif ( splitDescriptor[ i ] !== undefined ) {\r\n\t\t\t\t\t\tvar curr = splitDescriptor[ i ],\r\n\t\t\t\t\t\t\tlastchar = curr && curr.slice( curr.length - 1 );\r\n\r\n\t\t\t\t\t\tif ( ( lastchar === \"h\" || lastchar === \"w\" ) && !pf.sizesSupported ) {\r\n\t\t\t\t\t\t\tresCandidate = parseFloat( ( parseInt( curr, 10 ) / widthInCssPixels ) );\r\n\t\t\t\t\t\t\tif ( resCandidate === Infinity ) resCandidate = 0;\r\n\t\t\t\t\t\t} else if ( lastchar === \"x\" ) {\r\n\t\t\t\t\t\t\tvar res = curr && parseFloat( curr, 10 );\r\n\t\t\t\t\t\t\tresCandidate = res && !isNaN( res ) ? res : 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\treturn resCandidate || 1;\r\n\t};\r\n\r\n\t/**\r\n\t * Takes a srcset in the form of url/\r\n\t * ex. \"images/pic-medium.png 1x, images/pic-medium-2x.png 2x\" or\r\n\t *     \"images/pic-medium.png 400w, images/pic-medium-2x.png 800w\" or\r\n\t *     \"images/pic-small.png\"\r\n\t * Get an array of image candidates in the form of\r\n\t *      {url: \"/foo/bar.png\", resolution: 1}\r\n\t * where resolution is http://dev.w3.org/csswg/css-values-3/#resolution-value\r\n\t * If sizes is specified, resolution is calculated\r\n\t */\r\n\tpf.getCandidatesFromSourceSet = function( srcset, sizes ) {\r\n\t\tvar candidates = pf.parseSrcset( srcset ),\r\n\t\t\tformattedCandidates = [];\r\n\r\n\t\tfor ( var i = 0, len = candidates.length; i < len; i++ ) {\r\n\t\t\tvar candidate = candidates[ i ];\r\n\r\n\t\t\tformattedCandidates.push({\r\n\t\t\t\turl: candidate.url,\r\n\t\t\t\tresolution: pf.parseDescriptor( candidate.descriptor, sizes )\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn formattedCandidates;\r\n\t};\r\n\r\n\t/*\r\n\t * if it's an img element and it has a srcset property,\r\n\t * we need to remove the attribute so we can manipulate src\r\n\t * (the property's existence infers native srcset support, and a srcset-supporting browser will prioritize srcset's value over our winning picture candidate)\r\n\t * this moves srcset's value to memory for later use and removes the attr\r\n\t */\r\n\tpf.dodgeSrcset = function( img ) {\r\n\t\tif ( img.srcset ) {\r\n\t\t\timg[ pf.ns ].srcset = img.srcset;\r\n\t\t\timg.removeAttribute( \"srcset\" );\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t * Accept a source or img element and process its srcset and sizes attrs\r\n\t */\r\n\tpf.processSourceSet = function( el ) {\r\n\t\tvar srcset = el.getAttribute( \"srcset\" ),\r\n\t\t\tsizes = el.getAttribute( \"sizes\" ),\r\n\t\t\tcandidates = [];\r\n\r\n\t\t// if it's an img element, use the cached srcset property (defined or not)\r\n\t\tif ( el.nodeName.toUpperCase() === \"IMG\" && el[ pf.ns ] && el[ pf.ns ].srcset ) {\r\n\t\t\tsrcset = el[ pf.ns ].srcset;\r\n\t\t}\r\n\r\n\t\tif ( srcset ) {\r\n\t\t\tcandidates = pf.getCandidatesFromSourceSet( srcset, sizes );\r\n\t\t}\r\n\t\treturn candidates;\r\n\t};\r\n\r\n\tpf.applyBestCandidate = function( candidates, picImg ) {\r\n\t\tvar candidate,\r\n\t\t\tlength,\r\n\t\t\tbestCandidate;\r\n\r\n\t\tcandidates.sort( pf.ascendingSort );\r\n\r\n\t\tlength = candidates.length;\r\n\t\tbestCandidate = candidates[ length - 1 ];\r\n\r\n\t\tfor ( var i = 0; i < length; i++ ) {\r\n\t\t\tcandidate = candidates[ i ];\r\n\t\t\tif ( candidate.resolution >= pf.getDpr() ) {\r\n\t\t\t\tbestCandidate = candidate;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( bestCandidate && !pf.endsWith( picImg.src, bestCandidate.url ) ) {\r\n\t\t\tif ( pf.restrictsMixedContent() && bestCandidate.url.substr(0, \"http:\".length).toLowerCase() === \"http:\" ) {\r\n\t\t\t\tif ( typeof console !== undefined ) {\r\n\t\t\t\t\tconsole.warn( \"Blocked mixed content image \" + bestCandidate.url );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tpicImg.src = bestCandidate.url;\r\n\t\t\t\t// currentSrc attribute and property to match\r\n\t\t\t\t// http://picture.responsiveimages.org/#the-img-element\r\n\t\t\t\tpicImg.currentSrc = picImg.src;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tpf.ascendingSort = function( a, b ) {\r\n\t\treturn a.resolution - b.resolution;\r\n\t};\r\n\r\n\t/*\r\n\t * In IE9, <source> elements get removed if they aren't children of\r\n\t * video elements. Thus, we conditionally wrap source elements\r\n\t * using <!--[if IE 9]><video style=\"display: none;\"><![endif]-->\r\n\t * and must account for that here by moving those source elements\r\n\t * back into the picture element.\r\n\t */\r\n\tpf.removeVideoShim = function( picture ) {\r\n\t\tvar videos = picture.getElementsByTagName( \"video\" );\r\n\t\tif ( videos.length ) {\r\n\t\t\tvar video = videos[ 0 ],\r\n\t\t\t\tvsources = video.getElementsByTagName( \"source\" );\r\n\t\t\twhile ( vsources.length ) {\r\n\t\t\t\tpicture.insertBefore( vsources[ 0 ], video );\r\n\t\t\t}\r\n\t\t\t// Remove the video element once we're finished removing its children\r\n\t\t\tvideo.parentNode.removeChild( video );\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t * Find all `img` elements, and add them to the candidate list if they have\r\n\t * a `picture` parent, a `sizes` attribute in basic `srcset` supporting browsers,\r\n\t * a `srcset` attribute at all, and they havent been evaluated already.\r\n\t */\r\n\tpf.getAllElements = function() {\r\n\t\tvar elems = [],\r\n\t\t\timgs = doc.getElementsByTagName( \"img\" );\r\n\r\n\t\tfor ( var h = 0, len = imgs.length; h < len; h++ ) {\r\n\t\t\tvar currImg = imgs[ h ];\r\n\r\n\t\t\tif ( currImg.parentNode.nodeName.toUpperCase() === \"PICTURE\" ||\r\n\t\t\t\t( currImg.getAttribute( \"srcset\" ) !== null ) || currImg[ pf.ns ] && currImg[ pf.ns ].srcset !== null ) {\r\n\t\t\t\t\telems.push( currImg );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn elems;\r\n\t};\r\n\r\n\tpf.getMatch = function( img, picture ) {\r\n\t\tvar sources = picture.childNodes,\r\n\t\t\tmatch;\r\n\r\n\t\t// Go through each child, and if they have media queries, evaluate them\r\n\t\tfor ( var j = 0, slen = sources.length; j < slen; j++ ) {\r\n\t\t\tvar source = sources[ j ];\r\n\r\n\t\t\t// ignore non-element nodes\r\n\t\t\tif ( source.nodeType !== 1 ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Hitting the `img` element that started everything stops the search for `sources`.\r\n\t\t\t// If no previous `source` matches, the `img` itself is evaluated later.\r\n\t\t\tif ( source === img ) {\r\n\t\t\t\treturn match;\r\n\t\t\t}\r\n\r\n\t\t\t// ignore non-`source` nodes\r\n\t\t\tif ( source.nodeName.toUpperCase() !== \"SOURCE\" ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// if it's a source element that has the `src` property set, throw a warning in the console\r\n\t\t\tif ( source.getAttribute( \"src\" ) !== null && typeof console !== undefined ){\r\n\t\t\t\tconsole.warn(\"The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.\");\r\n\t\t\t}\r\n\r\n\t\t\tvar media = source.getAttribute( \"media\" );\r\n\r\n\t\t\t// if source does not have a srcset attribute, skip\r\n\t\t\tif ( !source.getAttribute( \"srcset\" ) ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// if there's no media specified, OR w.matchMedia is supported\r\n\t\t\tif ( ( !media || pf.matchesMedia( media ) ) ) {\r\n\t\t\t\tvar typeSupported = pf.verifyTypeSupport( source );\r\n\r\n\t\t\t\tif ( typeSupported === true ) {\r\n\t\t\t\t\tmatch = source;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else if ( typeSupported === \"pending\" ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t};\r\n\r\n\tfunction picturefill( opt ) {\r\n\t\tvar elements,\r\n\t\t\telement,\r\n\t\t\tparent,\r\n\t\t\tfirstMatch,\r\n\t\t\tcandidates,\r\n\r\n\t\t\toptions = opt || {};\r\n\t\t\telements = options.elements || pf.getAllElements();\r\n\r\n\t\t// Loop through all elements\r\n\t\tfor ( var i = 0, plen = elements.length; i < plen; i++ ) {\r\n\t\t\telement = elements[ i ];\r\n\t\t\tparent = element.parentNode;\r\n\t\t\tfirstMatch = undefined;\r\n\t\t\tcandidates = undefined;\r\n\r\n\t\t\t// expando for caching data on the img\r\n\t\t\tif ( !element[ pf.ns ] ) {\r\n\t\t\t\telement[ pf.ns ] = {};\r\n\t\t\t}\r\n\r\n\t\t\t// if the element has already been evaluated, skip it\r\n\t\t\t// unless `options.force` is set to true ( this, for example,\r\n\t\t\t// is set to true when running `picturefill` on `resize` ).\r\n\t\t\tif ( !options.reevaluate && element[ pf.ns ].evaluated ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// if `img` is in a `picture` element\r\n\t\t\tif ( parent.nodeName.toUpperCase() === \"PICTURE\" ) {\r\n\r\n\t\t\t\t// IE9 video workaround\r\n\t\t\t\tpf.removeVideoShim( parent );\r\n\r\n\t\t\t\t// return the first match which might undefined\r\n\t\t\t\t// returns false if there is a pending source\r\n\t\t\t\t// TODO the return type here is brutal, cleanup\r\n\t\t\t\tfirstMatch = pf.getMatch( element, parent );\r\n\r\n\t\t\t\t// if any sources are pending in this picture due to async type test(s)\r\n\t\t\t\t// remove the evaluated attr and skip for now ( the pending test will\r\n\t\t\t\t// rerun picturefill on this element when complete)\r\n\t\t\t\tif ( firstMatch === false ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfirstMatch = undefined;\r\n\t\t\t}\r\n\r\n\t\t\t// Cache and remove `srcset` if present and were going to be doing `picture`/`srcset`/`sizes` polyfilling to it.\r\n\t\t\tif ( parent.nodeName.toUpperCase() === \"PICTURE\" ||\r\n\t\t\t( element.srcset && !pf.srcsetSupported ) ||\r\n\t\t\t( !pf.sizesSupported && ( element.srcset && element.srcset.indexOf(\"w\") > -1 ) ) ) {\r\n\t\t\t\tpf.dodgeSrcset( element );\r\n\t\t\t}\r\n\r\n\t\t\tif ( firstMatch ) {\r\n\t\t\t\tcandidates = pf.processSourceSet( firstMatch );\r\n\t\t\t\tpf.applyBestCandidate( candidates, element );\r\n\t\t\t} else {\r\n\t\t\t\t// No sources matched, so were down to processing the inner `img` as a source.\r\n\t\t\t\tcandidates = pf.processSourceSet( element );\r\n\r\n\t\t\t\tif ( element.srcset === undefined || element[ pf.ns ].srcset ) {\r\n\t\t\t\t\t// Either `srcset` is completely unsupported, or we need to polyfill `sizes` functionality.\r\n\t\t\t\t\tpf.applyBestCandidate( candidates, element );\r\n\t\t\t\t} // Else, resolution-only `srcset` is supported natively.\r\n\t\t\t}\r\n\r\n\t\t\t// set evaluated to true to avoid unnecessary reparsing\r\n\t\t\telement[ pf.ns ].evaluated = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up picture polyfill by polling the document and running\r\n\t * the polyfill every 250ms until the document is ready.\r\n\t * Also attaches picturefill on resize\r\n\t */\r\n\tfunction runPicturefill() {\r\n\t\tpicturefill();\r\n\t\tvar intervalId = setInterval( function() {\r\n\t\t\t// When the document has finished loading, stop checking for new images\r\n\t\t\t// https://github.com/ded/domready/blob/master/ready.js#L15\r\n\t\t\tpicturefill();\r\n\t\t\tif ( /^loaded|^i|^c/.test( doc.readyState ) ) {\r\n\t\t\t\tclearInterval( intervalId );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}, 250 );\r\n\r\n\t\tfunction checkResize() {\r\n\t\t\tvar resizeThrottle;\r\n\t\t\tif (!w._picturefillWorking) {\r\n\t\t\t\tw._picturefillWorking = true;\r\n\t\t\t\tw.clearTimeout( resizeThrottle );\r\n\t\t\t\tresizeThrottle = w.setTimeout( function() {\r\n\t\t\t\t\tpicturefill({ reevaluate: true });\r\n\t\t\t\t\tw._picturefillWorking = false;\r\n\t\t\t\t}, 60 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( w.addEventListener ) {\r\n\t\t\tw.addEventListener( \"resize\", checkResize, false );\r\n\t\t} else if ( w.attachEvent ) {\r\n\t\t\tw.attachEvent( \"onresize\", checkResize );\r\n\t\t}\r\n\t}\r\n\r\n\trunPicturefill();\r\n\r\n\t/* expose methods for testing */\r\n\tpicturefill._ = pf;\r\n\r\n\t/* expose picturefill */\r\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\r\n\t\t// CommonJS, just export\r\n\t\tmodule.exports = picturefill;\r\n\t} else if ( typeof define === \"function\" && define.amd ){\r\n\t\t// AMD support\r\n\t\tdefine( function() { return picturefill; } );\r\n\t} else if ( typeof w === \"object\" ) {\r\n\t\t// If no AMD and we are in the browser, attach to window\r\n\t\tw.picturefill = picturefill;\r\n\t}\r\n\r\n} )( this, this.document );\r\n","/*!\n * The MIT License\n *\n * Copyright (c) 2012 James Allardice\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n( function ( global ) {\n\n  'use strict';\n\n  //\n  // Test for support. We do this as early as possible to optimise for browsers\n  // that have native support for the attribute.\n  //\n\n  var test = document.createElement('input');\n  var nativeSupport = test.placeholder !== void 0;\n\n  global.Placeholders = {\n    nativeSupport: nativeSupport,\n    disable: nativeSupport ? noop : disablePlaceholders,\n    enable: nativeSupport ? noop : enablePlaceholders\n  };\n\n  if ( nativeSupport ) {\n    return;\n  }\n\n  //\n  // If we reach this point then the browser does not have native support for\n  // the attribute.\n  //\n\n  // The list of input element types that support the placeholder attribute.\n  var validTypes = [\n    'text',\n    'search',\n    'url',\n    'tel',\n    'email',\n    'password',\n    'number',\n    'textarea'\n  ];\n\n  // The list of keycodes that are not allowed when the polyfill is configured\n  // to hide-on-input.\n  var badKeys = [\n\n    // The following keys all cause the caret to jump to the end of the input\n    // value.\n\n    27, // Escape\n    33, // Page up\n    34, // Page down\n    35, // End\n    36, // Home\n\n    // Arrow keys allow you to move the caret manually, which should be\n    // prevented when the placeholder is visible.\n\n    37, // Left\n    38, // Up\n    39, // Right\n    40, // Down\n\n    // The following keys allow you to modify the placeholder text by removing\n    // characters, which should be prevented when the placeholder is visible.\n\n    8, // Backspace\n    46 // Delete\n  ];\n\n  // Styling variables.\n  var placeholderStyleColor = '#ccc';\n  var placeholderClassName = 'placeholdersjs';\n  var classNameRegExp = new RegExp('(?:^|\\\\s)' + placeholderClassName + '(?!\\\\S)');\n\n  // The various data-* attributes used by the polyfill.\n  var ATTR_CURRENT_VAL = 'data-placeholder-value';\n  var ATTR_ACTIVE = 'data-placeholder-active';\n  var ATTR_INPUT_TYPE = 'data-placeholder-type';\n  var ATTR_FORM_HANDLED = 'data-placeholder-submit';\n  var ATTR_EVENTS_BOUND = 'data-placeholder-bound';\n  var ATTR_OPTION_FOCUS = 'data-placeholder-focus';\n  var ATTR_OPTION_LIVE = 'data-placeholder-live';\n  var ATTR_MAXLENGTH = 'data-placeholder-maxlength';\n\n  // Various other variables used throughout the rest of the script.\n  var UPDATE_INTERVAL = 100;\n  var head = document.getElementsByTagName('head')[ 0 ];\n  var root = document.documentElement;\n  var Placeholders = global.Placeholders;\n  var keydownVal;\n\n  // Get references to all the input and textarea elements currently in the DOM\n  // (live NodeList objects to we only need to do this once).\n  var inputs = document.getElementsByTagName('input');\n  var textareas = document.getElementsByTagName('textarea');\n\n  // Get any settings declared as data-* attributes on the root element.\n  // Currently the only options are whether to hide the placeholder on focus\n  // or input and whether to auto-update.\n  var hideOnInput = root.getAttribute(ATTR_OPTION_FOCUS) === 'false';\n  var liveUpdates = root.getAttribute(ATTR_OPTION_LIVE) !== 'false';\n\n  // Create style element for placeholder styles (instead of directly setting\n  // style properties on elements - allows for better flexibility alongside\n  // user-defined styles).\n  var styleElem = document.createElement('style');\n  styleElem.type = 'text/css';\n\n  // Create style rules as text node.\n  var styleRules = document.createTextNode(\n    '.' + placeholderClassName + ' {' +\n      'color:' + placeholderStyleColor + ';' +\n    '}'\n  );\n\n  // Append style rules to newly created stylesheet.\n  if ( styleElem.styleSheet ) {\n    styleElem.styleSheet.cssText = styleRules.nodeValue;\n  } else {\n    styleElem.appendChild(styleRules);\n  }\n\n  // Prepend new style element to the head (before any existing stylesheets,\n  // so user-defined rules take precedence).\n  head.insertBefore(styleElem, head.firstChild);\n\n  // Set up the placeholders.\n  var placeholder;\n  var elem;\n\n  for ( var i = 0, len = inputs.length + textareas.length; i < len; i++ ) {\n\n    // Find the next element. If we've already done all the inputs we move on\n    // to the textareas.\n    elem = i < inputs.length ? inputs[ i ] : textareas[ i - inputs.length ];\n\n    // Get the value of the placeholder attribute, if any. IE10 emulating IE7\n    // fails with getAttribute, hence the use of the attributes node.\n    placeholder = elem.attributes.placeholder;\n\n    // If the element has a placeholder attribute we need to modify it.\n    if ( placeholder ) {\n\n      // IE returns an empty object instead of undefined if the attribute is\n      // not present.\n      placeholder = placeholder.nodeValue;\n\n      // Only apply the polyfill if this element is of a type that supports\n      // placeholders and has a placeholder attribute with a non-empty value.\n      if ( placeholder && inArray(validTypes, elem.type) ) {\n        newElement(elem);\n      }\n    }\n  }\n\n  // If enabled, the polyfill will repeatedly check for changed/added elements\n  // and apply to those as well.\n  var timer = setInterval(function () {\n    for ( var i = 0, len = inputs.length + textareas.length; i < len; i++ ) {\n      elem = i < inputs.length ? inputs[ i ] : textareas[ i - inputs.length ];\n\n      // Only apply the polyfill if this element is of a type that supports\n      // placeholders, and has a placeholder attribute with a non-empty value.\n      placeholder = elem.attributes.placeholder;\n\n      if ( placeholder ) {\n\n        placeholder = placeholder.nodeValue;\n\n        if ( placeholder && inArray(validTypes, elem.type) ) {\n\n          // If the element hasn't had event handlers bound to it then add\n          // them.\n          if ( !elem.getAttribute(ATTR_EVENTS_BOUND) ) {\n            newElement(elem);\n          }\n\n          // If the placeholder value has changed or not been initialised yet\n          // we need to update the display.\n          if (\n            placeholder !== elem.getAttribute(ATTR_CURRENT_VAL) ||\n            ( elem.type === 'password' && !elem.getAttribute(ATTR_INPUT_TYPE) )\n          ) {\n\n            // Attempt to change the type of password inputs (fails in IE < 9).\n            if (\n              elem.type === 'password' &&\n              !elem.getAttribute(ATTR_INPUT_TYPE) &&\n              changeType(elem, 'text')\n            ) {\n              elem.setAttribute(ATTR_INPUT_TYPE, 'password');\n            }\n\n            // If the placeholder value has changed and the placeholder is\n            // currently on display we need to change it.\n            if ( elem.value === elem.getAttribute(ATTR_CURRENT_VAL) ) {\n              elem.value = placeholder;\n            }\n\n            // Keep a reference to the current placeholder value in case it\n            // changes via another script.\n            elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\n          }\n        }\n      } else if ( elem.getAttribute(ATTR_ACTIVE) ) {\n        hidePlaceholder(elem);\n        elem.removeAttribute(ATTR_CURRENT_VAL);\n      }\n    }\n\n    // If live updates are not enabled cancel the timer.\n    if ( !liveUpdates ) {\n      clearInterval(timer);\n    }\n  }, UPDATE_INTERVAL);\n\n  // Disabling placeholders before unloading the page prevents flash of\n  // unstyled placeholders on load if the page was refreshed.\n  addEventListener(global, 'beforeunload', function () {\n    Placeholders.disable();\n  });\n\n  //\n  // Utility functions\n  //\n\n  // No-op (used in place of public methods when native support is detected).\n  function noop() {}\n\n  // Avoid IE9 activeElement of death when an iframe is used.\n  //\n  // More info:\n  //  - http://bugs.jquery.com/ticket/13393\n  //  - https://github.com/jquery/jquery/commit/85fc5878b3c6af73f42d61eedf73013e7faae408\n  function safeActiveElement() {\n    try {\n      return document.activeElement;\n    } catch ( err ) {}\n  }\n\n  // Check whether an item is in an array. We don't use Array.prototype.indexOf\n  // so we don't clobber any existing polyfills. This is a really simple\n  // alternative.\n  function inArray( arr, item ) {\n    for ( var i = 0, len = arr.length; i < len; i++ ) {\n      if ( arr[ i ] === item ) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Cross-browser DOM event binding\n  function addEventListener( elem, event, fn ) {\n    if ( elem.addEventListener ) {\n      return elem.addEventListener(event, fn, false);\n    }\n    if ( elem.attachEvent ) {\n      return elem.attachEvent('on' + event, fn);\n    }\n  }\n\n  // Move the caret to the index position specified. Assumes that the element\n  // has focus.\n  function moveCaret( elem, index ) {\n    var range;\n    if ( elem.createTextRange ) {\n      range = elem.createTextRange();\n      range.move('character', index);\n      range.select();\n    } else if ( elem.selectionStart ) {\n      elem.focus();\n      elem.setSelectionRange(index, index);\n    }\n  }\n\n  // Attempt to change the type property of an input element.\n  function changeType( elem, type ) {\n    try {\n      elem.type = type;\n      return true;\n    } catch ( e ) {\n      // You can't change input type in IE8 and below.\n      return false;\n    }\n  }\n\n  function handleElem( node, callback ) {\n\n    // Check if the passed in node is an input/textarea (in which case it can't\n    // have any affected descendants).\n    if ( node && node.getAttribute(ATTR_CURRENT_VAL) ) {\n      callback(node);\n    } else {\n\n      // If an element was passed in, get all affected descendants. Otherwise,\n      // get all affected elements in document.\n      var handleInputs = node ? node.getElementsByTagName('input') : inputs;\n      var handleTextareas = node ? node.getElementsByTagName('textarea') : textareas;\n\n      var handleInputsLength = handleInputs ? handleInputs.length : 0;\n      var handleTextareasLength = handleTextareas ? handleTextareas.length : 0;\n\n      // Run the callback for each element.\n      var len = handleInputsLength + handleTextareasLength;\n      var elem;\n      for ( var i = 0; i < len; i++ ) {\n\n        elem = i < handleInputsLength ?\n          handleInputs[ i ] :\n          handleTextareas[ i - handleInputsLength ];\n\n        callback(elem);\n      }\n    }\n  }\n\n  // Return all affected elements to their normal state (remove placeholder\n  // value if present).\n  function disablePlaceholders( node ) {\n    handleElem(node, hidePlaceholder);\n  }\n\n  // Show the placeholder value on all appropriate elements.\n  function enablePlaceholders( node ) {\n    handleElem(node, showPlaceholder);\n  }\n\n  // Hide the placeholder value on a single element. Returns true if the\n  // placeholder was hidden and false if it was not (because it wasn't visible\n  // in the first place).\n  function hidePlaceholder( elem, keydownValue ) {\n\n    var valueChanged = !!keydownValue && elem.value !== keydownValue;\n    var isPlaceholderValue = elem.value === elem.getAttribute(ATTR_CURRENT_VAL);\n\n    if (\n      ( valueChanged || isPlaceholderValue ) &&\n      elem.getAttribute(ATTR_ACTIVE) === 'true'\n    ) {\n\n      elem.removeAttribute(ATTR_ACTIVE);\n      elem.value = elem.value.replace(elem.getAttribute(ATTR_CURRENT_VAL), '');\n      elem.className = elem.className.replace(classNameRegExp, '');\n\n      // Restore the maxlength value. Old FF returns -1 if attribute not set.\n      // See GH-56.\n      var maxLength = elem.getAttribute(ATTR_MAXLENGTH);\n      if ( parseInt(maxLength, 10) >= 0 ) {\n        elem.setAttribute('maxLength', maxLength);\n        elem.removeAttribute(ATTR_MAXLENGTH);\n      }\n\n      // If the polyfill has changed the type of the element we need to change\n      // it back.\n      var type = elem.getAttribute(ATTR_INPUT_TYPE);\n      if ( type ) {\n        elem.type = type;\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  // Show the placeholder value on a single element. Returns true if the\n  // placeholder was shown and false if it was not (because it was already\n  // visible).\n  function showPlaceholder( elem ) {\n\n    var val = elem.getAttribute(ATTR_CURRENT_VAL);\n\n    if ( elem.value === '' && val ) {\n\n      elem.setAttribute(ATTR_ACTIVE, 'true');\n      elem.value = val;\n      elem.className += ' ' + placeholderClassName;\n\n      // Store and remove the maxlength value.\n      var maxLength = elem.getAttribute(ATTR_MAXLENGTH);\n      if ( !maxLength ) {\n        elem.setAttribute(ATTR_MAXLENGTH, elem.maxLength);\n        elem.removeAttribute('maxLength');\n      }\n\n      // If the type of element needs to change, change it (e.g. password\n      // inputs).\n      var type = elem.getAttribute(ATTR_INPUT_TYPE);\n      if ( type ) {\n        elem.type = 'text';\n      } else if ( elem.type === 'password' && changeType(elem, 'text') ) {\n        elem.setAttribute(ATTR_INPUT_TYPE, 'password');\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  // Returns a function that is used as a focus event handler.\n  function makeFocusHandler( elem ) {\n    return function () {\n\n      // Only hide the placeholder value if the (default) hide-on-focus\n      // behaviour is enabled.\n      if (\n        hideOnInput &&\n        elem.value === elem.getAttribute(ATTR_CURRENT_VAL) &&\n        elem.getAttribute(ATTR_ACTIVE) === 'true'\n      ) {\n\n        // Move the caret to the start of the input (this mimics the behaviour\n        // of all browsers that do not hide the placeholder on focus).\n        moveCaret(elem, 0);\n      } else {\n\n        // Remove the placeholder.\n        hidePlaceholder(elem);\n      }\n    };\n  }\n\n  // Returns a function that is used as a blur event handler.\n  function makeBlurHandler( elem ) {\n    return function () {\n      showPlaceholder(elem);\n    };\n  }\n\n  // Returns a function that is used as a submit event handler on form elements\n  // that have children affected by this polyfill.\n  function makeSubmitHandler( form ) {\n    return function () {\n\n        // Turn off placeholders on all appropriate descendant elements.\n        disablePlaceholders(form);\n    };\n  }\n\n  // Functions that are used as a event handlers when the hide-on-input\n  // behaviour has been activated - very basic implementation of the 'input'\n  // event.\n  function makeKeydownHandler( elem ) {\n    return function ( e ) {\n      keydownVal = elem.value;\n\n      // Prevent the use of the arrow keys (try to keep the cursor before the\n      // placeholder).\n      if (\n        elem.getAttribute(ATTR_ACTIVE) === 'true' &&\n        keydownVal === elem.getAttribute(ATTR_CURRENT_VAL) &&\n        inArray(badKeys, e.keyCode)\n      ) {\n        if ( e.preventDefault ) {\n            e.preventDefault();\n        }\n        return false;\n      }\n    };\n  }\n\n  function makeKeyupHandler(elem) {\n    return function () {\n      hidePlaceholder(elem, keydownVal);\n\n      // If the element is now empty we need to show the placeholder\n      if ( elem.value === '' ) {\n        elem.blur();\n        moveCaret(elem, 0);\n      }\n    };\n  }\n\n  function makeClickHandler(elem) {\n    return function () {\n      if (\n        elem === safeActiveElement() &&\n        elem.value === elem.getAttribute(ATTR_CURRENT_VAL) &&\n        elem.getAttribute(ATTR_ACTIVE) === 'true'\n      ) {\n        moveCaret(elem, 0);\n      }\n    };\n  }\n\n  // Bind event handlers to an element that we need to affect with the\n  // polyfill.\n  function newElement( elem ) {\n\n    // If the element is part of a form, make sure the placeholder string is\n    // not submitted as a value.\n    var form = elem.form;\n    if ( form && typeof form === 'string' ) {\n\n      // Get the real form.\n      form = document.getElementById(form);\n\n      // Set a flag on the form so we know it's been handled (forms can contain\n      // multiple inputs).\n      if ( !form.getAttribute(ATTR_FORM_HANDLED) ) {\n        addEventListener(form, 'submit', makeSubmitHandler(form));\n        form.setAttribute(ATTR_FORM_HANDLED, 'true');\n      }\n    }\n\n    // Bind event handlers to the element so we can hide/show the placeholder\n    // as appropriate.\n    addEventListener(elem, 'focus', makeFocusHandler(elem));\n    addEventListener(elem, 'blur', makeBlurHandler(elem));\n\n    // If the placeholder should hide on input rather than on focus we need\n    // additional event handlers\n    if (hideOnInput) {\n      addEventListener(elem, 'keydown', makeKeydownHandler(elem));\n      addEventListener(elem, 'keyup', makeKeyupHandler(elem));\n      addEventListener(elem, 'click', makeClickHandler(elem));\n    }\n\n    // Remember that we've bound event handlers to this element.\n    elem.setAttribute(ATTR_EVENTS_BOUND, 'true');\n    elem.setAttribute(ATTR_CURRENT_VAL, placeholder);\n\n    // If the element doesn't have a value and is not focussed, set it to the\n    // placeholder string.\n    if ( hideOnInput || elem !== safeActiveElement() ) {\n      showPlaceholder(elem);\n    }\n  }\n\n}(this) );\n","// Autocomplete\r\n\r\nvar initAutocomplete = function() {\r\n\tif ( $(\"[data-autocomplete]\").length ) {\r\n\t\t$(\"[data-autocomplete]\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\tinput = el.children(\"input\"),\r\n\t\t\t\titemIndex = -1,\r\n\t\t\t\turl = el.data(\"autocomplete\"),\r\n\t\t\t\tparameter = input.data(\"autocomplete-parameter\"),\r\n\t\t\t\tselecting = false;\r\n\r\n\t\t\tel.append(\"<div class='divider'>\" + parameter + \"</div>\");\r\n\t\t\tel.append(\"<ul class='autocomplete-results'></ul>\");\r\n\t\t\tvar list = el.children(\"ul\");\r\n\r\n\t\t\tvar buildSystem = function(data) {\r\n\t\t\t\tvar JSONobjects = data.Results;\r\n\r\n\t\t\t\tvar populateList = function(parameter) {\r\n\t\t\t\t\tvar tempArray = [];\r\n\r\n\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\tvar object = JSONobjects[i];\r\n\t\t\t\t\t\tvar property = object[parameter];\r\n\r\n\t\t\t\t\t\tif ( property instanceof Array ) {\r\n\t\t\t\t\t\t\tfor ( var j = 0; j < property.length; j++ ) {\r\n\t\t\t\t\t\t\t\tif ( $.inArray(property[j], tempArray) < 0 ) tempArray.push(property[j]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ( $.inArray(property, tempArray) < 0 ) tempArray.push(property);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttempArray.sort();\r\n\r\n\t\t\t\t\tfor ( var k = 0; k < tempArray.length; k++ ) list.append(\"<li>\" + tempArray[k] + \"</li>\");\r\n\t\t\t\t}\r\n\t\t\t\tpopulateList(parameter);\r\n\r\n\r\n\t\t\t\tvar item = list.children(\"li\").not(\".divider\");\r\n\r\n\t\t\t\tlist.on(\"mouseenter\", function() {\r\n\t\t\t\t\tselecting = true;\r\n\t\t\t\t}).on(\"mouseleave\", function() {\r\n\t\t\t\t\tselecting = false;\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tinput\r\n\t\t\t\t\t.on(\"keydown\", function(event) {\r\n\t\t\t\t\t\tif ( list.hasClass(\"active\") ) {\r\n\t\t\t\t\t\t\tvar selectedItem = list.children(\"li.selected\");\r\n\r\n\t\t\t\t\t\t\tif ( event.keyCode === 38 && itemIndex > -1 ) { // Arrow Up\r\n\t\t\t\t\t\t\t\titem.removeClass(\"active\");\r\n\t\t\t\t\t\t\t\titemIndex--;\r\n\t\t\t\t\t\t\t\tselectedItem.eq(itemIndex).addClass(\"active\");\r\n\r\n\t\t\t\t\t\t\t\t// Self scroll up on every 6th item\r\n\t\t\t\t\t\t\t\tif ( itemIndex % 7 === 6 )\tlist.scrollTop((item.outerHeight() - 1) * (7 * ((itemIndex - 6) / 7)));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( event.keyCode === 40 && itemIndex < selectedItem.length - 1 ) { // Arrow Down\r\n\t\t\t\t\t\t\t\titem.removeClass(\"active\");\r\n\t\t\t\t\t\t\t\titemIndex++;\r\n\t\t\t\t\t\t\t\tselectedItem.eq(itemIndex).addClass(\"active\");\r\n\r\n\t\t\t\t\t\t\t\t// Self scroll down on every 7th item\r\n\t\t\t\t\t\t\t\tif ( itemIndex % 7 === 0 )\tlist.scrollTop((item.outerHeight() - 1) * (7 * (itemIndex / 7)));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( event.keyCode === 9 || event.keyCode === 13 ) { // Enter or Tab\r\n\t\t\t\t\t\t\t\tinput.val(list.children(\"li.active\").text());\r\n\t\t\t\t\t\t\t\titem.removeClass(\"active\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( event.keyCode === 8 || event.keyCode === 46 ) { // Backspace and Delete\r\n\t\t\t\t\t\t\t\titem.removeClass(\"active\");\r\n\t\t\t\t\t\t\t\titemIndex = -1;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( event.keyCode === 27 ) { // Escape\r\n\t\t\t\t\t\t\t\tinput.blur();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"keyup\", function(event) {\r\n\t\t\t\t\t\tshowResults(this);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"focus\", function() {\r\n\t\t\t\t\t\titemIndex = list.children(\"li.active\").length ? itemIndex : -1;\r\n\t\t\t\t\t\tshowResults(this);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"blur\", function() {\r\n\t\t\t\t\t\tif ( selecting === false ) {\r\n\t\t\t\t\t\t\tel.removeClass(\"active\");\r\n\t\t\t\t\t\t\tunhighlight(list.find(\"li\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\tvar showResults = function(target) {\r\n\t\t\t\t\tvar filter = $(target).val();\r\n\r\n\t\t\t\t\titem.each(function() {\r\n\t\t\t\t\t\tif ( $(this).text().search(new RegExp(filter, \"i\")) < 0 ) {\r\n\t\t\t\t\t\t\t$(this).removeClass(\"selected\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(this).addClass(\"selected\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).on(\"click\", function() {\r\n\t\t\t\t\t\tinput.val($(this).text()).trigger({type: \"keydown\", which: 13});\r\n\t\t\t\t\t\tel.removeClass(\"active\");\r\n\t\t\t\t\t\tunhighlight(list.find(\"li\"));\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif ( filter.length > 0 && item.hasClass(\"selected\") ) {\r\n\t\t\t\t\t\tel.addClass(\"active\");\r\n\t\t\t\t\t\thighlight(list.find(\"li\"), filter);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tel.removeClass(\"active\");\r\n\t\t\t\t\t\tunhighlight(list.find(\"li\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tdataRequest(url, \"GET\", buildSystem);\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Search :: Autocomplete\");\r\n\t}\r\n}","// Brochure System\n\nvar clearBrochure = function() {\n\t$(\".brochure-counter\").html(0);\n\tsessionSystem.remove(\"brochure\");\n}\n\nvar initBrochure = function() {\n\tif ( config.brochure.active ) {\n\t\t$(\".brochure-trigger\").show().on(\"click\", function() {\n\t\t\tif (!$(\".brochure-wrapper\").hasClass(\"active\")) {\n\t\t\t\t$(this).addClass(\"active\");\n\t\t\t\t$(\".brochure-wrapper\").addClass(\"active\");\n\t\t\t} else {\n\t\t\t\t$(this).removeClass(\"active\");\n\t\t\t\t$(\".brochure-wrapper\").removeClass(\"active\");\n\t\t\t}\n\t\t});\n\t\t$(document).on(\"click\", function(event) {\n\t\t\tif (!$(event.target).closest(\".brochure-trigger,.brochure-item, .brochure-wrapper.active\").length) {\n\t\t\t\t$(\".brochure-trigger, .brochure-wrapper\").removeClass(\"active\");\n\t\t\t}\n\t\t});\n\n\n\t\tvar brochure = [],\n\t\t\tbrochureCompare = [],\n\t\t\tbrochureData = sessionSystem.get(\"brochure\"),\n\t\t\tbrochureDetails = {\n\t\t\t\tName: document.title,\n\t\t\t\tURL: document.location.href\n\t\t\t};\n\n\t\tif ( typeof AddToBrochure === \"undefined\" ) var AddToBrochure = true;\n\n\t\tif ( brochureData === undefined ) {\n\t\t\tif ( AddToBrochure ) brochure.push(brochureDetails);\n\t\t\tsessionSystem.set(\"brochure\", brochure);\n\t\t} else {\n\t\t\tfor ( var i = 0; i < brochureData.length; i++ ) {\n\t\t\t\tbrochure.push(brochureData[i]);\n\t\t\t\tbrochureCompare.push(brochureData[i].URL == brochureDetails.URL);\n\t\t\t}\n\n\t\t\tif ( AddToBrochure && !brochureCompare.contains(true) ) brochure.push(brochureDetails);\n\t\t\tsessionSystem.set(\"brochure\", brochure);\n\t\t}\n\n\t\t$(\".brochure-counter\").html(brochure.length);\n\t\tif ( brochure.length == 1 ) notify(\"Current page was added to your brochure.\");\n\n\t\tfor ( var j = 0; j < brochure.length; j++ ) {\n\t\t\tvar brochureItem = '<div class=\"brochure-item\" data-url=\"' + brochure[j].URL + '\">\\\n\t\t\t\t\t\t\t\t\t<span class=\"brochure-item-name\">' + brochure[j].Name + '</span>\\\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-close\" src=\"' + config.application.root + 'img/icons/icon-close.svg\" width=\"16\" height=\"16\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-close.png\\'\" alt=\"Delete icon\">\\\n\t\t\t\t\t\t\t\t</div>';\n\n\t\t\t$(\".brochure-item-wrapper\").append(brochureItem);\n\t\t}\n\n\t\t$(\".brochure-item\").on(\"click\", function() {\n\t\t\tvar name = $(this).children(\"span\").html();\n\t\t\tvar url = $(this).data(\"url\");\n\n\t\t\t$(this).remove();\n\n\t\t\tfor ( var k = 0; k < brochure.length; k++ ) {\n\t\t\t\tif ( brochure[k].URL == url ) brochure.splice(k,1);\n\t\t\t}\n\n\t\t\t$(\".brochure-counter\").html(brochure.length);\n\n\t\t\tsessionSystem.set(\"brochure\", brochure);\n\t\t});\n\n\t\tif ( config.application.debug ) console.log(\"System :: Brochure System\");\n\t}\n}","// Accessibility: Global font resizing controls\n\nvar initFontSizeControls = function() {\n\tif ( $(\".font-wrapper\").length ) {\n\t\t$(\".font-trigger\").on(\"click\", function(event) {\n\t\t\tif ( !$(event.target).closest(\".font-wrapper\").length ) {\n\t\t\t\tif ( !$(\".font-wrapper\").hasClass(\"active\") ) {\n\t\t\t\t\t$(this).addClass(\"active\");\n\t\t\t\t\t$(\".font-wrapper\").addClass(\"active\");\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeClass(\"active\");\n\t\t\t\t\t$(\".font-wrapper\").removeClass(\"active\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t$(document).on(\"click\", function(event) {\n\t\t\tif (!$(event.target).closest(\".font-trigger.active, .font-wrapper.active\").length) {\n\t\t\t\t$(\".font-trigger, .font-wrapper\").removeClass(\"active\");\n\t\t\t}\n\t\t});\n\n\n\t\tvar defaultSize = 10,\n\t\t\tfontSize = defaultSize,\n\t\t\trange = config.typography.resize.range;\n\n\t\tif ( cookieSystem.get(\"fontSize\") === null ) cookieSystem.set(\"fontSize\", fontSize, 365);\n\n\t\tfontSize = cookieSystem.get(\"fontSize\");\n\t\t$(\"html\").css(\"font-size\", fontSize + \"px\");\n\n\t\t$(\".font-up\").click(function() {\n\t\t\tif( fontSize < defaultSize + range ) fontSize++;\n\t\t\tcookieSystem.set(\"fontSize\", fontSize, 365);\n\t\t\tfontSize = cookieSystem.get(\"fontSize\");\n\t\t\t$(\"html\").css(\"font-size\", fontSize + \"px\");\n\t\t});\n\n\t\t$(\".font-reset\").click(function() {\n\t\t\tfontSize = defaultSize;\n\t\t\tcookieSystem.set(\"fontSize\", fontSize, 365);\n\t\t\tfontSize = cookieSystem.get(\"fontSize\");\n\t\t\t$(\"html\").css(\"font-size\", fontSize + \"px\");\n\t\t});\n\n\t\t$(\".font-down\").click(function() {\n\t\t\tif( fontSize > defaultSize - range ) fontSize--;\n\t\t\tcookieSystem.set(\"fontSize\", fontSize, 365);\n\t\t\tfontSize = cookieSystem.get(\"fontSize\");\n\t\t\t$(\"html\").css(\"font-size\", fontSize + \"px\");\n\t\t});\n\n\t\tif ( config.application.debug ) console.log(\"Widget :: Font Size Controls\");\n\t}\n}\n\n\n\n// Automated responsive text resizing\n\nvar textResize = function(elem) {\n\tvar el = $(elem);\n\tvar charLimit = config.typography.autoresize.characters;\n\tvar rowLimit = config.typography.autoresize.rows;\n\tvar minFontSize = config.typography.autoresize.minFontSize;\n\tvar maxFontSize = config.typography.autoresize.maxFontSize;\n\tvar fontSize = minFontSize;\n\n\tvar stringRebuild = (function() {\n\t\tif ( !el.hasClass(\"rebuilt\") ) {\n\t\t\tvar string = el.text();\n\n\t\t\tif ( !el.children(\"span\").length ) el.empty().append(\"<span>\" + string + \"</span>\");\n\n\t\t\tvar span = el.children(\"span\");\n\t\t\tvar stringContent = span.text().trim();\n\t\t\tvar stringLength = stringContent.length;\n\t\t\tvar stringFinal = \"\";\n\t\t\tvar stringHalf = Math.round(stringLength / 2);\n\t\t\tvar spaceFound = false;\n\n\t\t\tif ( stringLength > charLimit && rowLimit > 1 ) {\n\t\t\t\tfor ( var i = 0; i < stringLength; i++ ) {\n\t\t\t\t\tif ( !spaceFound && i > stringHalf && /\\s/.test(stringContent[i]) ) {\n\t\t\t\t\t\tstringFinal += \"<span>&#32;</span>\";\n\t\t\t\t\t\tspaceFound = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstringFinal += stringContent[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tspan.html(stringFinal);\n\t\t\t}\n\n\t\t\tel.addClass(\"rebuilt\");\n\t\t}\n\t})();\n\n\tvar stringResize = (function() {\n\t\tdo {\n\t\t\tfontSize--;\n\t\t\tel.css('font-size', fontSize.toString() + 'px');\n\t\t} while (el.children(\"span\").width() > el.width() && fontSize >= minFontSize);\n\n\t\tdo {\n\t\t\tfontSize++;\n\t\t\tel.css('font-size', fontSize.toString() + 'px');\n\t\t} while (el.children(\"span\").width() < el.width() && fontSize <= maxFontSize);\n\n\t\tif ( !el.hasClass(\"resized\") ) el.addClass(\"resized\");\n\t})();\n}","// Konami Easter Egg\r\n\r\nvar initKonami = function(callback) {\r\n\tvar userCode = [],\r\n\t\tuserString = \"\",\r\n\t\tkonamiCoding = false;\r\n\r\n\tvar buildKonami = function() {\r\n\t\tvar img = '<img class=\"konami\" style=\"width: 100%;\" src=\"scripts/core/konami/contra.gif\">';\r\n\t\t$(\".main\").prepend(img);\r\n\t}\r\n\r\n\tvar resetKonami = function() {\r\n\t\tuserCode = [];\r\n\t\tuserString = \"\";\r\n\t\tkonamiCoding = false;\r\n\r\n\t\t$(\".konami\").remove();\r\n\t}\r\n\r\n\tvar callKonami = function(event) {\r\n\t\tvar konamiCode = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];\r\n\t\tvar konamiString = konamiCode.join(\", \");\r\n\r\n\t\tif ( event.keyCode == 38 ) konamiCoding = true;\r\n\r\n\t\tif ( konamiCoding && userString.length <= konamiString.length ) {\r\n\t\t\tif ( userString.indexOf(konamiString) == -1 ) {\r\n\t\t\t\tuserCode.push(event.keyCode);\r\n\t\t\t\tuserString = userCode.join(\", \");\r\n\t\t\t}\r\n\r\n\t\t\tif ( userString.indexOf(konamiString) != -1 ) {\r\n\t\t\t\tconsole.log(\"Easter Egg :: Konami!\");\r\n\t\t\t\tresetKonami();\r\n\t\t\t\tbuildKonami();\r\n\r\n\t\t\t\tif ( event.keyCode == 27 ) {\r\n\t\t\t\t\tresetKonami();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresetKonami();\r\n\t\t}\r\n\t}\r\n\r\n\t$(document).on(\"keyup\", callKonami);\r\n\r\n\tif ( config.application.debug ) console.log(\"Widget :: Konami\");\r\n}","var map,\r\n\tthemes = {\r\n\t\tBentley: [\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#F1FF00\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": -27.4\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 9.4\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road.highway\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#0099FF\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": -20\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 36.4\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road.arterial\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#00FF4F\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road.local\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#FFB300\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": -38\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 11.2\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"water\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#00B6FF\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": 4.2\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": -63.4\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#9FFF00\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"gamma\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t],\r\n\t\tMapBox: [\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"water\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": 43\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": -11\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#0088ff\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"hue\": \"#ff0000\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": -100\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 99\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"geometry.stroke\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#808080\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 54\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape.man_made\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#ece2d9\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi.park\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#ccdca1\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#767676\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"labels.text.stroke\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#ffffff\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape.natural\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#b8cb93\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi.park\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi.sports_complex\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi.medical\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi.business\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t],\r\n\t\tPastelTones: [\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"saturation\": -100 },\r\n\t\t\t\t\t{ \"lightness\": 60 }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"road.local\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"saturation\": -100 },\r\n\t\t\t\t\t{ \"lightness\": 40 },\r\n\t\t\t\t\t{ \"visibility\": \"on\" }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"transit\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"saturation\": -100 },\r\n\t\t\t\t\t{ \"visibility\": \"simplified\" }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"administrative.province\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"visibility\": \"off\" }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"water\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"visibility\": \"on\" },\r\n\t\t\t\t\t{ \"lightness\": 30 }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"road.highway\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"color\": \"#ef8c25\" },\r\n\t\t\t\t\t{ \"lightness\": 40 }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"road.highway\",\r\n\t\t\t\t\"elementType\": \"geometry.stroke\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"visibility\": \"off\" }\r\n\t\t\t\t]\r\n\t\t\t},{\r\n\t\t\t\t\"featureType\": \"poi.park\",\r\n\t\t\t\t\"elementType\": \"geometry.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{ \"color\": \"#b6c54c\" },\r\n\t\t\t\t\t{ \"lightness\": 40 },\r\n\t\t\t\t\t{ \"saturation\": -40 }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t],\r\n\t\tLightOnDarkGray: [\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"administrative\",\r\n\t\t\t\t\"elementType\": \"labels.text.fill\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#444444\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#f2f2f2\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"saturation\": -100\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"lightness\": 45\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road.highway\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"simplified\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road.arterial\",\r\n\t\t\t\t\"elementType\": \"labels.icon\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"transit\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"water\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#4f595d\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"on\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t],\r\n\t\tGrayscale: [\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"administrative\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"water\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#EAEAEA\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"landscape\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#838383\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"poi\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"color\": \"#838383\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"road\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"transit\",\r\n\t\t\t\t\"elementType\": \"all\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"featureType\": \"all\",\r\n\t\t\t\t\"elementType\": \"labels\",\r\n\t\t\t\t\"stylers\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"visibility\": \"off\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\r\n\r\nvar testHiRes = function() {\r\n    var dpr = window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI) || 1;\r\n    return !!(dpr > 1);\r\n};\r\n\r\nvar buildMap = function() {\r\n\tvar init = function(data) {\r\n\t\tvar mapOptions = {\r\n\t\t\tcenter: new google.maps.LatLng(data.Options[0].CenterLat, data.Options[0].CenterLng),\r\n\t\t\tzoom: data.Options[0].Zoom,\r\n\t\t\tzoomControl: true,\r\n\t\t\tzoomControlOptions: {\r\n\t\t\t\tstyle: google.maps.ZoomControlStyle.LARGE\r\n\t\t\t},\r\n\t\t\tdisableDoubleClickZoom: false,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tmapTypeControlOptions: {\r\n\t\t\t\tstyle: google.maps.MapTypeControlStyle.HORIZONTAL_BAR\r\n\t\t\t},\r\n\t\t\tscale: testHiRes() ? 2 : 1,\r\n\t\t\tscaleControl: false,\r\n\t\t\tscrollwheel: false,\r\n\t\t\tpanControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\tdraggable: true,\r\n\t\t\toverviewMapControl: false,\r\n\t\t\toverviewMapControlOptions: {\r\n\t\t\t\topened: false\r\n\t\t\t},\r\n\t\t\tmapTypeId: google.maps.MapTypeId.ROADMAP,\r\n\t\t\tstyles: themes.MapBox\r\n\t\t};\r\n\r\n\t\tvar mapElement = document.getElementById('map-canvas');\r\n\t\tmap = new google.maps.Map(mapElement, mapOptions);\r\n\r\n\t\tvar bindInfoWindow = function(marker, map, title, desc, telephone, email, web) {\r\n\t\t\tif (web.substring(0, 7) != \"http://\") {\r\n\t\t\t\tlink = \"http://\" + web;\r\n\t\t\t} else {\r\n\t\t\t\tlink = web;\r\n\t\t\t}\r\n\r\n\t\t\tvar infoWindowVisible = (function() {\r\n\t\t\t\tvar currentlyVisible = false;\r\n\r\n\t\t\t\treturn function(visible) {\r\n\t\t\t\t\tif (visible !== undefined) {\r\n\t\t\t\t\t\tcurrentlyVisible = visible;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn currentlyVisible;\r\n\t\t\t\t};\r\n\t\t\t}());\r\n\r\n\t\t\tiw = new google.maps.InfoWindow();\r\n\r\n\t\t\tgoogle.maps.event.addListener(marker, 'click', function() {\r\n\t\t\t\t// if (infoWindowVisible()) {\r\n\t\t\t\t\tiw.close();\r\n\t\t\t\t\tinfoWindowVisible(false);\r\n\t\t\t\t// } else {\r\n\t\t\t\t\tvar html = \"<div class='gm-info'><h4>\" + title + \"</h4><p>\" + desc + \"<p><p>\" + telephone + \"<p><a href='mailto:\" + email + \"' >\" + email + \"<a><a href='\" + link + \"'' >\" + web + \"<a></div>\";\r\n\t\t\t\t\tiw = new google.maps.InfoWindow(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontent: html\r\n\t\t\t\t\t});\r\n\t\t\t\t\tiw.open(map, marker);\r\n\t\t\t\t\tinfoWindowVisible(true);\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\r\n\t\t\tgoogle.maps.event.addListener(iw, 'closeclick', function() {\r\n\t\t\t\tinfoWindowVisible(false);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfor (i = 0; i < data.Markers.length; i++) {\r\n\r\n\t\t\tmarker = new google.maps.Marker( {\r\n\t\t\t\ticon: data.Markers[i].Marker,\r\n\t\t\t\tposition: new google.maps.LatLng(data.Markers[i].Lat, data.Markers[i].Lng),\r\n\t\t\t\tmap: map,\r\n\t\t\t\ttitle: data.Markers[i].Title,\r\n\t\t\t\tdesc: data.Markers[i].Desc,\r\n\t\t\t\ttel: data.Markers[i].Tel,\r\n\t\t\t\temail: data.Markers[i].Email,\r\n\t\t\t\tweb: data.Markers[i].Url\r\n\t\t\t});\r\n\r\n\t\t\tbindInfoWindow(marker, map, data.Markers[i].Title, data.Markers[i].Desc, data.Markers[i].Tel, data.Markers[i].Email, data.Markers[i].Url);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( window.google && google.maps ) {\r\n\t\t$('.map-canvas').each(function() {\r\n\t\t\tdataRequest($(this).data(\"feed\"), \"GET\", init);\r\n\t\t\tgoogle.maps.event.addDomListener(window, \"resize\", function() {\r\n\t\t\t\tvar center = map.getCenter();\r\n\t\t\t\tgoogle.maps.event.trigger(map, \"resize\");\r\n\t\t\t\tmap.setCenter(center);\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Widget ~~ Map\");\r\n\t}\r\n}\r\n\r\nvar initMap = function() {\r\n\tif ( $('.map-wrapper').length ) {\r\n\t\tloadScript(\"//maps.googleapis.com/maps/api/js?key=&sensor=false&extension=.js&callback=buildMap\");\r\n\t}\r\n}","// Notifications\r\n\r\nvar notificationCount = 0;\r\nvar cookieNotify = false;\r\n\r\nvar Timer = function(callback, delay) {\r\n\tvar timerId, start, remaining = delay;\r\n\r\n\tthis.stop = function() {\r\n\t\twindow.clearTimeout(timerId);\r\n\t\tremaining = delay;\r\n\t};\r\n\tthis.pause = function() {\r\n\t\twindow.clearTimeout(timerId);\r\n\t\tremaining -= new Date() - start;\r\n\t};\r\n\tthis.resume = function() {\r\n\t\tstart = new Date();\r\n\t\twindow.clearTimeout(timerId);\r\n\t\ttimerId = window.setTimeout(callback, remaining);\r\n\t};\r\n\tthis.resume();\r\n}\r\n\r\nvar notify = function(message, delay, tone) {\r\n\tdelay = typeof delay === \"undefined\" || isNaN(delay) || delay === \"\" ? config.notification.delay : delay;\r\n\ttone = typeof tone === \"undefined\" || tone === \"\" ? config.notification.tone : tone;\r\n\r\n\tvar notifyShow = function() {\r\n\t\tvar notification = '<div class=\"notification notification-' + notificationCount + '\" data-type=\"' + tone + '\">\\\r\n\t\t\t\t\t\t\t\t<span class=\"notification-message\">' + message + '</span>\\\r\n\t\t\t\t\t\t\t\t<div class=\"notification-close\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-close\" src=\"img/icons/icon-close.svg\" width=\"16\" height=\"16\" onerror=\"this.onerror=null;this.src=\\'img/icons/icon-close.png\\'\">\\\r\n\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t</div>';\r\n\r\n\t\t$(\".notification-wrapper\").append(notification);\r\n\t\tvar el = $(\".notification-\" + notificationCount);\r\n\r\n\t\tvar clear = function() {\r\n\t\t\tel.removeClass(\"active\");\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tel.remove();\r\n\t\t\t}, 300);\r\n\t\t}\r\n\r\n\t\tif ( delay !== 0 ) timer = new Timer(clear, delay);\r\n\r\n\t\tel\r\n\t\t\t.addClass(tone)\r\n\t\t\t.off(\"mouseenter\")\r\n\t\t\t.on(\"mouseenter\", function() {\r\n\t\t\t\tif ( delay !== 0 ) timer.pause();\r\n\t\t\t})\r\n\t\t\t.off(\"mouseleave\")\r\n\t\t\t.on(\"mouseleave\", function() {\r\n\t\t\t\tif ( delay !== 0 ) timer.resume();\r\n\t\t\t})\r\n\t\t\t.on(\"click\", clear);\r\n\r\n\t\tif ( cookieNotify ) {\r\n\t\t\tel.addClass(\"cookie\");\r\n\t\t\tcookieNotify = false;\r\n\t\t}\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tel.addClass(\"active\");\r\n\t\t}, 10);\r\n\r\n\t\tnotificationCount++;\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Trigger :: Notification | Delay: \" + delay);\r\n\t}\r\n\r\n\tif ( config.notification.active ) {\r\n\t\tnotifyShow();\r\n\t} else {\r\n\t\tif ( config.cookie.active ) notifyShow();\r\n\t}\r\n}\r\n\r\nvar initNotifications = function() {\r\n\tif ( $(\"[data-notification]\").length ) {\r\n\t\t$(\"[data-notification]\").on(\"click\", function() {\r\n\t\t\tvar message = $(this).attr(\"data-message\"),\r\n\t\t\t\tdelay = parseInt($(this).attr(\"data-delay\")),\r\n\t\t\t\ttone = $(this).attr(\"data-tone\");\r\n\r\n\t\t\tnotify(message, delay, tone);\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Widget :: Notifications\");\r\n\t}\r\n}","// Overlays\r\n\r\nvar initOverlays = function() {\r\n\tif ( $(\"[data-overlay]\").length ) {\r\n\t\t$(\"[data-overlay]\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\ttarget = $(\"#\" + el.data(\"overlay\"));\r\n\r\n\t\t\tel.on(\"click\", function() {\r\n\t\t\t\tif ( target.hasClass(\"active\") ) {\r\n\t\t\t\t\ttarget.removeClass(\"active\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget.addClass(\"active\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\ttarget.on('click', function() {\r\n\t\t\t\ttarget.removeClass(\"active\");\r\n\t\t\t});\r\n\t\t\ttarget.children(\".overlay-close\").on('click', function() {\r\n\t\t\t\ttarget.removeClass(\"active\");\r\n\t\t\t});\r\n\t\t\ttarget.children(\".modal\").on(\"click\", function(event) {\r\n\t\t\t\tif ( !$(event.target).closest(\".overlay-close\").length ) event.stopPropagation();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Widget :: Overlays\");\r\n\t}\r\n}","// Unified Search\r\n\r\nvar initSearch = function() {\r\n\tif ( $(\"[data-search]\").length ) {\r\n\t\t$(\"[data-search]\").each(function(i) {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\turl = el.data(\"search\"),\r\n\t\t\t\tindex = i,\r\n\t\t\t\ticon = el.find(\".search-icon\"),\r\n\t\t\t\tinput = el.find(\"input[data-search-parameter]\"),\r\n\t\t\t\tselect = el.find(\"select[data-search-parameter]\"),\r\n\t\t\t\toutputArray = [],\r\n\r\n\t\t\t\ttagcloudElement = '<ul class=\"tagcloud\"></ul>',\r\n\t\t\t\ttagclose = '<img class=\"svg icon icon-close\" src=\"' + config.application.root + 'img/icons/icon-close.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-close.png\\'\">',\r\n\r\n\t\t\t\tsearchView = !!el.data(\"search-view\") ? el.data(\"search-view\") : config.search.view,\r\n\t\t\t\tsearchDisplay = !!el.data(\"search-display\") ? el.data(\"search-display\") : config.search.display,\r\n\t\t\t\tresultsControlsElement = '<div class=\"search-controls\"></div>',\r\n\t\t\t\tresultsCountElement = '<div class=\"search-count\"></div>',\r\n\t\t\t\tresultsViewsElement = '<div class=\"search-views\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"search-view\" data-view=\"grid\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-grid\" src=\"' + config.application.root + 'img/icons/icon-grid.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-grid.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"search-view\" data-view=\"list\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-list\" src=\"' + config.application.root + 'img/icons/icon-list.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-list.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t\t</div>',\r\n\r\n\t\t\t\tresultsPaginationElement = '<div class=\"search-pagination\"></div>',\r\n\t\t\t\tresultsElement = '<div class=\"search-results loading ' + searchDisplay + '\" data-view=\"' + searchView + '\"></div>',\r\n\t\t\t\tloadElement = '<button class=\"primary center search-load\">Load More</button>';\r\n\r\n\t\t\tif ( !$(\".search-results\").length ) {\r\n\t\t\t\t$(\".search-container\").append(resultsElement);\r\n\t\t\t} else {\r\n\t\t\t\t$(\".search-results\").addClass(\"loading\").addClass(searchDisplay).attr(\"data-view\", searchView);\r\n\t\t\t}\r\n\r\n\t\t\tvar results = $(\".search-results\");\r\n\r\n\t\t\t$(tagcloudElement).insertBefore(results);\r\n\t\t\t$(resultsControlsElement).insertBefore(results);\r\n\t\t\t$(loadElement).insertAfter(results);\r\n\r\n\t\t\tvar tagcloud = $(\".tagcloud\"),\r\n\t\t\t\tcontrols = $(\".search-controls\"),\r\n\t\t\t\tload = $(\".search-load\");\r\n\r\n\t\t\tcontrols\r\n\t\t\t\t.append(resultsViewsElement)\r\n\t\t\t\t.append(resultsCountElement);\r\n\r\n\t\t\tvar views = controls.find(\".search-views\"),\r\n\t\t\t\tcount = controls.find(\".search-count\");\r\n\r\n\t\t\tinitSVGs();\r\n\r\n\r\n\t\t\t// View change\r\n\r\n\t\t\tviews.children(\".search-view[data-view='\" + searchView + \"']\").addClass(\"active\");\r\n\t\t\tviews.on(\"click\", \".search-view\", function() {\r\n\t\t\t\tvar el = $(this),\r\n\t\t\t\t\tview = el.data(\"view\");\r\n\r\n\t\t\t\tel.addClass(\"active\").siblings().removeClass(\"active\");\r\n\t\t\t\tresults.attr(\"data-view\", view);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t// Init\r\n\r\n\t\t\tvar buildSystem = function(data) {\r\n\t\t\t\tvar JSONobjects = data.Results,\r\n\t\t\t\t\tparameterArray = [],\r\n\t\t\t\t\tresultArray = [];\r\n\r\n\r\n\r\n\t\t\t\t// Populate Dropdowns\r\n\r\n\t\t\t\tvar populateSelects = function(parameter) {\r\n\t\t\t\t\tvar target = el.find(\"select[data-search-parameter='\" + parameter + \"']\");\r\n\r\n\t\t\t\t\tvar tempArray = [];\r\n\t\t\t\t\toutputArray[parameter] = [];\r\n\t\t\t\t\tresultArray[parameter] = [];\r\n\r\n\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\tvar object = JSONobjects[i];\r\n\t\t\t\t\t\tvar property = object[parameter];\r\n\r\n\t\t\t\t\t\tif ( property instanceof Array ) {\r\n\t\t\t\t\t\t\tfor ( var k = 0; k < property.length; k++ ) {\r\n\t\t\t\t\t\t\t\tif ( $.inArray(property[k], tempArray) < 0 ) tempArray.push(property[k]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ( $.inArray(property, tempArray) < 0 ) tempArray.push(property);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar placeholder = '<option value=\"\" default selected>Select ' + parameter + '...</option>';\r\n\t\t\t\t\ttarget.append(placeholder);\r\n\r\n\t\t\t\t\ttempArray.sort();\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < tempArray.length; j++ ) {\r\n\t\t\t\t\t\tvar option = '<option value=\"' + tempArray[j] + '\">' + tempArray[j] + '</option>';\r\n\t\t\t\t\t\ttarget.append(option);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t// Interactive Elements\r\n\r\n\t\t\t\tvar inputInit = function() {\r\n\t\t\t\t\tvar parameter = input.data(\"search-parameter\");\r\n\r\n\t\t\t\t\tparameterArray.push(parameter);\r\n\t\t\t\t\toutputArray[parameter] = [];\r\n\r\n\t\t\t\t\tif ( input.length ) {\r\n\t\t\t\t\t\tinput.each(function() {\r\n\t\t\t\t\t\t\t$(this).on(\"keyup\", function(event) {\r\n\t\t\t\t\t\t\t\tvar value = $(this).val().toLowerCase(),\r\n\t\t\t\t\t\t\t\t\tparameter = $(this).data(\"search-parameter\"),\r\n\t\t\t\t\t\t\t\t\tcriteria = parameter.replace(/\\s/g, \"\").split(\",\"),\r\n\t\t\t\t\t\t\t\t\tkeycode = event.keyCode;\r\n\r\n\t\t\t\t\t\t\t\tvar validKeys =\r\n\t\t\t\t\t\t\t\t\tkeycode == 32 || keycode === 13\t\t||  // spacebar & return key(s)\r\n\t\t\t\t\t\t\t\t\tkeycode == 8\t\t\t\t\t\t||  // backspace\r\n\t\t\t\t\t\t\t\t\t(keycode > 47 && keycode < 58)\t\t||  // number keys\r\n\t\t\t\t\t\t\t\t\t(keycode > 64 && keycode < 91)\t\t||  // letter keys\r\n\t\t\t\t\t\t\t\t\t(keycode > 95 && keycode < 112)\t\t||  // numpad keys\r\n\t\t\t\t\t\t\t\t\t(keycode > 185 && keycode < 193)\t||  // ;=,-./` (in order)\r\n\t\t\t\t\t\t\t\t\t(keycode > 218 && keycode < 223);\t\t// [\\]' (in order)\r\n\r\n\t\t\t\t\t\t\t\tif ( validKeys ) {\r\n\t\t\t\t\t\t\t\t\tif ( value.length <= 1 ) unhighlight(results);\r\n\t\t\t\t\t\t\t\t\toutputArray[parameter] = value;\r\n\t\t\t\t\t\t\t\t\tupdateResults();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// Selects\r\n\r\n\t\t\t\t\tif ( select.length ) {\r\n\t\t\t\t\t\tselect.each(function(i) {\r\n\t\t\t\t\t\t\tvar placeholder = $(this).val(),\r\n\t\t\t\t\t\t\t\tparameter = $(this).data(\"search-parameter\");\r\n\r\n\t\t\t\t\t\t\tpopulateSelects(parameter);\r\n\r\n\t\t\t\t\t\t\tparameterArray.push(parameter);\r\n\t\t\t\t\t\t\toutputArray[parameter] = [];\r\n\r\n\t\t\t\t\t\t\t$(this).on(\"change\", function(event) {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\t\t\tvar value = $(this).val(),\r\n\t\t\t\t\t\t\t\t\ttag = '<li class=\"tag\" data-tag-group=\"' + i + '\" data-tag-parameter=\"' + parameter + '\" data-tag=\"' + value + '\">' + value + tagclose + '</li>';\r\n\r\n\t\t\t\t\t\t\t\tif ( value !== \"\" ) {\r\n\t\t\t\t\t\t\t\t\tif ( $.inArray(value, outputArray[parameter]) < 0 ) {\r\n\t\t\t\t\t\t\t\t\t\ttagcloud.addClass(\"active\").append(tag);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tnotify(\"This tag already exists.\", \"failure\");\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tupdateTags(parameter);\r\n\t\t\t\t\t\t\t\tinitSVGs();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// Tags\r\n\r\n\t\t\t\t\ttagcloud.on(\"click\", \".tag\", function() {\r\n\t\t\t\t\t\tvar parameter = $(this).data(\"tag-parameter\");\r\n\r\n\t\t\t\t\t\t$(this).remove();\r\n\r\n\t\t\t\t\t\tif ( tagcloud.children(\".tag\").length > 0 ) {\r\n\t\t\t\t\t\t\ttagcloud.addClass(\"active\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttagcloud.removeClass(\"active\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tupdateTags(parameter);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar updateTags = function(parameter) {\r\n\t\t\t\t\tvar target = tagcloud.children(\".tag[data-tag-parameter='\" + parameter + \"']\");\r\n\r\n\t\t\t\t\tvar tempArray = [];\r\n\r\n\t\t\t\t\tfor ( var n = 0; n < target.length; n++ ) {\r\n\t\t\t\t\t\tvar value = target.eq(n).data(\"tag\");\r\n\t\t\t\t\t\ttempArray.push(value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutputArray[parameter] = tempArray;\r\n\r\n\t\t\t\t\tupdateResults();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Run\r\n\r\n\t\t\t\tinputInit();\r\n\r\n\r\n\r\n\t\t\t\t// Results Update functions\r\n\r\n\t\t\t\tvar updateResults = function() {\r\n\r\n\t\t\t\t\t// Create all arrays for analysis and populate allArray with all items for comparison.\r\n\r\n\t\t\t\t\tvar allArray = [];\r\n\t\t\t\t\tvar resultArray = [];\r\n\t\t\t\t\tvar existsArray = [];\r\n\t\t\t\t\tvar totalArray = [];\r\n\t\t\t\t\tvar finalArray = [];\r\n\r\n\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\tvar object = JSONobjects[i],\r\n\t\t\t\t\t\t\tid = object.Id;\r\n\r\n\t\t\t\t\t\tallArray.push(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor ( var j = 0; j < parameterArray.length; j++ ) {\r\n\t\t\t\t\t\tresultArray[parameterArray[j]] = [];\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t// Pagination and Selective loading\r\n\r\n\t\t\t\t\tvar currentPage = 1;\r\n\r\n\r\n\t\t\t\t\t// Get all values from all inputs/tags and rebuild arrays.\r\n\r\n\t\t\t\t\t// Input\r\n\r\n\t\t\t\t\tvar inputAnalysis = function() {\r\n\t\t\t\t\t\tif ( input.length ) {\r\n\t\t\t\t\t\t\tvar parameter = input.data(\"search-parameter\"),\r\n\t\t\t\t\t\t\t\tcriteria = parameter.replace(/\\s/g, \"\").split(\",\"),\r\n\t\t\t\t\t\t\t\ttempArray = [];\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\t\t\tvar object = JSONobjects[i],\r\n\t\t\t\t\t\t\t\t\tid = object.Id,\r\n\t\t\t\t\t\t\t\t\tcompare = outputArray[parameter];\r\n\r\n\t\t\t\t\t\t\t\tfor ( var j = 0; j < criteria.length; j++ ) {\r\n\t\t\t\t\t\t\t\t\tvar retrieved = object[criteria[j]];\r\n\r\n\t\t\t\t\t\t\t\t\tif ( retrieved instanceof Array ) {\r\n\t\t\t\t\t\t\t\t\t\tfor ( var k = 0; k < retrieved.length; k++ ) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar analyseArray = retrieved[k].toLowerCase();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif ( analyseArray.indexOf(compare) > -1 && input.val() !== \"\" && $.inArray(id, tempArray) < 0 ) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttempArray.push(id);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar analyseString = retrieved.toLowerCase();\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( analyseString.indexOf(compare) > -1 && input.val() !== \"\" && $.inArray(id, tempArray) < 0 ) {\r\n\t\t\t\t\t\t\t\t\t\t\ttempArray.push(id);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tresultArray[parameter] = tempArray;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Tags\r\n\r\n\t\t\t\t\tvar tagAnalysis = function() {\r\n\t\t\t\t\t\tfor ( var n = 0; n < tagcloud.children(\".tag\").length; n++ ) {\r\n\t\t\t\t\t\t\tvar parameter = tagcloud.children(\".tag\").eq(n).data(\"tag-parameter\"),\r\n\t\t\t\t\t\t\t\tcriteria = parameter,\r\n\t\t\t\t\t\t\t\tcompare = outputArray[parameter],\r\n\t\t\t\t\t\t\t\ttempArray = [];\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\t\t\tvar object = JSONobjects[i],\r\n\t\t\t\t\t\t\t\t\tid = object.Id,\r\n\t\t\t\t\t\t\t\t\tanalyse = object[criteria];\r\n\r\n\t\t\t\t\t\t\t\tif ( analyse instanceof Array ) {\r\n\t\t\t\t\t\t\t\t\tvar joined = analyse.concat(compare);\r\n\t\t\t\t\t\t\t\t\tif ( joined.duplicates().length > 0 && $.inArray(id, tempArray) < 0 ) {\r\n\t\t\t\t\t\t\t\t\t\ttempArray.push(id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif ( $.inArray(analyse, compare) > -1 && $.inArray(id, tempArray) < 0 ) {\r\n\t\t\t\t\t\t\t\t\t\ttempArray.push(id);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tresultArray[parameter] = tempArray;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Run\r\n\r\n\t\t\t\t\tinputAnalysis();\r\n\t\t\t\t\ttagAnalysis();\r\n\r\n\r\n\t\t\t\t\t// Analyse rebuilt arrays and build final array\r\n\r\n\t\t\t\t\tfor ( var k = 0; k < parameterArray.length; k++ ) {\r\n\t\t\t\t\t\tvar outputSet = outputArray[parameterArray[k]],\r\n\t\t\t\t\t\t\tresultSet = resultArray[parameterArray[k]];\r\n\r\n\t\t\t\t\t\texistsArray.push(outputSet.length > 0);\r\n\r\n\t\t\t\t\t\tif ( outputSet.length > 0 ) {\r\n\t\t\t\t\t\t\tvar joined = resultSet.concat(allArray).duplicates();\r\n\t\t\t\t\t\t\ttotalArray.push(joined);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar outputCount = 0;\r\n\t\t\t\t\tfor ( var l = 0; l < existsArray.length; l++ ) {\r\n\t\t\t\t\t\tif ( existsArray[l] === true ) outputCount++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar hasOutput = outputCount >= 1;\r\n\r\n\t\t\t\t\tvar cleanArray = totalArray.reduce().sort();\r\n\r\n\r\n\t\t\t\t\t// Empty Final array, compare id repetition against number of inputs, rebuild finalArray.\r\n\r\n\t\t\t\t\tvar countRepeated = function(arr) {\r\n\t\t\t\t\t\tvar counts = {};\r\n\t\t\t\t\t\tfor ( var i = 0; i < arr.length; i++ ) {\r\n\t\t\t\t\t\t    var num = arr[i];\r\n\t\t\t\t\t\t    counts[num] = counts[num] ? counts[num] + 1 : 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn counts;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar analysis = countRepeated(cleanArray);\r\n\r\n\t\t\t\t\tif ( hasOutput ) {\r\n\t\t\t\t\t\tfor ( var m = 0; m < cleanArray.length; m++ ) {\r\n\t\t\t\t\t\t\tif ( analysis[cleanArray[m]] === outputCount && $.inArray(cleanArray[m], finalArray) < 0 ) {\r\n\t\t\t\t\t\t\t\tfinalArray.push(cleanArray[m]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfinalArray = allArray;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( config.application.debug ) console.log(\"Search == \" + finalArray.length + \" items\");\r\n\r\n\r\n\t\t\t\t\t// Rebuild results\r\n\r\n\t\t\t\t\tvar firstLoad = true;\r\n\t\t\t\t\tvar pagination;\r\n\r\n\t\t\t\t\tvar rebuildSystem = function() {\r\n\t\t\t\t\t\tvar loadItems = function() {\r\n\t\t\t\t\t\t\tresults.append(resultsPaginationElement);\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < JSONobjects.length; i++ ) {\r\n\t\t\t\t\t\t\t\tvar object = JSONobjects[i],\r\n\t\t\t\t\t\t\t\t\tid = object.Id,\r\n\t\t\t\t\t\t\t\t\timage = object.Image,\r\n\t\t\t\t\t\t\t\t\ttitle = object.Title,\r\n\r\n\t\t\t\t\t\t\t\t\tdateStr = object.Date,\r\n\t\t\t\t\t\t\t\t\tz = dateStr.replace(\"Z\", \"\"),\r\n\t\t\t\t\t\t\t\t\ta = z.split(\"T\"),\r\n\t\t\t\t\t\t\t\t\td = a[0].split(\"-\"),\r\n\t\t\t\t\t\t\t\t\tt = a[1].split(\":\"),\r\n\t\t\t\t\t\t\t\t\tdate = new Date(d[0],(d[1]-1),d[2],t[0],t[1],t[2]),\r\n\r\n\t\t\t\t\t\t\t\t\thour = date.getHours(),\r\n\t\t\t\t\t\t\t\t\thours = hour < 10 ? \"0\" + hour : hour,\r\n\t\t\t\t\t\t\t\t\tminute = date.getMinutes(),\r\n\t\t\t\t\t\t\t\t\tminutes = minute < 10 ? \"0\" + minute : minute,\r\n\t\t\t\t\t\t\t\t\tday = date.getDate(),\r\n\t\t\t\t\t\t\t\t\tdays = day < 10 ? \"0\" + day : day,\r\n\t\t\t\t\t\t\t\t\tmonth = date.getMonth(),\r\n\t\t\t\t\t\t\t\t\tmonths = (month + 1) < 10 ? \"0\" + (month + 1) : (month + 1),\r\n\t\t\t\t\t\t\t\t\tyear = date.getFullYear(),\r\n\t\t\t\t\t\t\t\t\tyears = year < 10 ? \"0\" + year : year,\r\n\t\t\t\t\t\t\t\t\tfulldate = hours + \":\" + minutes + \" @ \" + days + \"/\" + months + \"/\" + years,\r\n\r\n\t\t\t\t\t\t\t\t\turl = object.Url,\r\n\t\t\t\t\t\t\t\t\tsummary = object.Summary,\r\n\t\t\t\t\t\t\t\t\ttype = object.Type,\r\n\t\t\t\t\t\t\t\t\tcategories = object.Categories.length > 0 ? object.Categories.toString().replace(/,/g , \", \") : \"None\",\r\n\t\t\t\t\t\t\t\t\ttags = object.Tags.length > 0 ? object.Tags.toString().replace(/,/g , \", \") : \"None\",\r\n\t\t\t\t\t\t\t\t\tresult = '<div class=\"search-item loading\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <a class=\"img\" href=\"' + url + '\" style=\"background: url(' + image + ') no-repeat center center;\"></a>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <a class=\"title\" href=\"' + url + '\">' + title + '</a>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"date\">' + fulldate + '</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"type\">' + type + '</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"summary\">' + summary + '</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"info\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"categories\" data-tooltip=\"' + categories + '\">Categories</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  <div class=\"tags\" data-tooltip=\"' + tags + '\">Tags</div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t\t  </div>\\\r\n\t\t\t\t\t\t\t\t\t\t\t  </div>';\r\n\r\n\r\n\t\t\t\t\t\t\t\tif ( $.inArray(id, finalArray) > -1 ) results.append(result);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Tooltips\r\n\r\n\t\t\t\t\t\t\tinitTooltips();\r\n\r\n\r\n\t\t\t\t\t\t\t// Highlight\r\n\r\n\t\t\t\t\t\t\tinput.each(function() {\r\n\t\t\t\t\t\t\t\tvar value = $(this).val().toLowerCase(),\r\n\t\t\t\t\t\t\t\t\tparameter = $(this).data(\"search-parameter\"),\r\n\t\t\t\t\t\t\t\t\tcriteria = parameter.replace(/\\s/g, \"\").split(\",\");\r\n\r\n\t\t\t\t\t\t\t\tif ( value.length > 1 ) {\r\n\t\t\t\t\t\t\t\t\tfor ( var i = 0; i < criteria.length; i++ ) {\r\n\t\t\t\t\t\t\t\t\t\tvar target = results.find(\"[class='\" + criteria[i].toLowerCase() + \"']\");\r\n\t\t\t\t\t\t\t\t\t\thighlight(target, value);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t\t\t// Pagination\r\n\r\n\t\t\t\t\t\t\tresults.append(resultsPaginationElement);\r\n\t\t\t\t\t\t\tfirstLoad = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( firstLoad ) loadItems();\r\n\r\n\r\n\t\t\t\t\t\t// Post build\r\n\r\n\t\t\t\t\t\tvar showItem = function(el, i) {\r\n\t\t\t\t\t\t\tif ( i < (config.search.count * currentPage) ) {\r\n\t\t\t\t\t\t\t\tif ( config.search.pagination ) {\r\n\t\t\t\t\t\t\t\t\tel.eq(i).removeClass(\"loading\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\tel.eq(i).removeClass(\"loading\");\r\n\t\t\t\t\t\t\t\t\t}, 100 * (i % config.search.count));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar items = results.children(\".search-item\");\r\n\t\t\t\t\t\tvar resultsCount = items.length;\r\n\r\n\t\t\t\t\t\tcount\r\n\t\t\t\t\t\t\t.css({\"display\": \"inline-block\"})\r\n\t\t\t\t\t\t\t.html((resultsCount === 0 ? \"No\" : resultsCount) + \" result\" + (resultsCount === 1 ? \" \" : \"s \") + \"found\");\r\n\r\n\t\t\t\t\t\tif ( resultsCount ) {\r\n\t\t\t\t\t\t\tresults.removeClass(\"loading\").removeClass(\"no-results\");\r\n\r\n\t\t\t\t\t\t\tif ( config.search.pagination ) items.addClass(\"loading\");\r\n\t\t\t\t\t\t\tfor ( var i = (config.search.count * (currentPage - 1)); i < resultsCount; i++ ) {\r\n\t\t\t\t\t\t\t\tshowItem(items, i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ( hasOutput ) {\r\n\t\t\t\t\t\t\t\tresults.removeClass(\"loading\").addClass(\"no-results\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tresults.removeClass(\"no-results\").addClass(\"loading\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t// Pagination and Selective loading\r\n\r\n\t\t\t\t\t\tpagination = $(\".search-pagination\");\r\n\r\n\t\t\t\t\t\tif ( config.search.pagination ) {\r\n\t\t\t\t\t\t\tif ( resultsCount > config.search.count ) {\r\n\t\t\t\t\t\t\t\tpagination.show();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tpagination.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif ( resultsCount > config.search.count * currentPage ) {\r\n\t\t\t\t\t\t\t\tload.show();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tload.hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresults.html(\"\");\r\n\t\t\t\t\trebuildSystem();\r\n\r\n\r\n\t\t\t\t\t// Pagination and Selective loading\r\n\r\n\t\t\t\t\tvar items = results.children(\".search-item\");\r\n\t\t\t\t\tvar resultsCount = items.length;\r\n\r\n\t\t\t\t\tif ( config.search.pagination ) {\r\n\t\t\t\t\t\tvar pages = 0;\r\n\r\n\t\t\t\t\t\tfor ( var n = 0; n < resultsCount; n++ ) {\r\n\t\t\t\t\t\t\tif ( n % config.search.count === 0 ) {\r\n\t\t\t\t\t\t\t\tpages++;\r\n\r\n\t\t\t\t\t\t\t\tvar page = \"<button data-page='\" + pages + \"'>\" + pages + \"</button>\";\r\n\t\t\t\t\t\t\t\tpagination.append(page);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$(\"[data-page='\" + currentPage + \"']\").addClass(\"primary\");\r\n\r\n\t\t\t\t\t\t$(\"[data-page]\").off().on(\"click\", function() {\r\n\t\t\t\t\t\t\tcurrentPage = $(this).data(\"page\");\r\n\r\n\t\t\t\t\t\t\t$(\"[data-page]\").removeClass(\"primary\");\r\n\t\t\t\t\t\t\t$(\"[data-page='\" + currentPage + \"']\").addClass(\"primary\");\r\n\r\n\t\t\t\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\t\t\t\tscrollTop: $(\".search-wrapper\").offset().top - 90\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\t\t\t\tqueue: false,\r\n\t\t\t\t\t\t\t\tcomplete: function() { anchorClicked = false; }\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\trebuildSystem();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tload.on(\"click\", function() {\r\n\t\t\t\t\t\t\tcurrentPage++;\r\n\t\t\t\t\t\t\trebuildSystem();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t// Initialise\r\n\r\n\t\t\t\tinitDropdowns();\r\n\t\t\t\tupdateResults();\r\n\t\t\t}\r\n\r\n\t\t\tdataRequest(url, \"GET\", buildSystem);\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Search :: Unified Search\");\r\n\t}\r\n}","// Slider\r\n\r\nvar sliderInit = function(sliderId) {\r\n\tvar sliderActive = $('#' + sliderId);\r\n\tvar slideContainerEl = '<div class=\"slider-container\"></div>';\r\n\tvar slideMovableEl = '<div class=\"slider-movable\"></div>';\r\n\r\n\tsliderActive.append(slideContainerEl);\r\n\tvar slideContainer = sliderActive.find('.slider-container');\r\n\r\n\tslideContainer.append(slideMovableEl);\r\n\tvar slideMovable = sliderActive.find('.slider-movable');\r\n\r\n\tvar slide = sliderActive.find('.slide');\r\n\tslide.each(function() { $(this).attr(\"data-index\", $(this).index()) }).appendTo(slideMovable);\r\n\r\n\r\n\tvar hasNav = !!sliderActive.attr(\"data-nav\") ? sliderActive.data(\"nav\") : config.slider.nav;\r\n\tvar hasArrows = !!sliderActive.attr(\"data-arrows\") ? sliderActive.data(\"arrows\") : config.slider.arrows;\r\n\tvar hasThumbnails = !!sliderActive.attr(\"data-thumbnails\") ? sliderActive.data(\"thumbnails\") : config.slider.thumbnails;\r\n\tvar slideAnimation = !!sliderActive.attr(\"data-animation\") ? sliderActive.data(\"animation\") : config.slider.animation;\r\n\tvar slideShow = !!sliderActive.attr(\"data-slideshow\") ? sliderActive.data(\"slideshow\") : config.slider.slideshow;\r\n\r\n\tvar animDuration = config.slider.duration;\r\n\tvar animInterval = config.slider.interval;\r\n\tvar animating = false;\r\n\tvar stopped = false;\r\n\r\n\r\n\r\n\t// Position Containers\r\n\r\n\tvar slideCount = slide.length;\r\n\tvar slideCurrent = 0;\r\n\tvar slideBefore = 0;\r\n\tvar loopUnit = 0;\r\n\tvar loopCount = 0;\r\n\tvar minCount = 0;\r\n\tvar maxCount = slideCount  - 1;\r\n\r\n\tvar sliderWidth = slide.eq(slideCurrent).outerWidth(true);\r\n\tvar sliderHeight = slide.eq(slideCurrent).outerHeight(true);\r\n\tvar isMultiSlide = slideCount > 1;\r\n\tvar slideStep = sliderWidth;\r\n\tvar slideTrigger = sliderWidth / 4;\r\n\tvar slideTolerance = 50;\r\n\tvar slideDirection;\r\n\r\n\r\n\r\n\t// Slide Show\r\n\r\n\tvar slideTimer;\r\n\r\n\tvar sliderStart = function() {\r\n\t\tslideMovable.removeClass(\"stopped\");\r\n\t\tslideTimer = setInterval(slideNext, animInterval);\r\n\t}\r\n\tvar sliderStop = function() {\r\n\t\tslideMovable.addClass(\"stopped\");\r\n\t\tclearInterval(slideTimer);\r\n\t}\r\n\r\n\tif ( isMultiSlide && slideShow !== false ) {\r\n\t\tsliderStart();\r\n\r\n\t\tif ( !config.application.touch ) {\r\n\t\t\tsliderActive.on('mouseenter', function() {\r\n\t\t\t\tsliderStop();\r\n\t\t\t});\r\n\t\t\tsliderActive.on('mouseleave', function() {\r\n\t\t\t\tsliderStart();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tslideMovable.on('click touchstart', function() {\r\n\t\t\t\tsliderStop();\r\n\t\t\t});\r\n\r\n\t\t\t$(\"html\").on('click touchstart', function(event) {\r\n\t\t\t\tif ( !$(event.target).closest(\".slider\").length && slideMovable.hasClass(\"stopped\") ) {\r\n\t\t\t\t\tsliderStart();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// Create Arrows\r\n\r\n\tvar arrowPrevEl =  '<div class=\"slider-arrow slider-arrow-prev valign-middle\">\\\r\n\t\t\t\t\t\t\t<img class=\"svg icon icon-caret-left\" src=\"' + config.application.root + 'img/icons/icon-caret-left.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-caret-left.png\\'\">\\\r\n\t\t\t\t\t    </div>';\r\n\tvar arrowNextEl =  '<div class=\"slider-arrow slider-arrow-next valign-middle\">\\\r\n\t\t\t\t\t\t\t<img class=\"svg icon icon-caret-right\" src=\"' + config.application.root + 'img/icons/icon-caret-right.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-caret-right.png\\'\">\\\r\n\t\t\t\t\t    </div>';\r\n\r\n\tslideContainer.prepend(arrowPrevEl);\r\n\tslideContainer.prepend(arrowNextEl);\r\n\r\n\tinitSVGs();\r\n\r\n\tvar arrows = slideContainer.children('.slider-arrow');\r\n\tvar arrowPrev = slideContainer.children('.slider-arrow-prev');\r\n\tvar arrowNext = slideContainer.children('.slider-arrow-next');\r\n\r\n\tif ( hasArrows === true && isMultiSlide ) arrows.show();\r\n\r\n\r\n\r\n\t// Create Bullets\r\n\r\n\tvar navBullet;\r\n\r\n\tif ( hasNav === true && isMultiSlide ) {\r\n\t\tvar navWrapperEl = '<div class=\"slider-nav\"></div>';\r\n\t\tsliderActive.append(navWrapperEl);\r\n\r\n\t\tvar navWrapper = sliderActive.children('.slider-nav');\r\n\r\n\t\tfor ( var i = 0; i < slideCount; i++ ) {\r\n\t\t\tvar navBulletEl = \"\";\r\n\r\n\t\t\tvar slideThumb = slide.eq(i);\r\n\t\t\tvar slideImg = slideThumb.data(\"thumb\");\r\n\r\n\t\t\tif ( slide.eq(i).hasClass(\"thumb\") ) slideThumb.css({ \"background-image\": \"url('img/pictures/slider/\" + slideImg + \"')\" });\r\n\r\n\t\t\tif ( hasThumbnails ) {\r\n\t\t\t\tnavBulletEl = '<div class=\"slider-bullet\" style=\"background: url(\\'img/pictures/slider/thumbs/' + slideImg + '\\') no-repeat center center;\">&nbsp;</div>';\r\n\t\t\t\tnavWrapper.addClass(\"thumbs\");\r\n\t\t\t} else {\r\n\t\t\t\tnavBulletEl = '<div class=\"slider-bullet\">&bull;</div>';\r\n\t\t\t}\r\n\r\n\t\t\tnavWrapper.append(navBulletEl);\r\n\t\t}\r\n\r\n\t\tnavBullet = sliderActive.find('.slider-bullet');\r\n\t} else {\r\n\t\tnavBullet = sliderActive.find('.bullet');\r\n\t}\r\n\r\n\tnavBullet.removeClass('active');\r\n\tnavBullet.eq(slideCurrent).addClass('active');\r\n\r\n\r\n\r\n\t// Main container repositioning\r\n\r\n\tvar containerPos = function() {\r\n\t\tslideMovable.css({\r\n\t\t\t'margin-left': 0,\r\n\t\t\t'left': 0,\r\n\t\t\t'height': sliderHeight\r\n\t\t});\r\n\r\n\t\tsliderTop = sliderActive.offset().top + (slideTolerance / 2);\r\n\t\tsliderBottom = sliderActive.offset().top + sliderActive.height() - (slideTolerance / 2);\r\n\t\tsliderLeft = sliderActive.offset().left + slideTolerance;\r\n\t\tsliderRight = sliderActive.offset().left + sliderActive.width() - slideTolerance;\r\n\t\tslideTrigger = sliderWidth / 4;\r\n\t}\r\n\r\n\tcontainerPos();\r\n\r\n\r\n\r\n\t// Controls Cloning Functions\r\n\r\n\tvar clone = true;\r\n\r\n\tvar slideClone = function() {\r\n\t\tif ( clone && !cloned ) {\r\n\t\t\tif ( slideDirection == \"prev\" ) {\r\n\t\t\t\tfor ( var i = maxCount; i >= slideCurrent; i-- ) {\r\n\t\t\t\t\tslideMovable.prepend(slide.eq(i));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( slideDirection == \"next\" ) {\r\n\t\t\t\tslide.each(function() {\r\n\r\n\t\t\t\t})\r\n\t\t\t\tfor ( var j = minCount; j <= slideCurrent; j++ ) {\r\n\t\t\t\t\tslideMovable.append(slide.eq(j - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tslideMovable.css({ 'margin-left': slideStep });\r\n\t\t\tclone = false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// Controls Interaction Functions\r\n\r\n\tvar slidePrev = function() {\r\n\t\tif ( !animating ) {\r\n\t\t\tslideDirection = \"prev\";\r\n\r\n\r\n\t\t\tif ( slideCurrent <= minCount ) {\r\n\t\t\t\tslideCurrent = maxCount;\r\n\t\t\t} else {\r\n\t\t\t\tslideCurrent--;\r\n\t\t\t}\r\n\r\n\t\t\tslideAction(-1);\r\n\t\t\tslideBefore = slideCurrent;\r\n\t\t}\r\n\t}\r\n\tvar slideNext = function() {\r\n\t\tif ( !animating ) {\r\n\t\t\tslideDirection = \"next\";\r\n\r\n\r\n\t\t\tif ( slideCurrent >= maxCount ) {\r\n\t\t\t\tslideCurrent = minCount;\r\n\t\t\t} else {\r\n\t\t\t\tslideCurrent++;\r\n\t\t\t}\r\n\r\n\t\t\tslideAction(1);\r\n\t\t\tslideBefore = slideCurrent;\r\n\t\t}\r\n\t}\r\n\tvar slideAny = function(i) {\r\n\t\tif ( !animating ) {\r\n\t\t\tslideCurrent = i;\r\n\r\n\t\t\tif ( slideCurrent < slideBefore ) slideDirection = \"prev\";\r\n\t\t\tif ( slideCurrent > slideBefore ) slideDirection = \"next\";\r\n\r\n\t\t\tslideAction(slideCurrent - slideBefore);\r\n\t\t\tslideBefore = slideCurrent;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// Main Slider Animation\r\n\r\n\tvar slideEnd = function() {\r\n\t\tclone = true;\r\n\t\tcloned = false;\r\n\t\tanimating = false;\r\n\t\tanimDuration = config.slider.duration;\r\n\r\n\t\tif ( slideDirection == \"next\" ) slideClone();\r\n\t\tcontainerPos();\r\n\t}\r\n\r\n\tvar slideAction = function(i) {\r\n\t\tanimating = true;\r\n\t\tslideStep = sliderWidth * i;\r\n\r\n\t\tsliderWidth = slide.eq(slideCurrent).outerWidth(true);\r\n\t\tsliderHeight = slide.eq(slideCurrent).outerHeight(true);\r\n\r\n\r\n\t\tif ( slideDirection == \"prev\" ) slideClone();\r\n\r\n\t\tif ( slideAnimation === \"slide\" ) {\r\n\t\t\tslideMovable\r\n\t\t\t.stop(true, false)\r\n\t\t\t.animate({\r\n\t\t\t\t'height': sliderHeight,\r\n\t\t\t\t'left': - slideStep\r\n\t\t\t}, {\r\n\t\t\t\tduration: animDuration,\r\n\t\t\t\tcomplete: slideEnd\r\n\t\t\t});\r\n\t\t}\r\n\t\tif ( slideAnimation === \"fade\" ) {\r\n\t\t\tslideMovable\r\n\t\t\t\t.hide()\r\n\t\t\t\t.css({\r\n\t\t\t\t\t'left': slideStep\r\n\t\t\t\t})\r\n\t\t\t\t.fadeIn(animDuration * 1.5)\r\n\t\t\t\t.stop(true, false)\r\n\t\t\t\t.animate({\r\n\t\t\t\t\t'height': sliderHeight\r\n\t\t\t\t}, {\r\n\t\t\t\t\tduration: animDuration,\r\n\t\t\t\t\tcomplete: slideEnd\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tnavBullet.removeClass('active');\r\n\t\tnavBullet.eq(slideCurrent).addClass('active');\r\n\t}\r\n\r\n\tslideAction(0);\r\n\r\n\t$(window).on(\"resize\", function() {\r\n\t\tslideAction(0);\r\n\t});\r\n\r\n\r\n\r\n\t// Nav actions\r\n\r\n\tarrowNext.on('click', function() {\r\n\t\tclone = true;\r\n\t\tslideNext();\r\n\t});\r\n\tarrowPrev.on('click', function() {\r\n\t\tclone = true;\r\n\t\tslidePrev();\r\n\t});\r\n\tnavBullet.on('click', function() {\r\n\t\tclone = true;\r\n\t\tslideAny($(this).index());\r\n\t});\r\n\r\n\tdocument.onkeydown = function(e) {\r\n\t\te = e || window.event;\r\n\r\n\t\tswitch(e.which || e.keyCode) {\r\n\t\t\tcase 39: // right\r\n\t\t\t\tslideNext();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 37: // left\r\n\t\t\t\tslidePrev();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: return; // exit this handler for other keys\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\r\n\r\n\t// Dragging if animation = \"slider\"\r\n\r\n\tif ( slideAnimation === \"slide\" ) {\r\n\t\tvar down = false,\r\n\t\t\tcloned = false,\r\n\t\t\tdragging = false,\r\n\t\t\tdragStart,\r\n\t\t\tdragX,\r\n\t\t\tdragEnd,\r\n\t\t\tsliderTop = sliderActive.offset().top + (slideTolerance / 2),\r\n\t\t\tsliderBottom = sliderActive.offset().top + sliderActive.height() - (slideTolerance / 2),\r\n\t\t\tsliderLeft = sliderActive.offset().left + slideTolerance,\r\n\t\t\tsliderRight = sliderActive.offset().left + sliderActive.width() - slideTolerance;\r\n\r\n\t\tvar slideKickback = function() {\r\n\t\t\tanimDuration = 250;\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tif ( cloned ) {\r\n\t\t\t\t\tslideDirection = \"prev\";\r\n\r\n\t\t\t\t\tsliderActive.find('.slide:first-child').appendTo(slideMovable);\r\n\t\t\t\t\tslideMovable.css({ 'margin-left': 0 });\r\n\r\n\t\t\t\t\tcloned = false;\r\n\t\t\t\t}\r\n\t\t\t}, animDuration);\r\n\t\t}\r\n\r\n\t\tslideMovable.on(\"mousedown touchstart\", function(e) {\r\n\t\t\tif ( !config.application.touch ) e.preventDefault();\r\n\t\t\tdragStart = e.pageX || e.originalEvent.touches[0].pageX;\r\n\t\t\tdragX = e.pageX || e.originalEvent.touches[0].pageX;\r\n\r\n\t\t\tif ( isMultiSlide ) down = true;\r\n\t\t})\r\n\t\t.on(\"mousemove touchmove\", function(e) {\r\n\t\t\tdragX = e.pageX || e.originalEvent.touches[0].pageX;\r\n\t\t\tdragY = e.pageY || e.originalEvent.touches[0].pageY;\r\n\r\n\t\t\tvar dragNext = dragStart - dragX;\r\n\t\t\tvar dragPrev = dragX - dragStart;\r\n\t\t\tinitDrag = dragPrev > config.slider.threshold || dragNext > config.slider.threshold;\r\n\r\n\t\t\tif ( down && initDrag && !animating ) {\r\n\t\t\t\tif ( !config.application.touch ) e.preventDefault();\r\n\r\n\t\t\t\tdragging = true;\r\n\r\n\t\t\t\tif ( dragX > dragStart ) {\r\n\t\t\t\t\tif ( !cloned ) {\r\n\t\t\t\t\t\tslideDirection = \"prev\";\r\n\t\t\t\t\t\tsliderActive.find('.slide:last-child').prependTo(slideMovable);\r\n\t\t\t\t\t\tslideMovable.css({ 'margin-left': - sliderWidth });\r\n\t\t\t\t\t\tcloned = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclone = true;\r\n\r\n\t\t\t\t\tif ( cloned ) {\r\n\t\t\t\t\t\tslideDirection = \"prev\";\r\n\t\t\t\t\t\tsliderActive.find('.slide:first-child').appendTo(slideMovable);\r\n\t\t\t\t\t\tslideMovable.css({ 'margin-left': 0 });\r\n\t\t\t\t\t\tcloned = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tslideMovable.css({\r\n\t\t\t\t\t'left': - (dragStart - dragX)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar inBounds = dragX <= sliderLeft || dragX >= sliderRight || dragY <= sliderTop || dragY >= sliderBottom || dragNext >= sliderWidth || dragPrev >= sliderWidth;\r\n\r\n\t\t\t\tif ( inBounds ) {\r\n\t\t\t\t\tdown = false;\r\n\t\t\t\t\tdragging = false;\r\n\r\n\t\t\t\t\tif ( dragStart - dragX > slideTrigger ) {\r\n\t\t\t\t\t\tslideNext();\r\n\t\t\t\t\t} else if ( dragX - dragStart > slideTrigger ) {\r\n\t\t\t\t\t\tslidePrev();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tslideKickback();\r\n\t\t\t\t\t\tslideAction(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t.on(\"mouseleave mouseup touchend\", function(e) {\r\n\t\t\tif ( !config.application.touch ) e.preventDefault();\r\n\r\n\t\t\tdown = false;\r\n\r\n\t\t\tif ( dragging && !animating ) {\r\n\t\t\t\tdragging = false;\r\n\t\t\t\tdragEnd = dragX;\r\n\r\n\t\t\t\tif ( dragStart - dragEnd > slideTrigger ) {\r\n\t\t\t\t\tslideNext();\r\n\t\t\t\t} else if ( dragStart - dragEnd < - slideTrigger ) {\r\n\t\t\t\t\tslidePrev();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslideKickback();\r\n\t\t\t\t\tslideAction(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\r\n\r\nvar initSliders = function() {\r\n\tvar slider = $(\"[data-slider='true']\");\r\n\r\n\tif ( slider.length ) {\r\n\t\tslider\r\n\t\t\t.each(function(i, slider) {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tsliderInit(slider.id = 'slider-' + i);\r\n\t\t\t\t}, 250 * i);\r\n\t\t\t})\r\n\t\t\t.find('.slide').css({ 'visibility': 'visible' });\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Widget :: Sliders\");\r\n\t}\r\n}","// Tag Cloud\r\n\r\nvar initTagClouds = function() {\r\n\tif ( $(\"[data-tagcloud]\").length ) {\r\n\t\t$(\"[data-tagcloud]\").each(function(i) {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\tindex = i,\r\n\t\t\t\ttagArray = [],\r\n\t\t\t\ttagCloud = '<ul class=\"tagcloud\" data-tag=\"tagcloud-' + index + '\"></ul>',\r\n\t\t\t\ttagHidden = '<input type=\"hidden\" class=\"tagcloud-result\" data-tag=\"tagcloud-' + index + '\">',\r\n\t\t\t\ttagClose = '<img class=\"svg icon icon-close\" src=\"' + config.application.root + 'img/icons/icon-close.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-close.png\\'\">';\r\n\r\n\t\t\t$(tagHidden).insertAfter(el);\r\n\t\t\t$(tagCloud).insertAfter(el);\r\n\r\n\t\t\tvar target = $(\".tagcloud[data-tag='tagcloud-\" + index + \"']\"),\r\n\t\t\t\thidden = $(\"input[data-tag='tagcloud-\" + index + \"']\");\r\n\r\n\t\t\tvar updateArray = function() {\r\n\t\t\t\ttagArray = [];\r\n\t\t\t\tfor ( var i = 0; i < target.children(\".tag\").length; i++ ) tagArray.push(target.children(\".tag\").eq(i).data(\"tag\"));\r\n\t\t\t\thidden.val(tagArray);\r\n\t\t\t\tinitSVGs();\r\n\t\t\t}\r\n\r\n\t\t\tel.on(\"keydown\", function(event) {\r\n\t\t\t\tif ( event.keyCode === 9 || event.keyCode === 13 ) { // Tab or Enter\r\n\t\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\t\ttag = '<li class=\"tag\" data-tag=\"' + value + '\">' + value + tagClose + '</li>';\r\n\r\n\t\t\t\t\tif ( value !== \"\" && $.inArray(value, tagArray) < 0 ) target.addClass(\"active\").append(tag);\r\n\t\t\t\t\tif ( $.inArray(value, tagArray) >= 0 ) notify(\"This tag already exists.\", \"failure\");\r\n\r\n\t\t\t\t\tupdateArray();\r\n\t\t\t\t\tel.val(\"\").focus();\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.on(\"change\", function() {\r\n\t\t\t\tvar value = el.val(),\r\n\t\t\t\t\ttag = '<li class=\"tag\" data-tag=\"' + value + '\">' + value + tagClose + '</li>';\r\n\r\n\t\t\t\tif ( value !== \"\" && $.inArray(value, tagArray) < 0 ) target.addClass(\"active\").append(tag);\r\n\t\t\t\tif ( $.inArray(value, tagArray) >= 0 ) notify(\"This tag already exists.\", \"failure\");\r\n\r\n\t\t\t\tupdateArray();\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\ttarget.on(\"click\", \".tag\", function() {\r\n\t\t\t\t$(this).remove();\r\n\r\n\t\t\t\tif ( target.children(\".tag\").length > 0 ) {\r\n\t\t\t\t\ttarget.addClass(\"active\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget.removeClass(\"active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateArray();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Search :: Tag Cloud\");\r\n\t}\r\n}","// Tooltips\r\n\r\nvar initTooltips = function() {\r\n\tif ( $(\"[data-tooltip]\").length ) {\r\n\t\tvar tooltipPosition = function(evt, content) {\r\n\t\t\tvar container = $(\".tooltip\"),\r\n\t\t\t\tcursorX = evt.pageX || evt.originalEvent.touches[0].pageX,\r\n\t\t\t\tcursorY = evt.pageY || evt.originalEvent.touches[0].pageY;\r\n\r\n\t\t\tcontainer.html(content).addClass(\"active\");\r\n\r\n\t\t\tswitch(config.tooltip.position) {\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tcontainer.css({\r\n\t\t\t\t\t\ttop: cursorY - container.outerHeight() - 10,\r\n\t\t\t\t\t\tleft: cursorX - container.outerWidth()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"center\":\r\n\t\t\t\t\tcontainer.css({\r\n\t\t\t\t\t\ttop: cursorY - container.outerHeight() - 10,\r\n\t\t\t\t\t\tleft: cursorX - (container.outerWidth() / 2) - 5\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tcontainer.css({\r\n\t\t\t\t\t\ttop: cursorY - container.outerHeight() - 10,\r\n\t\t\t\t\t\tleft: cursorX\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcontainer.css({\r\n\t\t\t\t\t\ttop: cursorY - container.outerHeight() - 10,\r\n\t\t\t\t\t\tleft: cursorX - (container.outerWidth() / 2) - 5\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar tooltip = {\r\n\t\t\t\tleft: container.offset().left,\r\n\t\t\t\tright: container.offset().left + container.outerWidth()\r\n\t\t\t};\r\n\t\t\tvar boundaries = {\r\n\t\t\t\tleft: $(\".wrapper\").offset().left + 20,\r\n\t\t\t\tright: $(\".wrapper\").offset().left + $(\".wrapper\").outerWidth() - 20\r\n\t\t\t};\r\n\r\n\t\t\tif ( config.tooltip.bound ) {\r\n\t\t\t\tif ( tooltip.left <= boundaries.left ) {\r\n\t\t\t\t\tcontainer.css({ left: boundaries.left });\r\n\t\t\t\t}\r\n\t\t\t\tif ( tooltip.right >= boundaries.right ) {\r\n\t\t\t\t\tcontainer.css({ left: boundaries.right - container.outerWidth() });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$(\"[data-tooltip]\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\ttooltipData = el.data(\"tooltip\");\r\n\r\n\t\t\tif ( !config.application.touch ) {\r\n\t\t\t\tel.on(\"mouseenter\", function(event) {\r\n\t\t\t\t\t$(\"body\").prepend('<div class=\"tooltip\"></div>');\r\n\r\n\t\t\t\t\t$(this).on(\"mousemove\", function(event) {\r\n\t\t\t\t\t\ttooltipPosition(event, tooltipData);\r\n\t\t\t\t\t});\r\n\t\t\t\t}).on(\"mouseleave\", function() {\r\n\t\t\t\t\t$(\".tooltip\").remove();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tel.on(\"click\", function(event) {\r\n\t\t\t\t\t$(\".tooltip\").remove();\r\n\r\n\t\t\t\t\t$(\"body\").prepend('<div class=\"tooltip\"></div>');\r\n\r\n\t\t\t\t\ttooltipPosition(event, tooltipData);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(\"html, body\").on(\"click\", function(event) {\r\n\t\t\t\t\tif ( !$(event.target).closest(\"[data-tooltip]\").length ) {\r\n\t\t\t\t\t\t$(\".tooltip\").remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Widget :: Tooltips\");\r\n\t}\r\n}","// Video\r\n\r\nvar initVideo = function() {\r\n\tvar ytAPIVideoReady = false,\r\n\t\tytAPIFrameReady = false;\r\n\r\n\t// Youtube\r\n\r\n\tvar ytFramePlayers = function() {\r\n\t\tif ( $(\"iframe[src*='youtube']\").length ) {\r\n\t\t\tvar ytFrameBuild = function(name) {\r\n\t\t\t\tvar currentPlayer = new YT.Player(name, {\r\n\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t'onReady': onPlayerReady,\r\n\t\t\t\t\t\t\t'onStateChange': onPlayerStateChange\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\twrapper = $(\".\" + name),\r\n\t\t\t\t\tpreview = wrapper.children(\".video-thumb\"),\r\n\t\t\t\t\tbutton = wrapper.children(\".video-button\");\r\n\r\n\t\t\t\tfunction onPlayerReady() {\r\n\t\t\t\t\twrapper.addClass(\"loaded\");\r\n\r\n\t\t\t\t\tbutton.off().on(\"click\", function() {\r\n\t\t\t\t\t\tif ( !wrapper.hasClass(\"playing\") ) {\r\n\t\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.playVideo();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurrentPlayer.pauseVideo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tpreview.off().on(\"click\", function() {\r\n\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.playVideo();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onPlayerStateChange(event) {\r\n\t\t\t\t\tif ( event.data === YT.PlayerState.ENDED || event.data === YT.PlayerState.PAUSED ) { // Ended OR Paused\r\n\t\t\t\t\t\twrapper.removeClass(\"playing\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(\"iframe[src*='youtube']\").each(function(i) {\r\n\t\t\t\tif ( !$(this).parents(\".video-frame\").length ) {\r\n\t\t\t\t\tvar el = $(this),\r\n\t\t\t\t\t\tname = \"ytFramePlayer-\" + i,\r\n\t\t\t\t\t\tvideoSRC = el.attr(\"src\").split(\"/\"),\r\n\t\t\t\t\t\tvideoID = videoSRC[videoSRC.length - 1].split(\"?\")[0],\r\n\t\t\t\t\t\tvideoThumb = !!el.attr('data-video-thumb') && el.attr('data-video-thumb') !== \"\" ? el.data(\"video-thumb\") : \"https://img.youtube.com/vi/\" + videoID + \"/hqdefault.jpg\",\r\n\t\t\t\t\t\tplayerVars = {\r\n\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\twmode:'transparent',\r\n\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\thtml5: 1,\r\n\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\tcontrols: 1,\r\n\t\t\t\t\t\t\tautohide: 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twidget = '<div class=\"video-frame ' + name + '\">\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"video-overlay\"></div>\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"video-loader\" src=\"' + config.application.root + 'img/loader.gif\" alt=\"Video loader\">\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"video-thumb\" style=\"background: url(' + videoThumb + ');\">&nbsp;</div>\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"video-button\">\\\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-play\" src=\"' + config.application.root + 'img/icons/icon-play.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-play.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-pause\" src=\"' + config.application.root + 'img/icons/icon-pause.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-pause.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t<iframe id=\"' + name + '\" src=\"' + el.attr(\"src\") + \"?\" + serialize(playerVars) + '\" frameborder=\"0\" allowfullscreen></iframe>\\\r\n\t\t\t\t\t\t\t\t</div>';\r\n\r\n\t\t\t\t\tel.replaceWith(widget);\r\n\r\n\t\t\t\t\tinitSVGs();\r\n\r\n\t\t\t\t\tytFrameBuild(name);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvar ytVideoPlayers = function() {\r\n\t\tif ( $(\".video-frame[data-video-service='youtube']\").length ) {\r\n\t\t\tvar ytVideoBuild = function(name, videoID) {\r\n\t\t\t\tvar currentPlayer = new YT.Player(name, {\r\n\t\t\t\t\t\tvideoId: videoID,\r\n\t\t\t\t\t\twidth: '1280',\r\n\t\t\t\t\t\theight: '600',\r\n\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\twmode:'transparent',\r\n\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\thtml5: 1,\r\n\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\tcontrols: 1,\r\n\t\t\t\t\t\t\tautohide: 1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t'onReady': onPlayerReady,\r\n\t\t\t\t\t\t\t'onStateChange': onPlayerStateChange\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\twrapper = $(\".\" + name),\r\n\t\t\t\t\tpreview = wrapper.children(\".video-thumb\"),\r\n\t\t\t\t\tbutton = wrapper.children(\".video-button\");\r\n\r\n\t\t\t\tfunction onPlayerReady() {\r\n\t\t\t\t\twrapper.addClass(\"loaded\");\r\n\r\n\t\t\t\t\tbutton.off().on(\"click\", function() {\r\n\t\t\t\t\t\tif ( !wrapper.hasClass(\"playing\") ) {\r\n\t\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.playVideo();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurrentPlayer.pauseVideo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tpreview.off().on(\"click\", function() {\r\n\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.playVideo();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onPlayerStateChange(event) {\r\n\t\t\t\t\tif ( event.data === YT.PlayerState.ENDED || event.data === YT.PlayerState.PAUSED ) { // Ended OR Paused\r\n\t\t\t\t\t\twrapper.removeClass(\"playing\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(\".video-frame[data-video-service='youtube']\").each(function(i) {\r\n\t\t\t\tvar el = $(this),\r\n\t\t\t\t\tname = \"ytVideoPlayer-\" + i,\r\n\t\t\t\t\tvideoID = el.data(\"video-id\"),\r\n\t\t\t\t\tvideoThumb = !!el.attr('data-video-thumb') && el.attr('data-video-thumb') !== \"\" ? el.data(\"video-thumb\") : \"https://img.youtube.com/vi/\" + videoID + \"/hqdefault.jpg\",\r\n\t\t\t\t\twidget =   '<div class=\"video-overlay\"></div>\\\r\n\t\t\t\t\t\t\t\t<img class=\"video-loader\" src=\"' + config.application.root + 'img/loader.gif\" alt=\"Video loader\">\\\r\n\t\t\t\t\t\t\t\t<div class=\"video-thumb\" style=\"background: url(' + videoThumb + ');\">&nbsp;</div>\\\r\n\t\t\t\t\t\t\t\t<div class=\"video-button\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-play\" src=\"' + config.application.root + 'img/icons/icon-play.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-play.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-pause\" src=\"' + config.application.root + 'img/icons/icon-pause.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-pause.png\\'\">\\\r\n\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t<div id=\"' + name + '\"></div>';\r\n\r\n\t\t\t\tel.html(\"\").addClass(name).append(widget);\r\n\t\t\t\tel.children(\".video-thumb\").css({\"background\": \"url(\" + videoThumb + \")\"});\r\n\r\n\t\t\t\tinitSVGs();\r\n\r\n\t\t\t\tytVideoBuild(name, videoID);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tif (typeof(YT) == 'undefined' || typeof(YT.Player) == 'undefined') {\r\n\t\tif ( ytAPIFrameReady ) {\r\n\t\t\tytFramePlayers();\r\n\t\t} else {\r\n\t\t\twindow.onYouTubeIframeAPIReady = function() {\r\n\t\t\t\tytAPIFrameReady = true;\r\n\t\t\t\tytFramePlayers();\r\n\t\t\t}\r\n\t\t\t$.getScript('https://www.youtube.com/iframe_api');\r\n\t\t}\r\n\r\n\t\tif ( ytAPIVideoReady ) {\r\n\t\t\tytVideoPlayers();\r\n\t\t} else {\r\n\t\t\twindow.onYouTubePlayerAPIReady = function() {\r\n\t\t\t\tytAPIVideoReady = true;\r\n\t\t\t\tytVideoPlayers();\r\n\t\t\t}\r\n\t\t\t$.getScript('https://www.youtube.com/player_api');\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\t// Vimeo\r\n\r\n\tvar vimFramePlayers = function() {\r\n\t\tif ( $(\"iframe[src*='vimeo']\").length ) {\r\n\t\t\tvar vimFrameBuild = function(name) {\r\n\t\t\t\tvar currentPlayer = $(\"#\" + name),\r\n\t\t\t\t\twrapper = $(\".\" + name),\r\n\t\t\t\t\tpreview = wrapper.children(\".video-thumb\"),\r\n\t\t\t\t\tbutton = wrapper.children(\".video-button\");\r\n\r\n\t\t\t\tvar onPlayerReady = function() {\r\n\t\t\t\t\twrapper.addClass(\"loaded\");\r\n\r\n\t\t\t\t\tbutton.off().on(\"click\", function() {\r\n\t\t\t\t\t\tif ( !wrapper.hasClass(\"playing\") ) {\r\n\t\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.vimeo(\"play\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurrentPlayer.vimeo(\"pause\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tpreview.off().on(\"click\", function() {\r\n\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.vimeo(\"play\");\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar onPlayerStop = function() {\r\n\t\t\t\t\twrapper.removeClass(\"playing\");\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcurrentPlayer\r\n\t\t\t\t\t.on(\"load\", onPlayerReady)\r\n\t\t\t\t\t.on(\"pause finish\", onPlayerStop);\r\n\t\t\t}\r\n\r\n\t\t\t$(\"iframe[src*='vimeo']\").each(function(i) {\r\n\t\t\t\tif ( !$(this).parents(\".video-frame\").length ) {\r\n\t\t\t\t\tvar el = $(this),\r\n\t\t\t\t\t\tname = \"vimFramePlayer-\" + i,\r\n\t\t\t\t\t\tvideoSRC = el.attr(\"src\").split(\"/\"),\r\n\t\t\t\t\t\tvideoID = videoSRC[videoSRC.length - 1].split(\"?\")[0],\r\n\t\t\t\t\t\tplayerVars = {\r\n\t\t\t\t\t\t\tapi: 1,\r\n\t\t\t\t\t\t\tplayer_id: name\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twidget =   '<div class=\"video-frame ' + name + '\">\\\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"video-overlay\"></div>\\\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"video-loader\" src=\"' + config.application.root + 'img/loader.gif\" alt=\"Video loader\">\\\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"video-thumb\">&nbsp;</div>\\\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"video-button\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-play\" src=\"' + config.application.root + 'img/icons/icon-play.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-play.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-pause\" src=\"' + config.application.root + 'img/icons/icon-pause.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-pause.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t\t\t<iframe id=\"' + name + '\" src=\"https://player.vimeo.com/video/' + videoID + \"?\" + serialize(playerVars) + '\" frameborder=\"0\" allowfullscreen></iframe>\\\r\n\t\t\t\t\t\t\t\t\t</div>';\r\n\r\n\t\t\t\t\tel.wrap(widget);\r\n\r\n\t\t\t\t\tinitSVGs();\r\n\r\n\t\t\t\t\tif ( !!el.attr('data-video-thumb') && el.attr('data-video-thumb') !== \"\" ) {\r\n\t\t\t\t\t\tvar videoThumb = el.data(\"video-thumb\");\r\n\t\t\t\t\t\tel.parents(\".video-frame\").children(\".video-thumb\").css({\"background\": \"url(\" + videoThumb + \")\"});\r\n\t\t\t\t\t\tel.remove();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar build = function(data) {\r\n\t\t\t\t\t\t\tvar videoThumb = data[0].thumbnail_large;\r\n\t\t\t\t\t\t\tel.parents(\".video-frame\").children(\".video-thumb\").css({\"background\": \"url(\" + videoThumb + \")\"});\r\n\t\t\t\t\t\t\tel.remove();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdataRequest(\"https://vimeo.com/api/v2/video/\" + videoID + \".json\", \"GET\", build);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvimFrameBuild(name);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvar vimVideoPlayers = function() {\r\n\t\tif ( $(\".video-frame[data-video-service='vimeo']\").length ) {\r\n\t\t\tvar vimVideoBuild = function(name) {\r\n\t\t\t\tvar currentPlayer = $(\"#\" + name),\r\n\t\t\t\t\twrapper = $(\".\" + name),\r\n\t\t\t\t\tpreview = wrapper.children(\".video-thumb\"),\r\n\t\t\t\t\tbutton = wrapper.children(\".video-button\");\r\n\r\n\t\t\t\tvar onPlayerReady = function() {\r\n\t\t\t\t\twrapper.addClass(\"loaded\");\r\n\r\n\t\t\t\t\tbutton.off().on(\"click\", function() {\r\n\t\t\t\t\t\tif ( !wrapper.hasClass(\"playing\") ) {\r\n\t\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.vimeo(\"play\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcurrentPlayer.vimeo(\"pause\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tpreview.off().on(\"click\", function() {\r\n\t\t\t\t\t\twrapper.addClass(\"playing\");\r\n\t\t\t\t\t\tif ( !config.application.touch ) currentPlayer.vimeo(\"play\");\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar onPlayerStop = function() {\r\n\t\t\t\t\twrapper.removeClass(\"playing\");\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcurrentPlayer\r\n\t\t\t\t\t.on(\"load\", onPlayerReady)\r\n\t\t\t\t\t.on(\"pause finish\", onPlayerStop);\r\n\t\t\t}\r\n\r\n\t\t\t$(\".video-frame[data-video-service='vimeo']\").each(function(i) {\r\n\t\t\t\tvar el = $(this),\r\n\t\t\t\t\tname = \"vimVideoPlayer-\" + i,\r\n\t\t\t\t\tvideoID = el.data(\"video-id\"),\r\n\t\t\t\t\tplayerVars = {\r\n\t\t\t\t\t\tapi: 1,\r\n\t\t\t\t\t\tplayer_id: name\r\n\t\t\t\t\t},\r\n\t\t\t\t\twidget =   '<div class=\"video-overlay\"></div>\\\r\n\t\t\t\t\t\t\t\t<img class=\"video-loader\" src=\"' + config.application.root + 'img/loader.gif\" alt=\"Video loader\">\\\r\n\t\t\t\t\t\t\t\t<div class=\"video-thumb\">&nbsp;</div>\\\r\n\t\t\t\t\t\t\t\t<div class=\"video-button\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-play\" src=\"' + config.application.root + 'img/icons/icon-play.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-play.png\\'\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-pause\" src=\"' + config.application.root + 'img/icons/icon-pause.svg\" onerror=\"this.onerror=null;this.src=\\'' + config.application.root + 'img/icons/icon-pause.png\\'\">\\\r\n\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t<iframe id=\"' + name + '\" src=\"https://player.vimeo.com/video/' + videoID + \"?\" + serialize(playerVars) + '\" frameborder=\"0\" allowfullscreen></iframe>';\r\n\r\n\t\t\t\tel.html(\"\").addClass(name).append(widget);\r\n\r\n\t\t\t\tinitSVGs();\r\n\r\n\t\t\t\tif ( !!el.attr('data-video-thumb') && el.attr('data-video-thumb') !== \"\" ) {\r\n\t\t\t\t\tvar videoThumb = el.data(\"video-thumb\");\r\n\t\t\t\t\tel.children(\".video-thumb\").css({\"background\": \"url(\" + videoThumb + \")\"});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar build = function(data) {\r\n\t\t\t\t\t\tvar videoThumb = data[0].thumbnail_large;\r\n\t\t\t\t\t\tel.children(\".video-thumb\").css({\"background\": \"url(\" + videoThumb + \")\"});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataRequest(\"https://vimeo.com/api/v2/video/\" + videoID + \".json\", \"GET\", build);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvimVideoBuild(name);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvimFramePlayers();\r\n\tvimVideoPlayers();\r\n\r\n\tif ( config.application.debug ) console.log(\"Widget :: Videos\");\r\n}","// Cookie System\n\nvar cookieSystem;\n\nvar initCookies = function() {\n\tcookieSystem = {\n\t\tget: function(sKey) {\n\t\t\treturn decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n\t\t},\n\t\tset: function(sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n\t\t\tif (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n\t\t\tvar sExpires = \"\";\n\t\t\tif (vEnd) {\n\t\t\t\tswitch (vEnd.constructor) {\n\t\t\t\t\tcase Number:\n\t\t\t\t\t\tvar currentDate = new Date(),\n\t\t\t\t\t\t\texpiryDate = new Date(currentDate.getTime() + (1000 * 60 * 60 * 24 * vEnd));\n\n\t\t\t\t\t\tsExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; expires=\" + expiryDate.toGMTString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase String:\n\t\t\t\t\t\tsExpires = \"; expires=\" + vEnd;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Date:\n\t\t\t\t\t\tsExpires = \"; expires=\" + vEnd.toGMTString();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdocument.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n\t\t\treturn true;\n\t\t},\n\t\tremove: function(sKey, sPath, sDomain) {\n\t\t\tif (!sKey || !this.hasItem(sKey)) { return false; }\n\t\t\tdocument.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + ( sDomain ? \"; domain=\" + sDomain : \"\") + ( sPath ? \"; path=\" + sPath : \"\");\n\t\t\treturn true;\n\t\t},\n\t\thas: function(sKey) {\n\t\t\treturn (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n\t\t}\n\t}\n\n\tif ( config.application.debug ) console.log(\"System :: Cookie System\");\n}","// IE8 Fixes\r\n\r\nif (!window.console) console = { log: function() {} };\r\n\r\n\r\n\r\n\r\n// Asynchronous script loading with callback function\r\n\r\nvar loadScript = function(src, callback) {\r\n\tvar script = document.createElement(\"script\");\r\n\tscript.type = \"text/javascript\";\r\n\tscript.src = src;\r\n\r\n\tif ( callback ) script.onload = callback;\r\n\tdocument.body.appendChild(script);\r\n}\r\n\r\n\r\n\r\n\r\n// SVG Injection\r\n\r\nvar initSVGs = function() {\r\n\tif ( !$(\"html\").hasClass(\"lt-ie9\") && $('img.svg').length ) {\r\n\t\tvar svgCount = 0;\r\n\r\n\t\t$('img.svg').each(function(i) {\r\n\t\t\tvar img = $(this),\r\n\t\t\t\timgID = img.attr('id'),\r\n\t\t\t\timgClass = img.attr('class'),\r\n\t\t\t\timgURL = img.attr('src');\r\n\r\n\t\t\tsvgCount = i;\r\n\r\n\t\t\t$.get(imgURL, function(data) {\r\n\t\t\t\tvar svg = $(data).find('svg');\r\n\t\t\t\tif(typeof imgID !== 'undefined') svg = svg.attr('id', imgID);\r\n\t\t\t\tif(typeof imgClass !== 'undefined') svg = svg.attr('class', imgClass + ' replaced-svg');\r\n\t\t\t\tif ( img.hasClass(\"icon\") ) svg.find(\"*\").removeAttr(\"style\");\r\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\r\n\t\t\t\timg.replaceWith(svg);\r\n\t\t\t}, 'xml').fail(function() {\r\n                img.removeClass(\"svg\");\r\n            });\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"System :: SVG Injection @ \" + svgCount + \" images\");\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n// Randomisation\r\n\r\nvar randomizeInteger = function(min, max) {\r\n\treturn Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\n\r\n\r\n\r\n// Popup\r\n\r\nvar popupWindow = function(url, title, w, h) {\r\n\tvar left = (screen.width / 2) - (w / 2);\r\n\tvar top = (screen.height / 2) - (h / 2);\r\n\treturn window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);\r\n}\r\n\r\n\r\n\r\n\r\n// Highlight\r\n\r\nvar highlight = function(el, val) {\r\n\tvar match = RegExp(val, 'gi');\r\n\r\n\tel.each(function() {\r\n\t\t$(this).filter(function() {\r\n\t\t\treturn match.test($(this).text());\r\n\t\t}).html(function() {\r\n\t\t\tif ( !val ) return $(this).text();\r\n\t\t\treturn $(this).text().replace(match, '<span class=\"highlight\">$&</span>');\r\n\t\t});\r\n\t});\r\n}\r\n\r\nvar unhighlight = function(el) {\r\n\tel.find(\"span.highlight\").replaceWith(function() {\r\n\t\treturn $(this).text();\r\n\t});\r\n}\r\n\r\n\r\n\r\n\r\n// URLs\r\n\r\nvar URLQueryObject = function() { // Creates an object from the URL's query string\r\n\tvar urlParams = \"\";\r\n\r\n\twindow.onpopstate = function() {\r\n\t\tvar match,\r\n\t\t\tpl     = /\\+/g,  // Regex for replacing addition symbol with a space\r\n\t\t\tsearch = /([^&=]+)=?([^&]*)/g,\r\n\t\t\tdecode = function(s) { return decodeURIComponent(s.replace(pl, \" \")); },\r\n\t\t\tquery  = window.location.search.substring(1);\r\n\r\n\t\turlParams = {};\r\n\t\twhile (match == search.exec(query)) {\r\n\t\t   urlParams[decode(match[1])] = decode(match[2]);\r\n\t\t}\r\n\t};\r\n\r\n\treturn urlParams;\r\n}\r\n\r\n\r\n\r\n\r\n// AJAX\r\n\r\nvar returnedData,\r\n\tdataObject = \"\";\r\n\r\nvar dataRequest = function(url, type, successFunction) {\r\n\tif ( config.application.debug ) console.log('AJAX ~~ Request (' + url + ')');\r\n\r\n\trequest = $.ajax({\r\n\t\turl: url,\r\n\t\ttype: type,\r\n\t\tdata: type == \"POST\" ? dataObject : \"\",\r\n\t\tdataType: \"JSON\",\r\n\t\tsuccess: function(data) {\r\n\t\t\tif ( config.application.debug ) console.log('AJAX ~~ Success (' + url + ')');\r\n\t\t\t// if ( config.application.debug ) console.log(data);\r\n\t\t\tif ( typeof successFunction !== 'undefined' ) successFunction(data);\r\n\t\t},\r\n\t\terror: function(request, status, error) {\r\n\t\t\tif ( config.application.debug ) console.log('AJAX ~~ Error (' + url + ')');\r\n\t\t\t// if ( config.application.debug ) console.log(request, status, error, request.statusText);\r\n\t\t}\r\n\t});\r\n}\r\n\r\n\r\n\r\n\r\n// Hyperlinks\r\n\r\nvar anchorClicked;\r\n\r\nvar initLinks = function() {\r\n\t$(document).on(\"click\", \"a[href^='#']\", function(event) {\r\n\t\tvar link = $.attr(this, \"href\");\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( link === \"#\") {\r\n\t\t\tif ( config.application.debug ) console.log(\"System :: Link blocked\");\r\n\t\t} else {\r\n\t\t\tif ( $(link).length ) {\r\n\t\t\t\tanchorClicked = true;\r\n\r\n\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\tscrollTop: $(link).offset().top - 90\r\n\t\t\t\t}, {\r\n\t\t\t\t\tduration: 1000,\r\n\t\t\t\t\tqueue: false,\r\n\t\t\t\t\tcomplete: function() { anchorClicked = false; }\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tif ( config.application.debug ) console.log(\"System :: Links\");\r\n}\r\n\r\n\r\n\r\n\r\n// Scroll Progress\r\n\r\nvar scrollProgress = function() {\r\n\tvar scrollPercentage = (pageTop * 100) / ($(document).height() - $(window).height());\r\n\t$(\".scroll-progress\").width(scrollPercentage + \"%\");\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// Initialisation\r\n\r\nvar ms = new Date().getTime();\r\n\r\nvar matterReady = function() {\r\n\tisWideScreen = $(window).width() > 768;\r\n\r\n\tif ( config.application.touch ) { // If touch device\r\n\t\tFastClick.attach(document.body); // Removes 300ms delay from taps on mobile devices. Requires fastclick.js.\r\n\t\t$(\".map-canvas\").addClass(\"map-mobile\"); // Fixes image distortion on Google Maps - See styles/core/widgets/_map.scss.\r\n\t}\r\n\r\n\r\n\t// Logs Legend\r\n\r\n\tif ( config.application.debug ) {\r\n\t\tconsole.log(\":: means DOM.ready\");\r\n\t\tconsole.log(\"~~ means Async\");\r\n\t\tconsole.log(\" means Complete\");\r\n\t\tconsole.log(\"== means User Action\");\r\n\t\tconsole.log(\" \");\r\n\t}\r\n\r\n\r\n\t// Easter Eggs Init\r\n\r\n\tinitKonami();\r\n\r\n\r\n\t// System Init\r\n\r\n\tinitAnimationFrame();\r\n\tinitSVGs();\r\n\tinitSession();\r\n\tinitCookies();\r\n\tinitLinks();\r\n\tinitTables();\r\n\tscrollProgress();\r\n\r\n\r\n\t// Widgets Init\r\n\r\n\tinitFontSizeControls();\r\n\tinitOverlays();\r\n\tinitNotifications();\r\n\tinitTooltips();\r\n\r\n\r\n\t// Search Init\r\n\r\n\tinitSearch();\r\n\tinitAutocomplete();\r\n\tinitTagClouds();\r\n\r\n\r\n\t// Forms Init\r\n\r\n\tinitForm();\r\n\tinitDropdowns();\r\n\tinitValidation();\r\n\r\n\r\n\t// Global Init\r\n\r\n\tinitGlobal();\r\n}\r\n\r\n\r\nvar matterDeferred = function() {\r\n\t$(\"body\").removeClass(\"preload\");\r\n\r\n\t// Deferred Init\r\n\r\n\tinitBrochure();\r\n\tinitSliders();\r\n\tinitMap();\r\n\tinitTwitter();\r\n\tinitVideo();\r\n\r\n\tif ( config.application.debug ) console.log(\"Done  Matter in \" + (new Date().getTime() - ms) + \" milliseconds\");\r\n}\r\n\r\n\r\n\r\n\r\n// Window Load\r\n\r\nvar isWideScreen;\r\nvar pageTop;\r\nvar pageBottom;\r\n\r\n$(document).on(\"ready\", matterReady);\r\n\r\n$(window).on(\"load\", matterDeferred);\r\n\r\n$(window).on(\"resize\", function() {\r\n\tisWideScreen = $(this).width() > 768;\r\n});\r\n\r\n$(window).on(\"scroll\", function() {\r\n\tpageTop = $(document).scrollTop();\r\n\tpageBottom = pageTop + $(this).height();\r\n\tscrollProgress();\r\n});","// Responsive Breakpoint Debugging and Discovery\r\n\r\nvar initBreakpointDebug = function(url, callback) {\r\n\tvar script = document.createElement('script');\r\n\tscript.type = 'text/javascript';\r\n\tif (script.readyState) {\r\n\t\tscript.onreadystatechange = function() {\r\n\t\t\tif (script.readyState == 'loaded' || script.readyState == 'complete') {\r\n\t\t\t\tscript.onreadystatechange = null;\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tscript.onload = function() {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\tscript.src = url;\r\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n$(document).ready(function() {\r\n\tif ( config.application.debug && !config.application.touch ) {\r\n\t\t$(\".rwd-debug\").removeClass(\"hidden\").on(\"click\", function() {\r\n\t\t\tinitBreakpointDebug('scripts/core/debug/breakpoint.js', function() {\r\n\t\t\t\tvar doc = document;\r\n\t\t\t\tdoc.write('<!DOCTYPE html>' + '<html>' + '<head>' + '<meta charset=\"UTF-8\">' + '<title>Breakpoint Test - ' + doc.title + '</title>' + '<link rel=\"stylesheet\" href=\"styles/core/debug/bookmark.css\">' + '<script src=\"scripts/core/debug/bookmark.js\"></script>' + '</head>' + '<body data-url=\"' + doc.URL + '\">' + '<header id=\"topHeader\" class=\"clearfix\">' + '<a href=\"#\"></a>' + '</section>' + '<section id=\"bpCount\">' + '<div id=\"count\">00</div>' + '<div id=\"countText\"><span>BREAKPOINTS FOUND</span></div>' + '</section>' + mqUniqueBP + '</header>' + '<section id=\"qcWWW\">' + '<ul id=\"qcWW\"></ul>' + '</section>' + '</body>' + '</html>');\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n});","// Forms\r\n\r\nvar initForm = function() {\r\n\t// Country Dropdowns\r\n\r\n\tif ( $(\"select[data-countries]\").length ) {\r\n\t\t$(\"select[data-countries]\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\turl = el.data(\"countries\");\r\n\r\n\t\t\tvar buildCountries = function(data) {\r\n\t\t\t\tfor (var i = 0; i < data.length; i++ ) {\r\n\t\t\t\t\tvar name = data[i].Name,\r\n\t\t\t\t\t\tcode = data[i].Code,\r\n\t\t\t\t\t\toption = \"<option value='\" + code + \"'>\" + name + \"</option>\";\r\n\r\n\t\t\t\t\tel.append(option);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinitDropdowns();\r\n\t\t\t}\r\n\r\n\t\t\tdataRequest(url, \"GET\", buildCountries);\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: Country Dropdowns\");\r\n\t}\r\n\r\n\r\n\r\n\t// File Inputs\r\n\r\n\tif ( $(\".file-wrapper\").length ) {\r\n\t\t$(\".file-wrapper:not('.last')\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\tinput = el.find(\"input\"),\r\n\t\t\t\tbutton = el.find(\".fake-upload\"),\r\n\t\t\t\tresult = el.find(\".file-result\");\r\n\r\n\t\t\tbutton.on(\"click\", function() {\r\n\t\t\t\tinput.trigger(\"click\");\r\n\t\t\t});\r\n\r\n\t\t\tinput.on(\"change\", function() {\r\n\t\t\t\tvar text = $(this).val().replace(\"C:\\\\fakepath\\\\\", \"\");\r\n\t\t\t\tresult.html(text).addClass('loaded');\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: File Upload\");\r\n\t}\r\n\r\n\t// Multiple Upload\r\n\r\n\tif ( $(\".multifile-wrapper\").length ) {\r\n\t\tvar initFileInputs = function() {\r\n\t\t\tvar el = $(\".multifile-wrapper\"),\r\n\t\t\t\tinputCount = el.length,\r\n\t\t\t\tinputLimit = config.forms.multiUploadlimit,\r\n\t\t\t\tlimitElement = $(\".multi-limit\"),\r\n\t\t\t\tcurrentCount = inputLimit - el.find(\".loaded\").length,\r\n\t\t\t\tisSingular = currentCount == 1 ? $(\".multifile-info\").find(\".plural\").hide() : $(\".multifile-info\").find(\".plural\").show(),\r\n\t\t\t\tnewInput = '<div class=\"multifile-wrapper mobile-hide last\">\\\r\n\t\t\t\t\t\t\t\t<input type=\"file\" id=\"file' + \"[\" + inputCount + \"]\" + '\" name=\"file' + \"[\" + inputCount + \"]\" + '\" />\\\r\n\t\t\t\t\t\t\t\t<div class=\"fakefile\">\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"button primary fake-upload\">Choose File</div>\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"file-result\">No file chosen</div>\\\r\n\t\t\t\t\t\t\t\t\t<div class=\"button primary fake-close\">\\\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-close\" src=\"img/icons/icon-close.svg\" width=\"16\" height=\"16\" onerror=\"this.onerror=null;this.src=\\'img/icons/icon-close.png\\'\" alt=\"File upload delete icon\">\\\r\n\t\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t\t</div>';\r\n\r\n\t\t\tlimitElement.html(currentCount);\r\n\r\n\t\t\tel.each(function(i) {\r\n\t\t\t\tvar el = $(this);\r\n\t\t\t\tvar resultElement = el.find(\".file-result\");\r\n\r\n\t\t\t\tel.find(\"input\").attr(\"id\", \"file\" + \"[\" + i + \"]\").attr(\"name\", \"file\" + \"[\" + i + \"]\");\r\n\r\n\t\t\t\tel\r\n\t\t\t\t.off(\"click\")\r\n\t\t\t\t.on(\"click\", \".fake-upload\", function() {\r\n\t\t\t\t\tel.find(\"input\").trigger(\"click\");\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"click\", \".fake-close\", function() {\r\n\t\t\t\t\tif ( inputCount == inputLimit && !$(\".multifile-wrapper.last\").length ) {\r\n\t\t\t\t\t\t$(newInput).insertAfter($(\".multifile-wrapper\").eq(inputCount - 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.remove();\r\n\t\t\t\t\tinitFileInputs();\r\n\t\t\t\t})\r\n\t\t\t\t.off(\"change\")\r\n\t\t\t\t.on(\"change\", \"input\", function() {\r\n\t\t\t\t\tvar text = $(this).val().replace(\"C:\\\\fakepath\\\\\", \"\");\r\n\t\t\t\t\tresultElement.html(text).addClass('loaded');\r\n\r\n\t\t\t\t\tif ( inputCount < inputLimit ) $(newInput).insertAfter(el);\r\n\t\t\t\t\tinitFileInputs();\r\n\t\t\t\t\tif ( i < inputCount ) el.removeClass(\"last\");\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tinitSVGs();\r\n\t\t}\r\n\t\tinitFileInputs();\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: Multiple File Upload\");\r\n\t}\r\n\r\n\r\n\r\n\t// Checkboxes, Radio buttons & Toggles\r\n\r\n\tvar toggle = '<span class=\"toggle-body\">\\\r\n\t\t\t\t\t  <span class=\"toggle-switch\"></span>\\\r\n\t\t\t\t\t  <span class=\"toggle-track\">\\\r\n\t\t\t\t\t  <span class=\"toggle-background\"></span>\\\r\n\t\t\t\t\t\t  <span class=\"toggle-background toggle-background-negative\"></span>\\\r\n\t\t\t\t\t  </span>\\\r\n\t\t\t\t  </span>';\r\n\r\n\tif ( $(\"input[type='checkbox'], input[type='radio']\").length ) {\r\n\t\t$(\"input[type='checkbox'], input[type='radio']\").each(function() {\r\n\t\t\tvar el = $(this),\r\n\t\t\t\ttype = el.attr(\"type\"),\r\n\t\t\t\tparent = \"\";\r\n\r\n\t\t\tif ( el.attr(\"data-toggle\") === \"true\" ) {\r\n\t\t\t\tel.wrap(\"<div class='controller toggle'></div>\");\r\n\t\t\t\tparent = el.parents(\".controller\");\r\n\t\t\t\tparent.next(\"label\").prepend(toggle).appendTo(parent);\r\n\r\n\t\t\t\tif ( config.application.debug ) console.log(\"Form :: Toggle \" + type.toCamelCase());\r\n\t\t\t} else {\r\n\t\t\t\tel.wrap(\"<div class='controller \" + type + \"'></div>\");\r\n\t\t\t\tparent = el.parents(\".controller\");\r\n\t\t\t\tparent.next(\"label\").appendTo(parent);\r\n\r\n\t\t\t\tif ( config.application.debug ) console.log(\"Form :: \" + type.toCamelCase());\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on(\"click\", \"input[type='checkbox'][readonly], input[type='radio'][readonly]\", function(event) {\r\n\t\tevent.preventDefault();\r\n\t});\r\n\r\n\r\n\r\n\t// Password Meters\r\n\r\n\tif ( $(\"input[type='password']\").length ) {\r\n\t\tvar wrapper = '<div class=\"password-wrapper\"></div>',\r\n\t\t\tmeter = '<div class=\"password-meter-mask\"><div class=\"password-meter\"></div></div>';\r\n\r\n\t\t$(\"input[type='password']\").each(function() {\r\n\t\t\tvar el = $(this);\r\n\r\n\t\t\tif ( el.data(\"validation\") !== \"match\" ) {\r\n\t\t\t\tel.wrap(wrapper);\r\n\t\t\t\t$(meter).insertAfter(el);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: Password Meters\");\r\n\t}\r\n\r\n\r\n\r\n\t// Progress Bars\r\n\r\n\tif ( $(\"progress\").length ) {\r\n\t\tvar triggerProgress = function(progress) {\r\n\t\t\tvar el = $(\"progress\"),\r\n\t\t\t\tlabel = el.prev(\"label\"),\r\n\t\t\t\tbar = el.find(\".progress-bar span\");\r\n\r\n\t\t\tbar.width(progress + \"%\").html(progress + \"%\");\r\n\t\t\tlabel.removeClass(\"active\").width(progress + \"%\").attr(\"data-progress\", progress);\r\n\t\t\tel.removeClass(\"valid\").attr(\"value\", progress);\r\n\r\n\t\t\tif ( progress >= 8 ) label.addClass(\"active\");\r\n\t\t\tif ( progress >= 100 ) el.addClass(\"valid\");\r\n\t\t}\r\n\r\n\t\t$(\"[data-progress]\").on(\"click\", function(event) {\r\n\t\t\tvar progress = 0;\r\n\t\t\tclearInterval(progressInterval);\r\n\r\n\t\t\tvar progressInterval = setInterval(function() {\r\n\t\t\t\tif ( progress < 100 ) {\r\n\t\t\t\t\tprogress++;\r\n\t\t\t\t\ttriggerProgress(progress);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(\".progress\").addClass(\"valid\");\r\n\t\t\t\t\tclearInterval(progressInterval);\r\n\t\t\t\t}\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: Progress Bar\");\r\n\t}\r\n}\r\n\r\nvar initDropdowns = function() {\r\n\tif ( $(\"select\").length ) {\r\n\t\tvar buildDropdowns = function() {\r\n\t\t\t$(\"select\").each(function() {\r\n\t\t\t\tvar select = $(this),\r\n\t\t\t\t\tsize = size == \"undefined\" || size === \"\" ? 1 : parseInt(select.attr(\"size\"), 10),\r\n\t\t\t\t\ttype = typeof size !== \"undefined\" && size !== \"\" && size > 1 ? \"list\" : \"drop\",\r\n\t\t\t\t\toptions = select.children(\"option\").not(\"[default]\"),\r\n\t\t\t\t\tselected = select.children(\"option:selected\"),\r\n\t\t\t\t\twrapperEl = '<div class=\"dropdown-wrapper ' + type + '\" data-size=\"' + size + '\"></div>',\r\n\t\t\t\t\tcurrentEl = '<div class=\"dropdown-current\" data-value=\"' + selected.val() + '\">' + selected.html() + '</div>',\r\n\t\t\t\t\tarrowEl = ' <div class=\"dropdown-arrow valign-middle\">\\\r\n\t\t\t\t\t\t\t\t\t<img class=\"svg icon icon-caret-down\" src=\"img/icons/icon-caret-down.svg\" onerror=\"this.onerror=null;this.src=\\'img/icons/icon-caret-down.png\\'\">\\\r\n\t\t\t\t\t\t\t\t</div>',\r\n\t\t\t\t\tdropEl = '<div class=\"dropdown default\"></div>';\r\n\r\n\r\n\t\t\t\t// Build structure\r\n\r\n\t\t\t\tif ( !select.parents(\".dropdown-wrapper\").length ) {\r\n\t\t\t\t\tselect.wrap(wrapperEl);\r\n\t\t\t\t\t$(dropEl).insertAfter(select);\r\n\t\t\t\t\t$(arrowEl).insertAfter(select);\r\n\t\t\t\t\t$(currentEl).insertAfter(select);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dropWrapper = select.parents(\".dropdown-wrapper\"),\r\n\t\t\t\t\tarrow = dropWrapper.children(\".dropdown-arrow\"),\r\n\t\t\t\t\tcurrent = dropWrapper.children(\".dropdown-current\"),\r\n\t\t\t\t\tdropdown = dropWrapper.children(\".dropdown\");\r\n\r\n\t\t\t\tdropdown.html(\"\");\r\n\t\t\t\tcurrent.val(selected.val()).html(selected.html());\r\n\r\n\t\t\t\tfor ( var i = 0; i < options.length; i++ ) {\r\n\t\t\t\t\tvar option = options.eq(i),\r\n\t\t\t\t\t\tisSelected = option.is(\":selected\") ? \"active\" : \"\",\r\n\t\t\t\t\t\titem = '<div class=\"dropdown-item ' + isSelected + '\" data-value=\"' + option.val() + '\">' + option.html() + '</div>';\r\n\r\n\t\t\t\t\tdropdown.append(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dropItem = dropdown.children(\".dropdown-item\");\r\n\r\n\t\t\t\tif ( type == \"list\" ) {\r\n\t\t\t\t\tdropdown.height(((dropWrapper.find(\".dropdown-item\").outerHeight() + 1) * size) - 1);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Click Event\r\n\r\n\t\t\t\tvar el = $(this);\r\n\r\n\t\t\t\tcurrent.attr(\"class\", \"dropdown-current \" + select.attr(\"class\"));\r\n\r\n\t\t\t\tif ( select.is('[readonly]') ) {\r\n\t\t\t\t\tdropWrapper.addClass(\"readonly\");\r\n\t\t\t\t\tcurrent.attr(\"readonly\", true);\r\n\t\t\t\t} else if ( select.is('[disabled]') ) {\r\n\t\t\t\t\tdropWrapper.addClass(\"disabled\");\r\n\t\t\t\t\tcurrent.attr(\"disabled\", true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurrent.off().on(\"click\", function() {\r\n\t\t\t\t\t\tselect.focus();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarrow.off().on(\"click\", function() {\r\n\t\t\t\t\t\tselect.focus();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tdropItem.off().on(\"click\", function() {\r\n\t\t\t\t\t\tvar value = $(this).attr(\"data-value\").trim();\r\n\t\t\t\t\t\tselect.val(value).trigger(\"change\");\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tselect.on(\"focus\", function() {\r\n\t\t\t\t\t\t$(\".dropdown-wrapper\").removeClass(\"active\");\r\n\t\t\t\t\t\tdropWrapper.addClass(\"active\");\r\n\t\t\t\t\t}).on(\"change\", function() {\r\n\t\t\t\t\t\tvar selected = $(this).children(\"option:selected\");\r\n\r\n\t\t\t\t\t\tselect.blur();\r\n\t\t\t\t\t\tdropWrapper.removeClass(\"active\");\r\n\t\t\t\t\t\tif ( !select.hasClass(\"keep\") ) current.text(selected.text()).attr(\"data-value\", selected.val());\r\n\t\t\t\t\t\tdropItem.removeClass(\"active\");\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < dropItem.length; i++ ) {\r\n\t\t\t\t\t\t\tif ( dropItem.eq(i).text() === selected.text() ) {\r\n\t\t\t\t\t\t\t\tdropItem.eq(i).addClass(\"active\");\r\n\t\t\t\t\t\t\t\tif ( select.parents(\"form\").hasClass(\"auto-send\") ) select.parents(\"form\").submit();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"html, body\").off().on(\"click\", function(event) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!$(event.target).closest(\".dropdown\").length &&\r\n\t\t\t\t\t\t!$(event.target).closest(\".dropdown-wrapper.active\").length\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t$(\".dropdown-wrapper\").removeClass(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tbuildDropdowns();\r\n\r\n\t\tif ( config.application.debug ) console.log(\"Form :: Dropdowns\");\r\n\r\n\t\tinitSVGs();\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n$(window).load(function() {\r\n\r\n\t// Datepicker\r\n\r\n\t$(\"input[data-calendar='true']\").datepicker({\r\n\t\tautoclose: true,\r\n\t\tformat: \"dd/mm/yyyy\",\r\n\t\ttodayBtn: \"linked\",\r\n\t\ttodayHighlight: true,\r\n\t\tstartDate: new Date()\r\n\t});\r\n\r\n\t$(\".input-daterange\").datepicker({\r\n\t\tautoclose: true,\r\n\t\tformat: \"dd/mm/yyyy\",\r\n\t\ttodayBtn: \"linked\",\r\n\t\ttodayHighlight: true,\r\n\t\tstartDate: new Date()\r\n\t});\r\n\r\n});\r\n","// Session System\n\nvar sessionSystem;\n\nvar initSession = function() {\n\tif (JSON && JSON.stringify && JSON.parse) {\n\t\tvar win = window.top || window;\n\t\tvar store = win.name ? JSON.parse(win.name) : {};\n\n\t\tvar sessionSave = function() {\n\t\t\twin.name = JSON.stringify(store);\n\t\t};\n\n\t\tif (window.addEventListener) window.addEventListener(\"unload\", sessionSave, false);\n\t\telse if (window.attachEvent) window.attachEvent(\"onunload\", sessionSave);\n\t\telse window.onunload = sessionSave;\n\n\t\tsessionSystem = {\n\t\t\tset: function(name, value) {\n\t\t\t\tstore[name] = value;\n\t\t\t\tsessionSave();\n\t\t\t},\n\t\t\tget: function(name) {\n\t\t\t\treturn store[name];\n\t\t\t},\n\t\t\tremove: function(name) {\n\t\t\t\tdelete store[name];\n\t\t\t\tsessionSave();\n\t\t\t},\n\t\t\tclear: function() {\n\t\t\t\tstore = {};\n\t\t\t\tsessionSave();\n\t\t\t},\n\t\t\tdump: function() {\n\t\t\t\treturn store;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( config.application.debug ) console.log(\"System :: Session System\");\n}","// Tables\r\n\r\nvar initTables = function() {\r\n\tif ( config.tables.responsive && $(\"table\").length ) {\r\n\t\t$(\"table\").addClass(\"table-original\").each(function(index) {\r\n\t\t\tvar el = $(this),\r\n                caption = el.children(\"caption\"),\r\n                table = this,\r\n\t\t\t\tdata = [],\r\n\t\t\t\theaders = [];\r\n\r\n\t\t\tfor ( var i = 0, rlen = table.rows.length; i < rlen; i++ ) {\r\n                var rowData = {};\r\n\t\t\t\tfor ( var j = 0, clen = table.rows[i].cells.length; j < clen; j++ ) {\r\n                    var cellData = table.rows[i].cells[j].innerHTML;\r\n                    if ( i > 0 ) \r\n\t\t\t\t\t    rowData[headers[j]] = cellData;\r\n                    else \r\n                        headers[j] = cellData;\r\n                }\r\n                if ( i > 0 ) data.push(rowData);\r\n\t\t\t}\r\n            \r\n\t\t\tfor ( var l = data.length - 1; l >= 0; l-- ) {\r\n\t\t\t\tvar rowGroup = data[l];\r\n                var tbody = $(\"<tbody/>\");\r\n                \r\n\t\t\t\tfor ( var key in rowGroup ) {\r\n\t\t\t\t\tvar row = '<tr>\\\r\n\t\t\t\t\t\t\t\t   <th scope=\"row\">' + key + '</th>\\\r\n\t\t\t\t\t\t\t\t   <td>' + rowGroup[key] + '</td>\\\r\n\t\t\t\t\t\t\t   </tr>';\r\n\r\n\t\t\t\t\ttbody.append(row);\r\n\t\t\t\t}\r\n                \r\n                var mobileTable = $(\"<table/>\").addClass(\"table-mirror\");\r\n                if ( caption.length )\r\n                    $('<caption/>').text(\"Row of \" + caption.text()).prependTo(mobileTable); \r\n                \r\n                mobileTable.append(tbody).insertAfter(el);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ( config.application.debug ) console.log(\"System :: Tables\");\r\n\t}\r\n}","// Validation\n\nvar initValidation = function() {\n\tif ( config.forms.validation && $(\"[data-validation]\").length ) {\n\n\t\t// Password Check\n\n\t\tvar scorePassword = function(pwd) {\n\t\t\tvar score = 0;\n\t\t\tif (!pwd)\n\t\t\t\treturn score;\n\n\t\t\t// Award every unique letter until 5 repetitions\n\t\t\tvar letters = {};\n\t\t\tfor ( var i = 0; i < pwd.length; i++ ) {\n\t\t\t\tletters[pwd[i]] = (letters[pwd[i]] || 0) + 1;\n\t\t\t\tscore += 5.0 / letters[pwd[i]];\n\t\t\t}\n\n\t\t\t// Bonus points for mixing it up\n\t\t\tvar variations = {\n\t\t\t\tdigits: /\\d/.test(pwd),\n\t\t\t\tlower: /[a-z]/.test(pwd),\n\t\t\t\tupper: /[A-Z]/.test(pwd),\n\t\t\t\tnonWords: /\\W/.test(pwd)\n\t\t\t};\n\n\t\t\tvariationCount = 0;\n\t\t\tfor ( var check in variations ) {\n\t\t\t\tvariationCount += (variations[check] === true) ? 1 : 0;\n\t\t\t}\n\t\t\tscore += (variationCount - 1) * 10;\n\n\t\t\treturn parseInt(score, 10);\n\n\t\t\t// score > 80 is \"strong\", score > 60 is \"good\", score >= 30 is \"weak\"\n\t\t}\n\n\n\t\t// Credit Card checks\n\n\t\tvar detectCard = function(number) {\n\t\t\tvar regex = {\n\t\t\t\tamex: /^3[47][0-9]{13}$/,\n\t\t\t\tdankort: /^(5019)\\d+$/,\n\t\t\t\tdiners: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,\n\t\t\t\tdiscover: /^6(?:011|5[0-9]{2})[0-9]{12}$/,\n\t\t\t\telectron: /^(4026|417500|4405|4508|4844|4913|4917)\\d+$/,\n\t\t\t\tinterpayment: /^(636)\\d+$/,\n\t\t\t\tjcb: /^(?:2131|1800|35\\d{3})\\d{11}$/,\n\t\t\t\tmaestro: /^(5018|5020|5038|5612|5893|6304|6759|6761|6762|6763|0604|6390)\\d+$/,\n\t\t\t\tmastercard: /^5[1-5][0-9]{14}$/,\n\t\t\t\tunionpay: /^(62|88)\\d+$/,\n\t\t\t\tvisa: /^4[0-9]{12}(?:[0-9]{3})?$/\n\t\t\t};\n\n\t\t\tif ( regex.amex.test(number) ) {\n\t\t\t\treturn 'american-express';\n\t\t\t} else if ( regex.dankort.test(number) ) {\n\t\t\t\treturn 'dankort';\n\t\t\t} else if ( regex.diners.test(number) ) {\n\t\t\t\treturn 'diners';\n\t\t\t} else if ( regex.discover.test(number) ) {\n\t\t\t\treturn 'discover';\n\t\t\t} else if ( regex.electron.test(number) ) {\n\t\t\t\treturn 'visa-electron';\n\t\t\t} else if ( regex.interpayment.test(number) ) {\n\t\t\t\treturn 'interpayment';\n\t\t\t} else if ( regex.jcb.test(number) ) {\n\t\t\t\treturn 'jcb';\n\t\t\t} else if ( regex.maestro.test(number) ) {\n\t\t\t\treturn 'maestro';\n\t\t\t} else if ( regex.mastercard.test(number) ) {\n\t\t\t\treturn 'mastercard';\n\t\t\t} else if ( regex.unionpay.test(number) ) {\n\t\t\t\treturn 'unionpay';\n\t\t\t} else if ( regex.visa.test(number) ) {\n\t\t\t\treturn 'visa';\n\t\t\t} else {\n\t\t\t\treturn 'generic';\n\t\t\t}\n\t\t}\n\n\n\n\t\t// Validation function called on keyup\n\n\t\tvar validateField = function(el, type, value) {\n\t\t\tif ( config.application.debug ) console.log(\"Validation :: \" + type);\n\n\t\t\tel.removeClass(\"invalid\").removeClass(\"valid\");\n\n\t\t\tswitch(type) {\n\t\t\t\tcase \"text\":\n\t\t\t\t\tif ( value !== \"\" ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"number\":\n\t\t\t\t\tcheck = /\\D+/;\n\n\t\t\t\t\tif ( value !== \"\" && value.length == value.replace(check, '').length ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"email\":\n\t\t\t\t\tcheck = /^\\S+@\\S+\\.\\S+$/;\n\n\t\t\t\t\tif ( value !== \"\" && check.test(value) ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"password\":\n\t\t\t\t\tif ( scorePassword(value) >= 30 ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"match\":\n\t\t\t\t\ttype = el.attr(\"type\");\n\t\t\t\t\tvar mirror = el.parents().find(\"input[type='\" + type + \"']\");\n\t\t\t\t\tcheck = mirror.val();\n\n\t\t\t\t\tif ( mirror.hasClass(\"valid\") && value === check ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"card\":\n\t\t\t\t\tif ( value !== \"\" ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\".card-wrapper .card\").attr(\"src\", \"img/icons/payment/cards/\" + detectCard(value) + \".png\");\n\n\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"date\":\n\t\t\t\t\tcheck = /^\\d{2}\\/\\d{2}\\/\\d{4}$/;\n\n\t\t\t\t\tif (value !== \"\" && check.test(value) ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\t\tcase \"select\":\n\t\t\t\t\tif (value !== \"\" ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\t\tel.parents(\".dropdown-wrapper\").children(\".dropdown-current\").attr(\"class\", \"dropdown-current \" + el.attr(\"class\"));\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"selectgroup\":\n\t\t\t\t\tgroup = el.data(\"validation-group\");\n\t\t\t\t\tvar selects = $(\"select[data-validation-group='\" + group + \"']\"),\n\t\t\t\t\t\tselectGroup = {};\n\n\t\t\t\t\tselectGroup[group] = [];\n\n\t\t\t\t\tselects.removeClass(\"invalid\").each(function() {\n\t\t\t\t\t\tvar checked = value !== \"\";\n\t\t\t\t\t\tselectGroup[group].push(checked);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (selectGroup[group].indexOf(true) != -1 ) {\n\t\t\t\t\t\tselects.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselects.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\t\tselects.parents(\".dropdown-wrapper\").children(\".dropdown-current\").attr(\"class\", \"dropdown-current \" + el.attr(\"class\"));\n\n\t\t\t\tbreak;\n\n\n\n\t\t\t\tcase \"checkbox\":\n\t\t\t\t\tif (el.prop(\"checked\") ) {\n\t\t\t\t\t\tel.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"radio\":\n\t\t\t\t\tgroup = el.attr(\"name\");\n\t\t\t\t\tvar radios = $(\"input[type='radio'][name='\" + group + \"']\"),\n\t\t\t\t\t\tradioGroup = {};\n\n\t\t\t\t\tradioGroup[group] = [];\n\n\t\t\t\t\tradios.removeClass(\"invalid\").each(function() {\n\t\t\t\t\t\tvar checked = $(this).prop(\"checked\");\n\t\t\t\t\t\tradioGroup[group].push(checked);\n\t\t\t\t\t});\n\n\t\t\t\t\tif (radioGroup[group].indexOf(true) != -1 ) {\n\t\t\t\t\t\tradios.addClass(\"valid\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tradios.addClass(\"invalid\");\n\t\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\t\tdefault:\n\t\t\t\t\tvar validArray = [];\n\t\t\t\t\tvar progress = 0;\n\n\t\t\t\t\tel.find(\"[required]\").each(function() {\n\t\t\t\t\t\tif ($(this).hasClass(\"valid\") ) {\n\t\t\t\t\t\t\tvalidArray.push(true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalidArray.push(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif ( validArray.indexOf(false) < 0 ) {\n\t\t\t\t\t\tel.addClass(\"submitted\").addClass(\"valid\");\n\n\t\t\t\t\t\tel.find(\"[data-validation='date']\").datepicker(\"remove\");\n\t\t\t\t\t\tel.find(\"input, select, textarea\").attr(\"readonly\", \"readonly\");\n\t\t\t\t\t\tel.find(\"button, input[type='submit']\").attr(\"readonly\", \"readonly\");\n\n\t\t\t\t\t\tinitDropdowns();\n\n\t\t\t\t\t\tel.find(\".form-loader\").hide();\n\t\t\t\t\t\tel.find(\".form-done\").show();\n\n\t\t\t\t\t\t// el.submit();\n\t\t\t\t\t\tnotify(\"Form submitted successfully.\", \"success\", 3000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.removeClass(\"valid\");\n\n\t\t\t\t\t\tel.find(\"[required]:not('.valid')\").addClass(\"invalid\");\n\n\t\t\t\t\t\tel.find(\".form-loader\").hide();\n\t\t\t\t\t\tel.find(\"button, input[type='submit']\").show();\n\n\t\t\t\t\t\tnotify(\"Form not submitted. Please review.\", \"failure\", 3000);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar validateRealtime = function(el, type, value) {\n\t\t\tconsole.log(\"Validating keypress for \" + type);\n\n\t\t\tswitch(type) {\n\t\t\t\tcase \"password\":\n\t\t\t\t\tel.next(\".password-meter-mask\").width(scorePassword(value) + \"%\").find(\".password-meter\").width(el.outerWidth());\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"card\":\n\t\t\t\t\t$(\".card-wrapper .card\").attr(\"src\", \"img/icons/payment/cards/\" + detectCard(value) + \".png\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\t\t// Validation Input Behaviour\n\n\t\t$(\"input[data-validate-key]\").on(\"keyup\", function() {\n\t\t\tvar el = $(this),\n\t\t\t\ttype = el.attr(\"data-validation\"),\n\t\t\t\tvalue = el.val();\n\n\t\t\tvalidateRealtime(el, type, value);\n\t\t});\n\n\t\t$(\"form[data-validation]\").each(function() {\n\t\t\tvar form = $(this);\n\n\t\t\tform.find(\"[required]\").each(function() {\n\t\t\t\tvar el = $(this);\n\n\t\t\t\tif ( el.attr(\"type\") === \"checkbox\" || el.attr(\"type\") === \"radio\" ) {\n\t\t\t\t\tel.on(\"change\", function() {\n\t\t\t\t\t\tvar type = el.attr(\"data-validation\"),\n\t\t\t\t\t\t\tvalue = el.val();\n\n\t\t\t\t\t\tvalidateField(el, type, value);\n\t\t\t\t\t}).next(\"label\").append(\"<span class='indicator-required'></span>\");\n\t\t\t\t} else {\n\t\t\t\t\tel.on(\"keyup\", function() {\n\t\t\t\t\t\tel.removeClass(\"valid\").removeClass(\"invalid\");\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"focus\", function() {\n\t\t\t\t\t\tvar type = el.attr(\"data-validation\"),\n\t\t\t\t\t\t\tvalue = el.val();\n\n\t\t\t\t\t\tif ( type == \"select\" ) el.next(\".dropdown-current\").removeClass(\"valid\").removeClass(\"invalid\");\n\t\t\t\t\t\tif ( $(this).hasClass(\"invalid\") ) validateField(el, type, value);\n\t\t\t\t\t}).on(\"blur\", function() {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tvar type = el.attr(\"data-validation\"),\n\t\t\t\t\t\t\t\tvalue = el.val();\n\n\t\t\t\t\t\t\tvalidateField(el, type, value);\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t}).prev(\"label\").append(\"<span class='indicator-required'></span>\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.on(\"submit\", function(event) {\n\t\t\t\tform.find(\"[required]\").each(function() {\n\t\t\t\t\tvar elem = $(this),\n\t\t\t\t\t\ttype = elem.attr(\"data-validation\"),\n\t\t\t\t\t\tvalue = elem.val();\n\n\t\t\t\t\tvalidateField(elem, type, value);\n\t\t\t\t});\n\n\t\t\t\tif ( !form.hasClass(\"submitted\") ) {\n\t\t\t\t\tvar type = form.attr(\"data-validation\"),\n\t\t\t\t\t\tvalue = \"\";\n\n\t\t\t\t\tform.find(\"button, input[type='submit']\").hide();\n\t\t\t\t\tform.find(\".form-loader\").show();\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvalidateField(form, type, value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tif ( config.application.debug ) console.log(\"Form :: Validation\");\n\t}\n}","var initGlobal = function() {\r\n\r\n\t// First Visit Cookie\r\n\r\n\tvar firstVisitCookie = cookieSystem.get(\"firstVisit\");\r\n\r\n\tif ( firstVisitCookie === null ) {\r\n\t\tcookieNotify = true;\r\n\t\tcookieSystem.set(\"firstVisit\", \"yes\", 365);\r\n\t\tnotify(config.cookie.message, config.cookie.delay);\r\n\t}\r\n\r\n\r\n\r\n\t// Nav\r\n\r\n\tvar page,\r\n\t\turl = this.location.href,\r\n\t\tsection = url.split(\"/\"),\r\n\t\tnav = $(\"nav\"),\r\n\t\tscrolling = false;\r\n\r\n\tfor ( var i = 0; i < section.length; i++ ) page = section[section.length - 1].split(\".\")[0];\r\n\r\n\tnav.children(\"a\").removeClass(\"active\");\r\n\tvar navActive = page.length ? nav.children(\"a[href*=\" + page + \"]\").addClass(\"active\") : nav.children(\"a\").eq(0).addClass(\"active\");\r\n\r\n\t$(\".nav-trigger\").on(\"click\", function() {\r\n\t\t$(\"header\").toggleClass(\"active\");\r\n\t});\r\n\t$(\".nav-close\").on(\"click\", function() {\r\n\t\t$(\"header\").removeClass(\"active\");\r\n\t});\r\n\t$(\"html, body\").on(\"click\", function(event) {\r\n\t\tif ( !$(event.target).closest(\"header\").length ) $(\"header\").removeClass(\"active\");\r\n\t});\r\n\r\n\r\n\r\n\t// Sidebar\r\n\r\n\t$(\".sidebar\").append(\"<ul></ul>\");\r\n\r\n\t$(\".main a.anchor\").each(function(i) {\r\n\t\tvar id = $(this).attr(\"id\");\r\n\t\tvar name = $(this).next().html();\r\n\r\n\t\t$(\".sidebar ul\").append('<li><a href=\"#' + id + '\">' + name + '</a></li>');\r\n\t\tif ( i === 0 ) $(\".sidebar ul a\").addClass(\"active\");\r\n\t});\r\n\r\n\t$(\".sidebar-trigger\").on(\"click\", function() {\r\n\t\tif ( !$(\".main\").hasClass(\"sidebar-on\") ) {\r\n\t\t\t$(\".main\").addClass(\"sidebar-on\");\r\n\t\t} else {\r\n\t\t\t$(\".main\").removeClass(\"sidebar-on\");\r\n\t\t}\r\n\t});\r\n\t$(\"html, body\").on(\"click\", function(event) {\r\n\t\tif ( !$(event.target).closest(\".sidebar\").length && $(\".main\").hasClass(\"sidebar-on\") ) {\r\n\t\t\t$(\".main\").removeClass(\"sidebar-on\");\r\n\t\t}\r\n\t});\r\n\r\n\t$(\".sidebar li a\").on(\"click\", function(i) {\r\n\t\t$(\".sidebar li a\").removeClass(\"active\");\r\n\t\t$(this).addClass(\"active\");\r\n\r\n\t\t$(\".main\").removeClass(\"sidebar-on\");\r\n\t});\r\n}\r\n\r\n\r\n\r\n// Window Events\r\n\r\nvar introParallax = function() {\r\n\t$(\".intro .parallax\").css({\r\n\t\t\"-webkit-transform\": \"translate3d(0, \" + pageTop / 2 + \"px, 0)\",\r\n\t\t\"-moz-transform\": \"translate3d(0, \" + pageTop / 2 + \"px, 0)\",\r\n\t\t\"-ms-transform\": \"translate3d(0, \" + pageTop / 2 + \"px, 0)\",\r\n\t\t\"-o-transform\": \"translate3d(0, \" + pageTop / 2 + \"px, 0)\",\r\n\t\t\"transform\": \"translate3d(0, \" + pageTop / 2 + \"px, 0)\",\r\n\t\t\"opacity\": 1 - (pageTop / 500)\r\n\t});\r\n}\r\n\r\nvar stickyControls = function() {\r\n\tvar controlsBottom = $(\".controls\").offset().top + $(\".controls\").outerHeight();\r\n\r\n\tif ( controlsBottom >= $(\"footer\").offset().top ) {\r\n\t\t$(\".controls\").css({\r\n\t\t\t\"position\": \"absolute\",\r\n\t\t\t\"top\": $(\"footer\").offset().top - $(\".controls\").outerHeight(),\r\n\t\t\t\"bottom\": \"auto\"\r\n\t\t});\r\n\t}\r\n\r\n\tif ( $(document).scrollTop() + $(window).height() < controlsBottom ) {\r\n\t\t$(\".controls\").css({\r\n\t\t\t\"position\": \"fixed\",\r\n\t\t\t\"top\": \"auto\",\r\n\t\t\t\"bottom\": 0\r\n\t\t});\r\n\t}\r\n}\r\n\r\n$(window).on(\"scroll\", function() {\r\n\tstickyControls();\r\n\trequestAnimationFrame(introParallax);\r\n\r\n\tif ( !anchorClicked && $(\"a.anchor\").length ) {\r\n\t\t$(\"a.anchor\").each(function(i) {\r\n\t\t\tvar top = $(this).offset().top - 200;\r\n\r\n\t\t\tif ( pageTop >= top ) {\r\n\t\t\t\t$(\".sidebar li\").find(\"a\").removeClass(\"active\");\r\n\t\t\t\t$(\".sidebar li\").eq(i - 1).find(\"a\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t\tif ( pageTop < top ) {\r\n\t\t\t\t$(\".sidebar li\").eq(i + 1).find(\"a\").removeClass(\"active\");\r\n\t\t\t}\r\n\t\t\tif ( pageTop + $(window).height() >= $(document).height() ) {\r\n\t\t\t\t$(\".sidebar li\").find(\"a\").removeClass(\"active\");\r\n\t\t\t\t$(\".sidebar li\").eq($(\".sidebar li\").length - 1).find(\"a\").addClass(\"active\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n})\r\n.on(\"load\", stickyControls)\r\n.on(\"resize\", stickyControls);"]}